(function($){
	//Whoisé¸æŠä¸å¯TLDæ¤œç´¢ç”¨ã«å¤‰æ›
	if(typeof(whois_get_unavailable_list) != "undefined") {
		var _whois_ua = whois_get_unavailable_list;
		whois_get_unavailable_list = {};
		for(var i in _whois_ua) {
			whois_get_unavailable_list[_whois_ua[i]] = true;
		}
		delete(_whois_ua);
	}
	
	//ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—
	var getRandomStr = function(n, strFlg, numFlg){
		if(strFlg == undefined) strFlg = false;
		if(numFlg == undefined) numFlg = false;
		
		var strTable = "";
		if(strFlg) strTable += "abcdefghijklmnopqrstuvwxyz";
		if(numFlg) strTable += "0123456789";
		
	    var strings = "";
	    var length = strTable.length;
		for(var i = 0; i < n; i++){
			strings += strTable.charAt(Math.floor(length * Math.random()));
		}
		return strings;
	};
	
	//æ¡åŒºåˆ‡ã‚Š
	var addFigure = function(str) {
		var num = new String(str).replace(/,/g, "");
		while(num != (num = num.replace(/^(-?\d+)(\d{3})/, "$1,$2")));
		return num;
	};
	
	//çµ„ã¿åˆã‚ã›æ•°
	var perm = function(n,r){
		var result = 1;
		for(var i = 0; i < r; i++) {
			result *= n - i;
		}
		return result;
	};
	var comb = function(n,r){
		return perm(n,r) / perm(r,r);
	};
	
	//æ–‡å­—åˆ—å¤‰æ›
	var convStr = function(str){
		var str = str.toLowerCase();
		try{
			str = str.replace(/[ï½-ï½šï¼-ï¼™]/g,function(s){
			    return String.fromCharCode(s.charCodeAt(0)-65248);
			});
		}catch(e){
			//console.log(e);
		}
		return str;
	};
	var convSign = function(text){
		var before = "ï¼â€œâ€ï¼ƒâ™¯ï¼„ï¼…ï¼†â€˜ï¼ˆï¼‰ï¼Šï¼‹ï¼Œï¼â€•ï¼ï¼ï¼šï¼›ï¼œï¼ï¼ï¼Ÿï¼ ï¼»ï¿¥ï¼½ï¼¾ï¼¿â€™ï½›ï½œï½";
		var after = "!\"\"##$%&'()*+,--./:;<=>?@[\\]^_`{|}";
		var str = "";
		for (var i=0; i < text.length; i++){
			c = text.charAt(i);
			n = before.indexOf(c,0);
			if (n >= 0){
				c = after.charAt(n);
			}
			str += c;
		}
		return str;
	};
	var convHalfKana = function(text){
		var half = "ï½±ï½²ï½³ï½´ï½µï½¶ï½·ï½¸ï½¹ï½ºï½»ï½¼ï½½ï½¾ï½¿ï¾€ï¾ï¾‚ï¾ƒï¾„ï¾…ï¾†ï¾‡ï¾ˆï¾‰ï¾Šï¾‹ï¾Œï¾ï¾ï¾ï¾ï¾‘ï¾’ï¾“ï¾”ï¾•ï¾–ï¾—ï¾˜ï¾™ï¾šï¾›ï¾œï½¦ï¾ï½§ï½¨ï½©ï½ªï½«ï½¬ï½­ï½®ï½¯ï½¤ï½¡ï½°ï½¢ï½£ï¾ï¾Ÿ";
		var full = "";
		full = "ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³ã‚¡ã‚£ã‚¥ã‚§ã‚©ãƒ£ãƒ¥ãƒ§ãƒƒã€ã€‚ãƒ¼ã€Œã€";
		full+= "ã€€ã€€ã€€ã€€ã€€ã‚¬ã‚®ã‚°ã‚²ã‚´ã‚¶ã‚¸ã‚ºã‚¼ã‚¾ãƒ€ãƒ‚ãƒ…ãƒ‡ãƒ‰ã€€ã€€ã€€ã€€ã€€ãƒãƒ“ãƒ–ãƒ™ãƒœã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€";
		full+= "ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ãƒ‘ãƒ”ãƒ—ãƒšãƒã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€";
		var str = "";
		for (var i=0; i<text.length; i++){
			c = text.charAt(i);
			cnext = text.charAt(i+1);
			n = half.indexOf(c,0);
			nnext = half.indexOf(cnext,0);
			if (n >= 0){
				if (nnext == 60){
					c = full.charAt(n+60);
					i++;
				}else if (nnext == 61){
					c = full.charAt(n+120);
					i++;
				}else{
					c = full.charAt(n);
				}
			}
			if ((n != 60) && (n != 61)){
				str += c;
			}
		}
		return str;
	};
	
	//é¸æŠã—ãŸTLDã¨æ•°é‡ã‚’evarã«å…¥ã‚Œã‚‹
	var setEvarDataFlag = false,
		setEvarData = function(tld, count) {
		if(count < 31) {
			return;
		} else if(count > 30 && count < 51) {
			count = 31;
		} else if(count > 50 && count < 101) {
			count = 51;
		} else if(count > 100 && count < 301) {
			count = 101;
		} else if(count > 300 && count < 501) {
			count = 301;
		} else if(count > 500 && count < 1001) {
			count = 501;
		} else if(count > 1000 && count < 5001) {
			count = 1001;
		} else if(count > 5000) {
			count = 5001;
		}
		
		tld = tld.replace(/^\./, "");
		
		var s=s_gi('gmoinonamaecom');
			s.linkTrackVars = 'eVar10';
			s.eVar10 = 'bulkdomain_selct_' + tld + '_' + count;
			s.tl(this,'o','bulkdomain_selct_' + tld + '_' + count);
	};
	
	var objectLength = function(obj) {
		var cnt = 0;
		for(var i in obj) {
			cnt++;
		}
		return cnt;
	};
	
	$(function(){
		//ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
		var $countdown = $('#cdown').find('div.countdown');
		if($countdown.size()) {
			var _d = enddate.match(/^(\d{4}).(\d{2}).(\d{2})\D+(\d{2}).(\d{2})/);
			var end = new Date(_d[1],_d[2]-1,_d[3],_d[4],_d[5],0);
			var csecond = 0;
			
			(countDown = function(){
				var now = new Date();
				if(end > now) {
					var time_text = '';
					
					var diff = end.getTime() - now.getTime();
					var day = Math.floor(diff / (1000 * 60 * 60 * 24));
					if(day) time_text = day + 'æ—¥';
					
					var hour = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
					if(hour || day) time_text += hour + 'æ™‚é–“';
					
					var minute = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
					if(day || hour || minute) time_text += (minute < 10 && (day || hour)) ? '0' + minute + 'åˆ†' : minute + 'åˆ†';
					
					var second = Math.floor((diff % (1000 * 60)) / 1000);
					time_text += (second < 10  && (day || hour || minute)) ? '0' + second + 'ç§’' : second + 'ç§’';
					
					csecond = (csecond <= 0) ? 99 : csecond - 1;
					time_text += (csecond < 10) ? '0' + csecond : csecond;
					
					$countdown.find('span').html(time_text);
					
					setTimeout("countDown()", 10);
				} else {
					$countdown.empty();
				}
			})();
		}
		
		var $input_area = $('#inputArea');
		var $alert_area = $('#alertArea');
		
		//ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
		var view_alert = function(text, auto_hide){
			auto_hide = auto_hide || false;
			
			$alert_area
				.stop(true, true)
				.html(text)
				.css('max-height', $(window).height() - 400)
				.show()
				.on('click', function(event){
					if(event.target.tagName != 'INPUT') {
						$(this).off('click').empty().hide();
					}
				});
			
			if(auto_hide) {
				$alert_area
					.delay(1000)
					.fadeOut(1000, function(){
						$(this).off('click').empty();
					});
			}
		};
		
		var $tab_area = $('#tabArea');
		var $whois_option = $('#whoisOpt');
		var $whois_caution = $('#whois_notes , #caution');
		var $login = $('#login');
		
		if($('form.inputSetDomain').size()) {
			//preload
			$('<img>').attr('src', '../images/loading.gif');
			
			var shortage_flg = false;
			
			var $tab_label = $('h5#tab');
			var $price_area = $('#priceArea');
			
			//ã‚¿ãƒ–èª¿æ•´
			var tabAjust = function(){
				var whois_show_flg = false;
				var domain_list = [];
				var whois_na_tld = [];
				
				//æœªé¸æŠã®å ´åˆã¯æœ€åˆã®ã‚¿ãƒ–ã‚’é¸æŠ
				if($tab_area.find('div.tab.open').size() == 0) {
					$tab_area.find('div.tab').eq(0).addClass('open');
				}
				
				//ã‚¿ãƒ–ã‚’èª¿æŸ»
				if($tab_area.find('div.tab').size()) {
					$tab_area.show();
					$tab_label.show();
					
					var tabHeight = $tab_area.find('div.tab').eq(0).find('div.index').height();
					
					$tab_area.find('div.tab').each(function(index){
						//TLDå–å¾—
						var tld = $(this).attr('id');
						tld = tld.replace(/_/g, ".");
						tld = tld.replace(/^tab/, "");
						
						//Whoisé¸æŠå¯å¦ãƒã‚§ãƒƒã‚¯
						if(tld in whois_get_unavailable_list) {
							//ä¸å¯
							whois_na_tld.push(tld);
						} else {
							//å¯
							whois_show_flg = true;
						}
						
						$(this).find('div.list').find('li').each(function(){
							domain_list.push($(this).text());
						});
						
						//é«˜ã•èª¿æ•´
						$(this).css({'z-index': 98-index}).find('div.index').css({'top': index*tabHeight - 1});
						$tab_area.css({'height': (index + 1) * tabHeight});
					});
				} else {
					$tab_area.hide();
					$tab_label.hide();
				}
				
				if(whois_show_flg) {
					$whois_option.show();
					if(whois_na_tld.length) {
						$whois_caution.show();
					} else {
						$whois_caution.hide();
					}
				} else {
					$whois_option.hide();
					$whois_caution.hide();
					$whois_option.find('input[name="whois"]').removeAttr('checked');
					$('#whoisno').attr('checked', 'checked');
				}
				
				//ãƒªã‚»ãƒƒãƒˆ
				$price_area.find('.list').empty();
				$price_area.find('.quantity').find('dd').empty();
				$price_area.find('.total').find('dd').html('-');
				
				if(domain_list.length) {
				//ä¾¡æ ¼æ›´æ–°
						$.ajax({
						type: 'post',
						url: '../js/ajax/get_price.php',
						data: {s: domain_list},
						dataType: 'json',
						beforeSend: function(){
							//ãƒªã‚»ãƒƒãƒˆ
							//$price_area.find('.list').empty();
							//$price_area.find('.quantity').find('dd').empty();
							//$price_area.find('.total').find('dd').html('-');
						},
						success : function(json){
							if(json === false) return false;
							
							var catch_cnt = 0;
							var price_list_length = objectLength(json.tld_price_list);
							var price_list_count = 0;
							$price_area.find('.discountBox').hide().empty();
							for(key in json.tld_price_list){
								//ãŠå¾—é¡è¡¨ç¤º
								if(catch_cnt < 3 && json.tld_price_list[key].discountSumValue > 0) {
									$('<p></p>').html('[' + key + ']<br>é€šå¸¸ç™»éŒ²ã‚ˆã‚Š' + addFigure(json.tld_price_list[key].discountSumValue) + 'å††ãŠå¾—ã§ã™ã€‚').appendTo($('#priceArea .discountBox').show());
									catch_cnt++;
								}
								//TLDï¼‹å€‹æ•°è¡¨ç¤º
								$('<dt></dt>').html(json.tld_price_list[key].tld_label).appendTo($price_area.find('.list'));	//TLD
								$('<dd></dd>').html(addFigure(json.tld_price_list[key].tldCounts)).appendTo($price_area.find('.list'));	//å€‹æ•°
								
								
								//åˆå›æ¤œç´¢ã®ã¿ã‚»ãƒƒãƒˆ
								
								if(setEvarDataFlag === false) {
									setEvarData(json.tld_price_list[key].tld_label, json.tld_price_list[key].tldCounts);
								}
								
								price_list_count++;
								
								if(price_list_count === price_list_length) {
									setEvarDataFlag = true;
								}
								
								if(json.tld_price_list[key].tldCounts < domain_min){
									shortage_flg = true;
									$('.shortageAlert').show();
								} else {
									shortage_flg = false;
									$('.shortageAlert').hide();
								}
							}
							
							//åˆè¨ˆå€‹æ•°
							$price_area.find('.quantity').find('dd').html(addFigure(json.total_num));
							//åˆè¨ˆé‡‘é¡
							$price_area.find('.total').find('dd').html(addFigure(json.total_value) + "å††");
						}
					});
				}
			};
			tabAjust();
			
			//ã‚¿ãƒ–å†…ã‚¤ãƒ™ãƒ³ãƒˆ
			var domainDeleteEvent = function(){
				var $btn = $(this);
				var $tab = $btn.closest('div.tab');
				
				var domain = $btn.closest('li').text();
				view_alert(domain + "ã‚’å‰Šé™¤ã—ã¾ã—ãŸ", true);
				$btn.closest('li').remove();
				
				var li_cnt = 0;
				$tab.find('div.list').find('li').each(function(index){
					if(index % 2 == 0){
						$(this).removeClass('odd').addClass('even');
					}else{
						$(this).removeClass('even').addClass('odd');
					}
					li_cnt++;
				});
				
				
				if(! li_cnt) {
					$tab.remove();
				}
				
				$tab.find('ul').each(function(){
					var $ul = $(this);
					if($ul.find('li').size() == 0) {
						$ul.remove();
					}
				});
				
				tabAjust();
			};
			var tabSetting = function($tab){
				//TLDå–å¾—
				var tld = $tab.attr('id');
				tld = tld.replace(/_/g,".");
				tld = tld.replace(/^tab/,"");
				
				$tab.find('div.index').on('click', function(){
					$tab_area.find('div.tab').removeClass('open');
					$tab.addClass('open');
				});
				
				$tab.find('input.delBtnAll').on('click', function(){
					$alert_area.stop(true, true).css('max-height', $(window).height() - 400).show().each(function(){
						var alert = $(this);
						
						alert.html(tld + 'ã‚’ã¾ã¨ã‚ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ<br>');
						
						$('<input>')
							.val('ã¯ã„')
							.addClass('yes')
							.attr({'type':'button'})
							.on('click', function(e){
									$tab.remove();
									view_alert(tld + "ã‚¿ãƒ–ã‚’å‰Šé™¤ã—ã¾ã—ãŸ", true);
									tabAjust();
								})
							.appendTo(alert);
						
						$('<input>')
							.val('ã„ã„ãˆ')
							.addClass('no')
							.attr({'type':'button'})
							.on('click', function(){
									alert.empty().hide();
								})
							.appendTo(alert);
						
						alert.wrapInner('<div></div>');
					});
				});
				
				$tab.find('input.delBtn').on('click', domainDeleteEvent);
			};
			
			//ã‚¿ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆbind
			$tab_area.find('div.tab').each(function(){
				tabSetting( $(this) );
			});
			
			$('#fixButton').on('click', function(){
				var $fixBtn = $(this);
				
				var errorTxt = "";
				
				//ãƒ‰ãƒ¡ã‚¤ãƒ³åãƒã‚§ãƒƒã‚¯
				var domainNameList = new Array();
				var name_cnt = 0;
				var name_text = $.trim($input_area.find('textarea').val());
				if(name_text == "") {
					errorTxt = "æ–‡å­—åˆ—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
				} else {
					domainNameList = name_text.replace(/\n{2,}/, "\n").split("\n");
					name_cnt = domainNameList.length;
				}
				
				//tldãƒã‚§ãƒƒã‚¯
				var domainTldList = new Array();
				$input_area.find('input[name^="tldCheck"].checked').each(function(){
					domainTldList.push($(this).val().replace(/_/g,"."));
				});
				var tld_cnt = domainTldList.length;
				if(tld_cnt == 0) {
					errorTxt += "ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚<br>";
				}
				
				var domain_count_all = 0;
				if($tab_area.find('div.tab').size()) {
					$tab_area.find('div.tab').each(function(){
						//TLDå–å¾—
						var tld = $(this).attr('id');
						tld = tld.replace(/_/g, ".");
						tld = tld.replace(/^tab/, "");
						
						var tld_domain_count_all = $(this).find('input[name^="domain_list"]').size();
						domain_count_all += tld_domain_count_all;
						
						if(tld_domain_count_all + name_cnt > domain_max) {
							errorTxt += tld + "ã®æœ€å¤§å€‹æ•°ã‚’è¶…ãˆã¾ã—ãŸã€‚<br>";
						}
					});
				} else {
					if(name_cnt > domain_max) {
						for(var i in domainTldList) {
							errorTxt += domainTldList[i] + "ã®æœ€å¤§å€‹æ•°ã‚’è¶…ãˆã¾ã—ãŸã€‚<br>";
						}
					}
				}
				
				//å€‹æ•°ãƒã‚§ãƒƒã‚¯
				if(domain_count_all + name_cnt * tld_cnt > domain_max_all - 10) {
					errorTxt += "ãŠç”³ã—è¾¼ã¿æœ€å¤§å€‹æ•°ã‚’è¶…ãˆã¾ã—ãŸã€‚<br>";
				}
				
				if(errorTxt != "") {
					//ã‚¨ãƒ©ãƒ¼æœ‰
					view_alert(errorTxt, true);
					
				} else {
					//ã‚¨ãƒ©ãƒ¼ç„¡
					
					//æ–‡å­—åˆ—å¤‰æ›
					for(var i in domainNameList) {
						domainNameList[i] = domainNameList[i].replace(/(^\s+)|(\s+$)/g,"");
						domainNameList[i] = convStr(domainNameList[i]);
						domainNameList[i] = convHalfKana(domainNameList[i]);
						domainNameList[i] = convSign(domainNameList[i]);
					}
					
					$tab_area.show().find('ul.latest').removeClass('latest');
					
					//ãƒ‰ãƒ¡ã‚¤ãƒ³åÃ—tldã§ã‚¿ãƒ–ä½œæˆ
					$.ajax({
						type: 'post',
						url: '../js/ajax/error_check.php',
						data: {tld:domainTldList, name:domainNameList},
						dataType: 'json',
						beforeSend: function(){
							$('#loading').show();
							$fixBtn.hide();
						},
						success : function(json){
							var openTabFlg = false;
							
							var exist_list = {};
							//æ—¢å­˜ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒªã‚¹ãƒˆç”Ÿæˆ
							$tab_area.find('input[name^="domain_list"]').each(function(){
								exist_list[$(this).val()] = true;
							});
							
							for(tld in json.domain){
								var tab_name = 'tab' + tld.replace(/\./g,"_");
								
								var $tab = $('#' + tab_name);
								if($tab.size() == 0) {
									$tab = $('<div>').attr({'id': tab_name}).addClass('tab').prepend(
										$('<div>').addClass('index').html(tld).append(
											$('<input>').attr({'type':'button'}).addClass('delBtnAll').val('Ã—')
										).wrapInner('<p></p>')
									)
									.appendTo('#tabArea');
									
									tabSetting($tab);
								}
								
								if($tab.find('div.list').size() == 0){
									$('<div>').addClass('list').appendTo($tab);
								}
								
								
								var cnt = 0;
								var addul = $('<ul>');
								
								for(name in json.domain[tld]){
									var domain = json.domain[tld][name].domain;
									
									if(domain in exist_list) {
										continue;
									}
									
									var $li = $('<li></li>');
									$li.text(tld);
									$('<span></span>').addClass('bold').text(name).prependTo($li);
									$('<input>').attr({'type':'button'}).addClass('delBtn').val('Ã—').on('click', domainDeleteEvent).appendTo($li);
									$('<input>').attr({'type':'hidden','name':'domain_list[]'}).val(domain).appendTo($li);
									$li.appendTo(addul);
									cnt++;
								}
								
								if(cnt){
									if(! openTabFlg){
										$tab.addClass('open');
										openTabFlg = true;
									}
									addul.addClass('latest').prependTo($tab.find('div.list'));
								}
								
								$tab.find('div.list').find('li').each(function(index){
									if(index%2 == 0){	
										$(this).removeClass('odd').addClass('even');
									}else{
										$(this).removeClass('even').addClass('odd');
									}
								});
							}
							
							var errorTxt = "";
							for(type in json.error){
								for(key in json.error[type]){
									errorTxt += json.error[type][key] + "<br>";
								}
							}
							if(errorTxt != ""){
								//ã‚¨ãƒ©ãƒ¼æœ‰
								view_alert(errorTxt);
							}
							
							//å…¥åŠ›ãƒªã‚»ãƒƒãƒˆ
							$input_area.find('textarea').val("");
							
							tabAjust();
						},
						complete : function(){
							$fixBtn.show();
							$('#loading').hide();
						}
					});
				}
			});
		}
		
		//ãƒ‰ãƒ¡ã‚¤ãƒ³åå…¥åŠ›è£œåŠ©ãƒœãƒƒã‚¯ã‚¹
		$('.addStrings').each(function(){
			var self = $(this);
			self.find('a').on('click',function(e){
				if(self.hasClass('serial')){
					$('div.balloonBox.serial').show();
				}else 
				if(self.hasClass('random')){
					$('div.balloonBox.random').show();
				}
				e.preventDefault();
			});
		});
		
		$('div.balloonBox').each(function(){
			var balloonBox = $(this);
			var balloon = balloonBox.find('div.balloon');
			balloon.find('button').on('click',function(){
				var addText = "";
				if(balloonBox.hasClass('serial')){
					var str = balloon.find('input[name="str"]').val();
					var num = balloon.find('input[name="num"]').val();
					var digits = balloon.find('input[name="digits"]').val();
					for(var i=1; i<=num; i++){
						var number = i+"";
						while(number.length < digits){
							number = "0"+number;
						}
						addText += str+number+"\n";
					}
				}else 
				if(balloonBox.hasClass('random')){
					var num = balloon.find('input[name="num"]').val();
					var strFlg = balloon.find('input[name="strFlg"]').prop('checked');
					var numFlg = balloon.find('input[name="numFlg"]').prop('checked');
					var digits = balloon.find('input[name="digits"]').val();
					if(digits < 3){
						balloon.find('input[name="digits"]').val('3');
						digits = 3;
					}
					if(num > 100000){
						balloon.find('input[name="num"]').val('100000');
						num = 100000;
					}
					var mn = 0;
					if(strFlg) mn += 26;
					if(numFlg) mn += 10;
					var md = parseInt(digits) > mn ? mn : parseInt(digits);
					var max = perm(mn,md);
					if(num > max) num = max;
					var checkTable = new Object();
					var i = 0;
					var j = 0;
					while(i < num){
						var randStr = getRandomStr(digits,strFlg,numFlg);
						if(checkTable[randStr] == undefined){
							checkTable[randStr] = true;
							addText += randStr+"\n";
							i++;
						}
					}
					delete(checkTable);
				}
				var defaultText = $input_area.find('textarea').val();
				$input_area.find('textarea').val(addText+defaultText);
				balloonBox.hide();
				$('label.text').hide();
				balloon.find('input[name="str"]').val("");
			});
			balloon.find('.close').on('click',function(){
				balloonBox.hide();
			});
			balloon.find('input').on('change keyup',function(){
				if(balloonBox.hasClass('serial')){
					var str = balloon.find('input[name="str"]').val();
					var num = balloon.find('input[name="num"]').val();
					var digits = balloon.find('input[name="digits"]').val();
					var number = "1";
					while(number.length < digits){
						number = "0"+number;
					}
					balloon.find('.eg').text(str+number+"ï½");
				}
			});
			if(balloonBox.hasClass('random')){
				balloon.find('input[name="digits"]').on('blur',function(){
					var digits = $(this).val();
					if(digits < 3){
						$(this).val('3');
					}
				});
				balloon.find('input[name="num"]').on('blur',function(){
					var num = $(this).val();
					if(num > 100000){
						$(this).val('100000');
					}
				});
			}
		});
		
		//å¤ã„ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œã®ãŸã‚ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚ŒãŸã‚‰classã«checkedã‚’è¿½åŠ 
		$input_area.find('input[name^="tldCheck"]')
			.on('change',function(){
				if($(this).prop('checked')) {
					$(this).addClass('checked');
				} else {
					$(this).removeClass('checked');
				}
			}).change();
		
		//å…¨ã¦ã®TLDã‚’é¸æŠ
		$('#check_all').on('click',function(){
			$input_area.find('input[name^="tldCheck"]').prop('checked', $(this).prop('checked'));
			if($(this).prop('checked')){
				$input_area.find('input[name^="tldCheck"]').addClass('checked');
			}else{
				$input_area.find('input[name^="tldCheck"]').removeClass('checked');
			}
		});
		//$('#check_all').trigger('click');
		
		//ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ãƒã‚§ãƒƒã‚¯
		$('form#bulkSubmit').on('submit', function(event) {
			var alertMessageText = [];
			
			if($('form.inputSetDomain').size()) {
				if(shortage_flg >= 1) {
					alertMessageText.push("ã‚»ãƒƒãƒˆå‰²é©ç”¨ã«ã¯å„ãƒ‰ãƒ¡ã‚¤ãƒ³æ¯ã«" + domain_min + "å€‹ä»¥ä¸Šã®ä¸€æ‹¬ç”³è¾¼ã¿ãŒå¿…è¦ã§ã™ã€‚");
				}
			}
			
			//ãƒ‰ãƒ¡ã‚¤ãƒ³å…¥åŠ›
			$tab_area.each(function(){
				var domainListInput = $(this).find('input[name^="domain_list"]');
				if(domainListInput.size() == 0){
					alertMessageText.push("ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");
				}
			});
			
			//Whoisæƒ…å ±å…¬é–‹ä»£è¡Œ
			$whois_option.each(function() {
				var whois_select_flg = false;
				if($(this).css('display') != 'none') {
					var whois_select_flg = false;
					$(this).find('input[type="radio"]').each(function(){
						if($(this).prop('checked')){
							whois_select_flg = true;
							return false;
						}
					});
					if(! whois_select_flg) {
						alertMessageText.push("Whoisæƒ…å ±å…¬é–‹ä»£è¡Œã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
					}
				}
			});
			
			//ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±
			$login.each(function() {
				if(
					$('#exist_login').prop('checked') &&
					($(this).find('input[name="username"]').val() == "" || $(this).find('input[name="password"]').val() == "")
				) {
					alertMessageText.push("ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
				}
			});
			
			//æ”¯æ‰•ã„æ–¹æ³•é¸æŠ
			$('#paymentSelect').each(function() {
				var payment_select_flg = false;
				var payment_type;
				
				$('#paymentSelect').find('input[type="radio"]').each(function(){
					if($(this).prop('checked')) {
						payment_select_flg = true;
						payment_type = $(this).val();
						return false;
					}
				});
				
				if(! payment_select_flg) {
					alertMessageText.push("ãŠæ”¯æ‰•ã„æ–¹æ³•ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
				
				} else {
					switch(payment_type) {
						case 'credit':
							$('#creditSelect').each(function() {
								var payment_option_flg = false;
								$(this).find('input[type="radio"]').each(function(){
									if($(this).prop('checked')) {
										payment_option_flg = true;
										return false;
									}
								});
								if(! payment_option_flg) {
									alertMessageText.push("ã‚«ãƒ¼ãƒ‰ç¨®åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
								}
								
								if($(this).find('input.credit_number').val() == "") {
									alertMessageText.push("ã‚«ãƒ¼ãƒ‰ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
								}
								
								if($(this).find('input.credit_holder').val() == "") {
									alertMessageText.push("ã‚«ãƒ¼ãƒ‰åç¾©äººã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
								}
								
								if($(this).find('input.credit_security_code').val() == "") {
									alertMessageText.push("ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
								}
							});
							break;
						
						case 'netcvs':
							var payment_option_flg = false;
							var cvs_type;
							$('#netcvsSelect').each(function() {
								$(this).find('input[type="radio"]').each(function(){
									if($(this).prop('checked')) {
										payment_option_flg = true;
										cvs_type = $(this).val();
										return false;
									}
								});
								if(! payment_option_flg) {
									alertMessageText.push("ã‚³ãƒ³ãƒ“ãƒ‹ç¨®åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
								}
								if(parseInt(cvs_type) == 21 && $('#netcvsSE').find('input[type="text"]').val() == "") {
									alertMessageText.push("å§“åå…¨è§’ã‚«ã‚¿ã‚«ãƒŠã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
								}
							});
							break;
					}
				}
			});
			
			//è¦ç´„åŒæ„
			$('#agree').each(function(){
				if(! $(this).prop('checked')) {
					alertMessageText.push("è¦ç´„ã¸ã®åŒæ„ãŒå¿…è¦ã§ã™ã€‚");
				}
			});
			
			if(alertMessageText.length) {
				$alert_area.stop(true,true).html(alertMessageText.join("<br>")).css('max-height', $(window).height() - 400).show().on('click',function(){$(this).hide()});
				event.preventDefault();
			} else {
				$('#loading').show();
			}
		});
		
		//ãƒªãƒ•ã‚¡ãƒ©ã‚¨ãƒ©ãƒ¼
		if(typeof(redirect_error) != "undefined") {
			$alert_area.stop(true,true).html(redirect_error['message']).css('max-height', $(window).height() - 400).show().on('click',function(){$(this).hide()});
			switch(redirect_error['type']) {
				case 'login':
					$(window).scrollTop($login.offset().top);
					break;
			}
		}
		
		//å…¥ã£ã¦ãŸã‚‰ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
		if($input_area.find('textarea').val() != "") {
			$('#fixButton').trigger("click");
		}
		
		//ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã®å…¥åŠ›
		if((typeof(redirect_error) != "undefined" && redirect_error['type'] == 'login') || $('#bulkset_input_account').find('input[name="username"]').val() != "") {
			$('#exist_login').attr('checked', 'checked');
		}
		$('#create_login, #exist_login').on('change', function(){
			if($('#exist_login').prop('checked')) {
				$login.find('input[name="username"], input[name="password"]').removeAttr('disabled');
			
			} else {
				$('#create_login').attr('checked', 'checked');
				$login.find('input[name="username"], input[name="password"]').attr('disabled', 'disabled');
			}
		}).change();
		
		//æ”¯æ‰•ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤º
		$('#paymentSelect').each(function(){
			var parent = $(this);
			var select = parent.find('input[name="payment"]');
			var box = $('#existsCreditSelect, #creditSelect, #netcvsSelect, #selectOtherPrice, #selectConveniPrice');
			select.on('change', function(){
				var select_value = "";
				select.each(function(){
					if($(this).prop('checked')) {
						select_value = $(this).val();
						return false;
					}
				});
				
				box.hide();
				switch(select_value) {
					case 'netcvs':
						$('#selectConveniPrice').show();
						$('#netcvsSelect').show();
						break;
					
					case 'exists_credit':
						$('#selectOtherPrice').show();
						$('#existsCreditSelect').show();
						break;
					
					case 'credit':
						$('#selectOtherPrice').show();
						$('#creditSelect').show();
						break;
						
					default:
						$('#selectOtherPrice').show();
							break;
				}
			}).change();
		});
		
		$('#netcvsSelect').each(function() {
			var select = $(this).find('input[type="radio"]');
			select.on('change', function(){
				select.each(function(){
					if($(this).prop('checked')){
						if(parseInt($(this).val()) == 21) {
							$('#netcvsSE').show();
						} else {
							$('#netcvsSE').hide();
						}
						return false;
					}
				});
			}).change();
		});
		
		//ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼å¯¾å¿œ
		function supportsAttr(tag,attr) {
			var input = document.createElement(tag);
				return attr in input;
		}
		if(! supportsAttr('input', 'placeholder')){
			$('input,textarea').each(function(){
				var target = $(this);
				
				if(!target.attr('placeholder')){
					return false;
				}
				
				target.wrap('<div style="position: relative;">');
				var placeholder = $('<span>')
									.text(target.attr('placeholder'))
									.css({
										'position':'absolute',
										'top':'0',
										'left':'0',
										'color':'#a9a9a9',
										'margin': '1px',
										'padding-left': parseInt(target.css('padding-left'))+parseInt(target.css('border-left-width'))+2,
										'padding-top': parseInt(target.css('padding-top'))+parseInt(target.css('border-top-width'))+2
									})
									.insertAfter(target)
									.click(function(){ target.focus(); });
				
				target.keyup(function(){
					if(target.val()==''){
						placeholder.show();
					}else{
						placeholder.hide();
					}
	            });
			});
		}
		
		//ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
		$('#logout').on('click', function(){
			$.ajax({url: '../js/ajax/logout.php'});
			$('#bulkset_input_account').find('input[name="username"]').val("");
			view_alert('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚', true);
			$(this).remove();
		});
	});
})(jQuery);

$(window).on('unload',function(){});=¨s“      X–áX–á€=gÍdX ‹"   N    :http://www.onamae.com/service/bulkdomain_registration/js/script.js?1479954225 request-method GET response-head HTTP/1.1 200 OK
Date: Sun, 05 Feb 2017 09:25:36 GMT
Server: Apache
x-xss-protection: 1; mode=block
x-content-type-options: nosniff
Last-Modified: Thu, 24 Nov 2016 02:23:45 GMT
Etag: "7424-54202b1dd6e40"
Accept-Ranges: bytes
Content-Length: 29732
Content-Type: application/javascript
 uncompressed-len 0   t$