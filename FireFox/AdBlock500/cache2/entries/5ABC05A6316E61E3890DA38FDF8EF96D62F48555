define(function (){});
define("components/units/pageJob",["../action/job"],function(e,t,n){var a=e("../action/job");n.exports=new a});
define("components/action/job",["../../config/config"],function(e,t,n){var a=new Q.ic.InfoCenter({moduleName:"Job"}),i=e("../../config/config"),r=Q.event.customEvent,o={};seajs.data.base+"units/";var l=Q.Class("Job",{construct:function(){this._oginjobs=[],this._asyncjobs=[],this._execjobs=[],this._execedjobs=[]},methods:{create:function(e,t){if(!t)throw new Error("Job.create : obj is null.");return o[e]||(o[e]=t),this},add:function(e,t){var n=o[e];if(!n)return this;for(var a=0;a<this._oginjobs.length;a++)if(n=this._oginjobs[a],n.name==e)return this;return this._oginjobs.push({name:e,param:t,object:o[e]}),this._execjobs=this._oginjobs.slice(0),this},reset:function(){this._execjobs=this._oginjobs.slice(0),this._execedjobs=[]},clear:function(){this._oginjobs=[],this._execjobs=[],this._execedjobs=[]},getJob:function(e){return o[e]},load:function(e,t){var n=this,a=n.getJob(e);return-1===n._asyncjobs.indexOf(e)&&(n._asyncjobs.push(e),n.add(e),n._startJob(e)),t&&t.call(a,a),a},sync:function(){this.load.apply(this,arguments)},async:function(t,n){var a=this;i.projectDebug;var r="../../units/";i.projectDebug||(r="../../"+i["units"+t.replace(/\//g,"_")+"Version"]+"/units/"),e.async(r+t,function(e){a.sync(e,n)})},getJobs:function(){return this._oginjobs},check:function(e){var t,n;try{e.getDependentDoms&&(t=e.getDependentDoms()),n=e.check(t)}catch(a){}return n===!0},start:function(){var e=this,t=[],n=e._execjobs,i=e._execedjobs,o=[],l=this.check,s=new Date;window.__qlt&&window.__qlt.start&&window.__qlt.start("jobCheckReady"),n=n.filter(function(e){return e.passed=l(e.object),e.passed||a.warn("job["+e.name+"] check failed!!!"),e.passed}),window.__qlt&&window.__qlt.end&&window.__qlt.end("jobCheckReady"),a.debug("Check all jobs in "+(new Date-s)+" ms"),s=new Date,n.forEach(function(e){for(var n=0;n<i.length;n++)if(e.name===i[n].name)return o.push(e.name),void 0;t.push(e)}),o.length>0&&a.debug("Jobs runed before in page: "+o.join(",")),setTimeout(function(){e._handleInit(t),e._handleExec(t),a.debug("Run all jobs in "+(new Date-s)+" ms"),r.fire({type:"jobdone"})},0)},_handleInit:function(e){var t=[];window.__qlt&&window.__qlt.start&&window.__qlt.start("jobInitReady"),e.forEach(function(e){var n=new Date,i=e.name;t.push(i);var r=e.param,l=o[i];if(l.init)try{l.init.call(l,r)}catch(s){a.warn("job["+i+"] init failed!!!"),a.warn("message : "+s.message),a.warn("stack : "+s.stack)}a.debug("Init ["+i+"] cost "+(new Date-n)+" ms")}),window.__qlt&&window.__qlt.end&&window.__qlt.end("jobInitReady"),a.debug("Jobs in page : "+t.join(","))},_handleExec:function(e){var t=this,n=t._execedjobs;for(window.__qlt&&window.__qlt.start&&window.__qlt.start("jobExecReady");e.length>0;){var i=new Date,r=e[0].name,l=e[0].param,s=o[r];if(s.exec){try{s.exec.call(s,l)}catch(m){a.warn("job["+r+"] executed failed!!!"),a.warn("message : "+m.message),a.warn("stack : "+m.stack)}a.debug("Exec ["+r+"] cost "+(new Date-i)+" ms")}n.push(e.shift())}window.__qlt&&window.__qlt.end&&window.__qlt.end("jobExecReady")},_startJob:function(e){var t=this,n=t._execjobs,i=t._execedjobs,r=this.check,l=new Date;if(n=n.filter(function(t){return t.name!==e?!1:(t.passed=r(t.object),t.passed||a.warn("job["+t.name+"] check failed!!!"),t.passed)}),a.debug("Check an async job in "+(new Date-l)+" ms"),1===n.length){l=new Date;var s=n[0],m=new Date,d=s.name,h=s.param,U=o[d];if(U.init){try{U.init.call(U,h)}catch(c){a.warn("job["+d+"] init failed!!!"),a.warn("message : "+c.message),a.warn("stack : "+c.stack)}a.debug("Init ["+d+"] cost "+(new Date-m)+" ms")}if(U.exec)try{U.exec.call(U,h)}catch(c){a.warn("job["+d+"] executed failed!!!"),a.warn("message : "+c.message),a.warn("stack : "+c.stack)}i.push(U),a.debug("Run an async job ["+d+"] in "+(new Date-l)+" ms")}}}});n.exports=l});
define("config/projectConfig",[],function(e,t,n){var a;n.exports={setConfig:function(e){a=e},getConfig:function(){return a}}});
define("config/siteDomain",[],function(e,t,n){n.exports={SITE_DOMAIN:"iqiyi.com",getDomain:function(){if("file:"==location.protocol)return this.SITE_DOMAIN;var e=2,t=window.location.hostname.split(".");return t=t.slice(t.length-e),t.join(".")},isPPS:function(){var e=this.getDomain(),t=!1;return-1!==e.indexOf("pps.tv")?!t:t}}});
define("kit/player",["./flashCallV2","../kit/eventPlugin"],function(e,t,n){var a=e("./flashCallV2"),i=e("../kit/eventPlugin");n.exports=Q.Class("Player",{plugins:[new i],construct:function(e){this._player=e.playerid?"video"==e.playerid||"flash"==e.playerid?document.getElementById("video")||document.getElementById("flash"):document.getElementById(e.playerid):e.player[0],this._opt=e},methods:{_flashcall:function(e,t,n){var i=this._opt.playerid;"video"==this._opt.playerid&&(i="flash"),a({flashID:i,callback:n,functionName:e,parameter:t})},_hasInterface:function(e){try{return!!this._player[e.functionName]}catch(t){return!1}},load:Q.fn.emptyMethod,play:Q.fn.emptyMethod,resume:Q.fn.emptyMethod,replay:Q.fn.emptyMethod,pause:Q.fn.emptyMethod,seek:Q.fn.emptyMethod,stop:Q.fn.emptyMethod,getPlayInfo:Q.fn.emptyMethod,getInitVideoInfo:Q.fn.emptyMethod,getVideoInfo:Q.fn.emptyMethod,switchVideoFullScreen:Q.fn.emptyMethod}})});
define("kit/flashCallV2",[],function(e,t,n){function a(e){e=e||{};var t=Q.$("#"+(e.flashID||"")),n=e.functionName,a=e.parameter,i=e.callback||Q.fn.emptyMethod;t&&n&&(void 0===a?i(t[0][n]()):"[object Object]"==Object.prototype.toString.apply(a)||"[object Array]"==Object.prototype.toString.apply(a)?i(t[0][n](JSON.stringify(a))):i(t[0][n](a)))}var i=[],r=!0;n.exports=function(e){Q.player.loadSuccess?a(e):(i.push(e),r&&(Q.event.customEvent.on("swf_playerLoadSuccess",function(){if(i.length){for(var e=0;e<i.length;e++)try{a(i[e])}catch(t){}i.length=0}}),r=!1))}});
define("kit/eventPlugin",[],function(e,t,n){var a=new Q.ic.InfoCenter({moduleName:"EventPlugin"}),i=Q.Class("EventPlugin",{construct:function(){},methods:{on:function(e,t){this._ep_createList();var n=function(e){t(e)};return e=e.toLowerCase(),this._ep_lists[e]=this._ep_lists[e]||[],this._ep_lists[e].push({type:e,listener:t,realListener:n}),a.debug("on | "+this.__NAME__+" | "+e+" | list length : "+this._ep_lists[e].length),this},un:function(e,t){if(this._ep_createList(),e){e=e.toLowerCase();var n=this._ep_lists[e];if(n){var a=(n.length,!t);n&&n.length>0&&(a?this._ep_lists[e]=[]:n.forEach(function(e,a){e&&e.listener===t&&(n[a]=null)}))}}else this._ep_clearList();return this},fire:function(e){this._ep_createList();var t=e.type.toLowerCase(),n=e.data,i=this._ep_lists[t];return i&&i.length>0&&i.forEach(function(e){try{e&&e.listener&&e.listener({type:t,data:n})}catch(i){a.log("eventPluginFireError---eventType is :"+t+" ;error message: "+i.message)}}),this},_ep_clearList:function(){this._ep_lists=null},_ep_createList:function(){this._ep_lists||(this._ep_lists={})}}});n.exports=i});
define("kit/videoInfo",["../interfaces/videoInfo","../interfaces/mtInterface","../interfaces/videoUrlInterface","./getRemoteInfo","./playerror","../config/mobileConfig"],function(e,t,n){var a=e("../interfaces/videoInfo"),i=e("../interfaces/mtInterface");e("../interfaces/videoUrlInterface"),e("./getRemoteInfo");var r=e("./playerror"),o=new Q.ic.InfoCenter({moduleName:"VideoInfo"});e("../config/mobileConfig");var l={},s={},m=Q.Class("VideoInfo",{construct:function(){this.callsuper()},statics:{_videoInfo:{},get:function(e,t){o.log("videoStory, 开始获取视频信息"),o.log("videoStory, options： "+JSON.stringify(e));var n,i=this,r=e.tvid,l=e.vid||"",s=e.key,d=e.type||"ts",h=e.mt||1,U=e.speed||"",c=m._videoInfo[r+(l?"|"+l:"")],V=e.usage||"phone";if("mt"==s||"logo"==s||"ipLimit"==s||"ntv"==s||"ptv"==s)c||(c={},m._videoInfo[r+(l?"|"+l:"")]=c),c[s]&&("mt"!=s||c[s][d]&&c[s][d][h])?"mt"!=s?t&&t(c[s],c):(n=U?c[s][d]:c[s][d][h],t&&t(n,c)):(o.log("videoStory, getMTInfo start"),i.getMTInfo({tvid:r,onsuccess:function(e){if(o.log("videoStory, getMTInfo end"),"mt"!=s)c[s]=e[s],t&&t(c[s],c);else{c[s]={},c[s][d]={};var a;"ts"==d?a=e.mtl:"mp4"==d&&(a=e.mpl),a.forEach(function(e){"vd"in e&&(c[s][d][e.vd]=e)}),n=U?c[s][d]:c[s][d][h],t&&t(n,c)}},onfailure:function(e){o.error("videoStory, getMTInfo end"),o.error("videoStory, data: "+JSON.stringify(e)),t&&t(e)}}));else if(c)s?t&&t(c[s],c):t&&t(c,c);else{var u=new a({tvid:r,vid:l,usage:V});u.request({memory:!0},function(e){if("A00000"==e.code){var n=e.data;n.isUgc=i.isUgc(n.tvid),m._videoInfo[r+(l?"|"+l:"")]=n,s?t&&t(n[s],n):t&&t(n,n)}})}},getMTInfo:function(e){e=e||{};var t=e.tvid,n=e.onsuccess,a=e.onfailure;if(l[t]){var m=this;setTimeout(function(){m.getMTInfo(e)},100)}else if(s[t])a(s[t]);else{l[t]=!0;var d=new i({tvid:t});d.request(function(e){var i="object"==typeof e?JSON.stringify(e):e.toString();if(o.log("videoStory, getMTInfo, 后端返回data: "+i),null===e&&r.addItem(r.code.mtNull),"A00000"==e.code){var m=e.data;n(m)}else"Q00202"==e.code?(o.warn("版权下线"),r.addItem(r.code.offline),a(e)):a&&(r.addItem(r.code.mtFail),e.code?Q.log.server({type:"piaoshhtestmayttf",des:"mterror",tvid:t,code:e.code},"http://msg.71.am/tmpstats.gif"):e.code="没有返回code",s[t]=e,a(e));delete l[t]})}},isUgc:function(e){try{var t=parseInt(e,10)>2e8;e=""+e;var n=e.split("");return t&&"9"==n[e.length-1]&&"0"==n[e.length-2]}catch(a){return!1}}}});n.exports=m});
define("interfaces/videoInfo",["../kit/remoteInterface","../kit/ifrestime","../config/pcConfig","../kit/checkI18nType"],function(e,t,n){var a,i=e("../kit/remoteInterface"),r=e("../kit/ifrestime"),o=e("../config/pcConfig"),l=e("../kit/checkI18nType");l.type||(a="zh_tw"),n.exports=Q.Class("RIVideoInfo",{construct:function(e){this.tvid=e.tvid,this.vid=e.vid,this.usage=e.usage;var t=o.interfaces.vj+e.tvid+"/"+e.vid+"/";this._remoteInterface=new i({videoInfo:{url:t}})},methods:{request:function(e,t){var n=this;if(e=e||{},!this.tvid||!this.vid)return t&&t({code:"A00001"}),void 0;var i=e.memory;i&&delete e.memory;var o=new Date;e.status=e.status||"1",a&&(e.locale=a),this._remoteInterface.send({ifname:"videoInfo",memory:i,dataType:"jsonp",param:e},function(e){if("pc"!==n.usage&&r.send({tl:new Date-o,intype:"vj"}),t){if(e&&e.data){var a=e.data;a.aid&&a.albumQipuId&&(e.data.aid=a.albumQipuId),a.videoQipuId&&a.tvid&&(a.tvid=a.videoQipuId)}t(e)}})}}})});
define("kit/checkRemoteData",[],function(e,t,n){n.exports={check:function(e){if(!e)return!0;var t=!0;return t},checkArray:function(e,t){var n=this;if(Q.array.isArray(t)){var a=!0;return t.forEach(function(t){return n.checkData(e.item,t)?void 0:(a=!1,!1)}),a}return!1},checkObject:function(e,t){return this.check(e,t)},isEmpty:function(e,t){return"object"==e.type?null===t:"array"==e.type?0===t.length:""===t},checkData:function(e,t){return"number"==e.type&&"number"==typeof t?!0:"string"==e.type&&"string"==typeof t?!0:"boolean"==e.type&&"boolean"==typeof t?!0:"array"==e.type?this.checkArray(e.item,t):"object"==e.type?this.checkObject(e.struct,t):!1},log:function(){}}});
define("kit/rhf8vg",[],function(require,exports,module){var _RHF8VG=eval(function(e,t,n,a,i,r){if(i=function(e){return(t>e?"":i(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;n--;)r[i(n)]=a[n]||i(n);a=[function(e){return r[e]}],i=function(){return"\\w+"},n=1}for(;n--;)a[n]&&(e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),a[n]));return e}('(19(){18 13={\'33\':19(a,b){1d a*b},\'N\':19(a,b){1d a<b},\'2C\':19(a,b){1d a&b},\'2p\':19(a,b){1d a&b},\'39\':19(a,b){1d a>>b},\'T\':19(a,b){1d a&b},\'1a\':(19(){18 d=0,1B=\'\',1z=[[],1g,[],[],\'\',\'\',\'\',\'\',\'\',\'\',1i,-1,-1,1g,1i,1i,1f,1f,{},-1,-1,/ /,1f,{},1g,{},1g,/ /,/ /,-1,1i,-1,/ /,/ /,1f,1f,1f,1f,1g,1g,1g],1I=1z["1r"];1e(;d<1I;){1B+=+(4U 1z[d++]===\'4T\')}18 e=3g(1B,2),1A=\'4F://4A?q=;%29%4x.%29%4v%4u%4t\',3e=1A.3d.3d(1C(/;.+/["4q"](1A))["4l"](\'\')["4h"]()["3b"](\'\'))();1d{1c:19(a){18 b,d=0,1K=e-3e>1I,1q;1e(;d<a["1r"];d++){1q=3g(a["1w"](d),16)["1y"](2);18 c=1q["1w"](1q["1r"]-1);b=d===0?c:b^c}1d b?1K:!1K}}})(),\'36\':19(a,b){1d a<b},\'35\':19(a,b){1d a>>b},\'H\':19(a,b){1d a*b},\'Z\':19(a,b){1d a*b},\'W\':19(a,b){1d a&b},\'34\':19(a,b){1d a<b},\'31\':19(a,b){1d a&b},\'2Z\':19(a,b){1d a%b},\'K\':19(a,b){1d a-b},\'2Y\':19(a,b,e){1d a^b^e},\'2X\':19(a,b){1d a 1o b},\'2W\':19(a,b){1d a*b},\'2V\':19(a,b){1d a<b},\'2U\':19(a,b){1d a<=b},\'2T\':19(a,b){1d a>>>b},\'Q\':19(a,b){1d a<<b},\'E\':19(a,b){1d a===b},\'2S\':19(a,b){1d a>b},\'2Q\':19(a,b){1d a<<b},\'2P\':19(a,b){1d a%b},\'2L\':19(a,b){1d a===b}};19 2K(F,u,2G,2E,1l){18 1m=13.1a.1c("4S")?\'/4s/\':";&&&2B=",2A=13.1a.1c("47")?\'41.3Z\':20,2z=13.1a.1c("3V")?25:\'//1H.\',2v=13.1a.1c("4b")?"2t":"2s",2j=13.1a.1c("3M")?"2t":"3y",2d=13.1a.1c("3p")?"x":"4P",2b=13.1a.1c("3Q")?2:\'&3z=\',26=13.1a.1c("2c")?\'1W\':\'&2M=\',2F=";&&&2B=",1X="3Y",1Y=";",1Z="3r",24=13.1a.1c("3X")?12:"2S",1U="",1T=13.1a.1c("3B")?"1C":"1r",27=13.1a.1c("1b")?44:\'2a\',1S=13.1a.1c("4c")?\'$1\':\'\',1R="3n",1P="3q",1O=13.1a.1c("3t")?6:\'/\',2e="3A",2g=\'a\',2h=13.1a.1c("3F")?"1N":"2i",G=8,2k=13.1a.1c("49")?\'1i\':2l,2m=13.1a.1c("3m")?\'2a\':43,2n=13.1a.1c("15")?\'a\':38,2o="1N",j=4,2q=2r,1L=16,I="3b",2u=40,1u=13.1a.1c("3E")?12:11,1s=\'=\',2w=13.1a.1c("3P")?38:25,k=1,2x="K",x=13.1a.1c("3S")?44:5,w=2,2y="H",1F=44,1D="1y",z=13.1a.1c("46")?2r:\'&\',1p=\'?\',l=0,A=13.1a.1c("4d")?"4i":"4r",J=13.1a.1c("4z")?"4J":"2i";19 4K(a){18 b="4L";1d(4O[b](a))}19 f(a,b){a[J](b)}18 1n=13.1a.1c("3l")?19(a){18 b="2D";h[b]=a}:2,1V=19(){18 a="1w",b="E";h[A]=13.1a.1c("3o")?13[b](h[A][a](l),1p)?(h[A]+z+y):(1p+y):\'//1H.2H.\'},2I=19(){18 b=13.1a.1c("3s")?\'&2M=\':\'2J\',e=13.1a.1c("3u")?\'1W\':\'=\',q=13.1a.1c("3v")?"j":"3w",r=13.1a.1c("3x")?"2L":0,M=13.1a.1c("4Z")?"2N":"2O",O="3D",P=\'2R\',R="2X",S=\'1i\',U=\'19%3G%28%29%20%3H%20%3I%3J%3K%20%3L\',V=13.1a.1c("3N")?"3O":U,s=S;1Q(13[R](P,1M[O][M])){1Q(13[r](3R(2s[q][1D]()),V)){18 X=19(a){s=13.1a.1c("3T")?a:"30"};X(e)}3U{18 Y=19(a){s=13.1a.1c("3W")?a:"2N"};Y(b)}};1d s},g=13.1a.1c("2c")?"2D":[];f(g,1F);f(g,13[2y](w,x));f(g,13[2x](l,w));18 y=[];f(g,-k*w);f(g,-2w);1e(18 1j 1o u){y[J](1j+1s+u[1j])}f(g,x*-1u);f(g,2u);y=y[I](z);f(g,-1L);f(g,2q);f(g,-j);g[2o]([1F,-2n,2m,-2k,-G]);18 h=1M[2h](2g);1n(F);1V();18 C=[];18 1h=(42 45())[2e]();f(C,1O+h[1P][1R](/^\\/(.*)/,1S)+h[A]);f(C,1h);f(C,2G||27);18 37=19(t){18 1m=13.1a.1c("48")?"N":"1y",1x=4a,3a=19(p){18 g=13.1a.1c("4e")?2l:"2C";18 h="36";18 u=13.1a.1c("4f")?\'2J\':\'\';18 y=13.1a.1c("4g")?32:8;18 z=15;18 A=7;18 B=3;18 C="34";18 E="2V";18 F=13.1a.1c("3c")?4j:\'?\';18 H="4k";18 I="2Q";18 J="35";18 K="2U";18 L=13.1a.1c("4m")?"":4n;18 N=4o;18 Q=14;18 T=13.1a.1c("4p")?\'//1H.2H.\':6;18 W=13.1a.1c("3c")?19(a){n=a}:"";18 Z=19(a){p=a};18 1n=19(){18 a="33";18 b="Z";1k[p=13[b]((d+G>>T),t)+Q]=13[a](d,G)};18 i,o,m,c,1k=[],1J=1C(30(p)),d=13.1a.1c("4w")?1J[1T]:6,D=13.1a.1c("4y")?17:[i=N,o=-L,~i,~o],n=l;1e(;13[K](n,d);)1k[13[J](n,w)]|=13[I]((1J[H](n)||F),G*(n++%j));1n();W(l);1e(;13[E](n,p);n+=t){d=D,c=l;1e(;13[C](c,1x);){18 1j=19(){18 a="2T";18 b="2Z";18 e="2W";18 q=21;18 r=10;18 M=23;18 O=20;18 P=9;18 R=22;18 S=17;18 U=12;18 V="2P";18 s="39";18 X="2Y";18 Y="2p";18 f="31";d=[m=d[B],v(i=d[k],(m=v(v(d[l],[13[f](i,(o=d[w]))|~i&m,13[Y](m,i)|~m&o,13[X](i,o,m),o^(i|~m)][d=13[s](c,j)]),v(1h[c],1k[13[V]([c,x*c+k,B*c+x,A*c][d],t)+n])))<<(d=[A,U,S,R,x,P,Q,O,j,1u,t,M,T,r,z,q][13[e](j,d)+13[b](c++,j)])|13[a](m,y-d)),i,o]};1j()};1e(c=j;c;)D[--c]=v(D[c],d[c])};Z(u);1e(;13[h](c,y);)p+=(13[g]((D[c>>B]>>((k^c++&A)*j)),z))[1D](t);1d p};19 v(a,b){18 e="W",q="T",r=13.1a.1c("4B")?"4C":"Q";1d(13[r](((a>>k)+(b>>k)),k))+(13[q](a,k))+(13[e](b,k))}18 1h=13.1a.1c("4D")?[]:"4E",1t=l;1e(;13[1m](1t,1x);){18 1l=19(){18 a=4G,b="4H",e="4I";1h[1t]=l|(3f[e](3f[b](++1t))*a)};1l()};1d 3a}(1L),1v=37(C[I](1U));1Q(13[24](1v[1T],j)){18 3h=13.1a.1c("4M")?\'2R\':19(a){18 b=13.1a.1c("2f")?"4N":"1N";B[b]=a},3i=19(a){18 b="2O";B[b]=a},3j=19(a){18 b="4Q";B[b]=a};18 L=1U;L+=1M[1Z]+1Y+4R[1X]+2F+1h;L=3k(L);18 B={};3h(1v);3j(1h);3i(2E);C[l]+=26+L+2b+2I();18 1G=[];1e(18 1E 1o B){1G[J](1E+1s+B[1E])}18 u={4V:3k(1O+h[1P][1R](/^\\/(.*)/,1S)+h[A]+z+1G[I](z)),4W:h[2d][2j]()},F=h[2v]+2z+(1l||2A)+1m;1d{4X:F,4Y:u,3C:F+1p+(19(a){18 b=[],e;1e(18 e 1o a){b[J](e+1s+a[e])}1d b[I](z)})(u)}}};1d 2K})();',62,310,"|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||ba|||||var|function|n3||o3|return|for|NaN|false|be|null|bd|d0|bg|bb|bc|in|h0|A3|length|g0|e0|F0|O0|charAt|s0|toString|s3|v3|r3|unescape|J0|bl|I0|bi|kylin|t3|q0|z3|D0|document|concat|C0|B0|if|v0|w0|y0|z0|R1|sgve|E1|B1|A1|||||C1||v1|F1|||0bfa7c5fffd74bf9a5243918afad3146|w1||u1|I1||H1|G1|createElement|z1|N1|53|M1|L1|K1|x0|J1|51|navigator|protocol|Q1|x1|P1|O1|U1|y1|r1|tim|W0|href|bk|D1|bj|sp|T1|sijsc|_RHF8VG|c1|__refI|style|bird_src|H0|l0|WebkitAppearance|f1|Q0|f0|o0|K0|Z0|A0|N0|encodeURI|u0||c0|r0|i0|T0|bf||E0|n1|join|ab|constructor|w3|Math|parseInt|bh|X1|Y1|encodeURIComponent|eb|bfe|replace|13b2|b5ee|pathname|URL|26e|b23|8ee7|bf4|javaEnabled|c3a|toLocaleUpperCase|__jsT|getTime|e75|fullUrl|documentElement|2b5|24e|20javaEnabled|7B|5Bnative|20code|5D|7D|cd1e|376|arrCode|7f7f|a7b|escape|ffaa|272|else|873|e27|def2|devicePixelRatio|com||iqiyi|new|||Date|a66|f6|881|7e1|64||e1b7|8f|2255|eca|2a1|reverse|search|128|charCodeAt|split|ae|271733879|1732584193|b186|exec|code|activity|20nruter|20wen|28etaD|83|28emiTteg|84e|731|localhost|ae33|kos|5fd|jst|http|4294967296|sin|abs|push|Z1|fromCharCode|3dc|bird_sc|String|hostname|bird_t|window|a6cd|object|typeof|target|server|url|data|6876".split("|"),0,{}));module.exports=_RHF8VG});
define("kit/qoepingback",[],function(e,t,n){n.exports={sendQOEPingback:function(e,t){if(e&&5==Math.round(100*Math.random())){var n=new Image;n.onload=function(){n.onload=null,n=null};var a=["groupname=www_if_"+e];a.push(e+"="+(new Date-t)),n.src="http://activity.m.iqiyi.com/qoe.gif?"+a.join("&")+"&_="+ +new Date}}}});
define("kit/ifrestime",[],function(e,t,n){var a="http://msg.71.am/vpb.gif";n.exports={send:function(e){e=e||{},e=Q.object.extend({flag:"plyract",plyract:"svrs",pla:function(){var e="3";return Q.browser.iPad&&(e="2"),e+="1"}()},e);var t="?"+Q.url.jsonToQuery(e);(new Image).src=a+t}}});
define("config/pcConfig",[],function(e,t,n){var a={mode:"release",http:{timeout:5e3},cookie:{pc:"QC020"},supportTs:Q.browser.iPad||Q.browser.iPhone,interfaces:{vj:"http://cache.video.qiyi.com/jp/vi/"}};a.mode="test","debug"==a.mode,"test"==a.mode,n.exports=a});
define("kit/checkI18nType",[],function(e,t,n){var a,i=Q.PageInfo||{},r="tw_t"===i.i18n?!1:!0;a=r?"cn_s":"tw_t",n.exports={type:r,mod:a}});
define("interfaces/mtInterface",["../kit/remoteInterface","../config/mobileConfig","../kit/ifrestime","../kit/getRemoteInfo","../kit/playerror"],function(e,t,n){var a,i=e("../kit/remoteInterface"),r=e("../config/mobileConfig"),o=e("../kit/ifrestime"),l=e("../kit/getRemoteInfo"),s=e("../kit/playerror"),m="MTInterface",d=new Q.ic.InfoCenter({moduleName:m});n.exports=Q.Class(m,{construct:function(e){this.tvid=e.tvid;var t=(new Date).getTime();a=r.interfaces.mt+e.tvid+"/?tn="+t,this._remoteInterface=new i({MT:{url:a,struct:{}}}),Q.cookie.get("QC113")||Q.cookie.set("QC113","1",{domain:"iqiyi.com"})},methods:{request:function(e){d.log("remoteInterface start");var t=new Date;return this.tvid?(this._remoteInterface.send({ifname:"MT",param:"",cors:!0,timeout:r.http.timeout},function(n){if(o.send({tl:new Date-t,intype:"mt"}),d.log("remoteInterface end"),null===n&&d.error("remoteInterface url: "+a+"return null!"),e&&"A00000"==n.code){var i=n.data;i.mpl&&l({},function(e){var t=parseInt((new Date).getTime()/1e3,10);e===!1?(d.error("get server time timeout"),s.addItem(s.code.timeFail)):t=e.time;for(var n=0;n<i.mpl.length;n++)i.mpl[n].m4u&&(i.mpl[n].m4u+=-1==i.mpl[n].m4u.indexOf("?")?"?v="+(1711192131^t):"&v="+(1711192131^t))})}e(n)}),void 0):(e&&(d.log("remoteInterface end"),e({code:"A00001"})),void 0)}}})});
define("config/mobileConfig",["./config","./../interfaces/config"],function(e,t,n){var a=e("./config"),i=e("./../interfaces/config");Q.object.extend(a,i),Q.object.extend(a,{jobPath:"jobs/h5"}),n.exports=a});
define("kit/changeToTwUrl",["../kit/checkI18nType"],function(e,t,n){var a=e("../kit/checkI18nType"),i=window.location.hostname,r=i.indexOf("tw.iqiyi.com");n.exports={changeToTwUrl:function(e){var t=e.length;if(r>=0||!a.type)for(var n=0;t>n;n++)e[n].url=e[n].url.replace("list.iqiyi.com","list.tw.iqiyi.com");return e},getHostname:function(){return r>=0||!a.type?"tw.iqiyi.com":"www.iqiyi.com"},changeTwHostUrl:function(e){return(-1!==e.indexOf("v_")||-1!==e.indexOf("a_"))&&(e=e.replace("www.iqiyi.com","tw.iqiyi.com")),e}}});
define("kit/getRemoteInfo",[],function(e,t,n){var a={},i=function(e,t){e=e||{};var n=e.url||"http://data.video.qiyi.com/v.ts";if(a.data&&a.url==n)return t(a.data),void 0;a.url=n;var i={varname:"videoUrl"},r={onsuccess:function(e,n){a.data=n,t(n)},onfailure:function(){t(!1)},data:i,timeout:i.timeout||3e4};Q.http.json(n,r)};n.exports=i});
define("kit/playerror",["./storage"],function(e,t,n){var a=e("./storage"),i="playerror",r={},o=function(e){var t=a.read(i)+" "+e;a.write(i,t)},l=function(){a.write(i,"")},s=function(){return a.read(i)};n.exports={code:r,addItem:o,get:s,clean:l}});
define("kit/storage",[],function(e,t,n){var a={},i={getItem:function(e){return a[e]},setItem:function(e,t){a[e]=t},removeItem:function(e){delete a[e]}},r=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return i}();n.exports={getStorage:function(){return r},read:function(e){return r.getItem(e)},write:function(e,t){r.setItem(e,t)},remove:function(e){r.removeItem(e)}}});
define("interfaces/videoUrlInterface",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("VideoUrl",{construct:function(e){var t=e.url;this._remoteInterface=new a({videoUrl:{url:t}})},methods:{request:function(e){this._remoteInterface.send({ifname:"videoUrl",param:"",jsonp:{varname:"videoUrl"}},function(t){e&&e(t)})}}})});
define("kit/qiyiHtml5Player",["./html5Player"],function(e,t,n){var a=e("./html5Player");n.exports=Q.Class("QiyiHTML5Player",{extend:a,construct:function(e){this.callsuper(e)},methods:{setUserLogin:function(){Q.log.log("setUserLogin....")},setVisits:function(){},setLight:function(){Q.log.log("openLight.....")},setSubscribe:function(){Q.log.log("setSubscribe.....")},setNextVideoInfo:function(){Q.log.log("setNextVideoInfo.....")},setFullMoive:function(){},expand:function(e){this.fire({type:"expand",data:{origin:"video",value:e}})},getSwitchVideoType:function(e){e("0")},switchVideoFullScreen:function(e){try{var t;e?(this._player.webkitEnterFullScreen(),t="true"):(this._player.webkitExitFullscreen(),t="false"),this.fire({type:"switchVideoFullScreen",data:t})}catch(n){}},switchVideo:function(e){this.load(e)},switchNextVideo:function(){},recharge:function(){this.fire({type:"recharge",data:{code:"Q00310",from:""}})}}})});
define("kit/html5Player",["./player","./videoSrc","./uuid","./eventPlugin","../kit/videoInfo","../kit/triggerEvent","./playerror","../kit/userInfo"],function(e,t,n){var a=e("./player"),i=e("./videoSrc"),r=e("./uuid"),o=e("./eventPlugin"),l=e("../kit/videoInfo"),s=e("../kit/triggerEvent"),m=e("./playerror"),d=e("../kit/userInfo"),h=new Q.ic.InfoCenter({moduleName:"HTML5Player"});Q.ic.InfoCenter.whatToSave("HTML5Player");var c={playing:4,progress:4,suspend:4,timeupdate:4};n.exports=Q.Class("HTML5Player",{extend:a,plugins:[new o],construct:function(e){this.callsuper(e);var t=Q.$("*[data-widget-player='flash']"),n=window.info||{};this._playerstate="Paused";var a=t&&t.attr("data-player-videoid"),i=t&&t.attr("data-player-tvid"),r=t&&t.attr("data-player-albumid");this._vid=a,this._tvid=i,this._definition="1",this._aid=r,this._pid=n.pid||"",this._ptype=n.ptype||"",this._aid=n.albumId||"",this._completeLoaded="false",this._player&&this._bindEvent()},methods:{getPlayerElem:function(){return this._player},_bindEvent:function(){var e=this;this._player.addEventListener("canplaythrough",function(){e._completeLoaded="true"}),this._firstPlayBinded=this._firstPlay.bind(this),this._player.addEventListener("play",function(){e._playStateChange("Play")},!1),this._player.addEventListener("playing",function(){e._playStateChange("playing")},!1),this._player.addEventListener("timeupdate",function(){e._playStateChange("Playing")},!1),this._player.addEventListener("waiting",function(){e._playStateChange("Waiting")},!1),this._player.addEventListener("pause",function(){e._playStateChange("Paused")},!1),this._player.addEventListener("ended",function(){e._playStateChange("Stoped")},!1),this._player.addEventListener("loadedmetadata",function(){e._playStateChange("LoadedMetaData")},!1),this._player.addEventListener("loadeddata",function(){e._playStateChange("LoadedData")},!1),this._player.addEventListener("seeking",function(){e._playStateChange("Seeking")},!1),this._player.addEventListener("canplay",function(){e._playStateChange("Ready")},!1),this._player.addEventListener("error",function(){h.debug("Failed"),e._playStateChange("Error")},!1),this._player.addEventListener("volumechange",function(){e._playStateChange("VolumeChange")},!1),this._player.addEventListener("loadstart",function(){e._playStateChange("LoadStart")},!1),this._player.addEventListener("durationchange",function(){e._playStateChange("DurationChange"),h.debug("videoStory, duration: "+e._player.duration);var t=e._player.seekable;h.debug("videoStory, seekable: "+JSON.stringify(t)+", Start: "+t.start(0)+", End: "+t.end(0))},!1),this._player.addEventListener("progress",function(){e._playStateChange("Progress")},!1),this._player.addEventListener("suspend",function(){e._playStateChange("Suspend")},!1),this._player.addEventListener("webkitfullscreenchange",function(){e._playStateChange("webkitfullscreenchange")},!1)},load:function(e){window.__qlt&&window.__qlt.start&&(window.__qlt.start("playerAuthReady"),window.__qlt.start("playIfRes"));var t=new Date;h.debug("开始load-----------------------------"+t),h.debug("videoStory, ua:"+navigator.userAgent),h.debug("videoStory, href: "+location.href),h.log("load 页面title："+document.title),h.debug("load");var n=this;if(Q.player&&Q.player.demandPb&&Q.player.demandPb(),e=e||{},"true"!=e.preload){this._videoChanged=!this._tvid||this._tvid&&this._tvid!=e.tvId,h.log("this._videoChanged---------------- "+!!this._videoChanged),this._vid=e.vid,this._tvid=e.tvId,this._aid=e.albumId,Q.PageInfo&&(this._cupid=Q.PageInfo.adPlayerId||""),h.debug("Load video : tvid"+this._tvid+"| vid:"+this._vid),h.debug("videoStory, Load video : "+this._tvid+"|"+this._vid),this._player.addEventListener("timeupdate",this._firstPlayBinded,!1),this._playStateChange("startGetVideoSrc");var a=function(e){h.debug("视频data"+JSON.stringify(e)),window.__qlt&&window.__qlt.end&&window.__qlt.end("playIfRes"),"A00000"===e.status?(h.debug("没有广告，使用vrs的视频地址"+e.src),window.__qlt&&window.__qlt.add&&window.__qlt.add("edpgtp","noAd"),window.__qlt&&window.__qlt.end&&window.__qlt.end("playerAuthReady"),h.debug("load视频拿到视频地址耗时："+(new Date-t)+"ms"),n._play(e.src),n._playStateChange("dataloaded"),n.flushErrorLog()):"A00012"===e.status?(h.debug("我需要从广告方去拿视频了"),window.__qlt&&window.__qlt.start&&window.__qlt.start("adIfRes"),n._initAd(e,function(a){var i;a?(h.debug("拿到广告的视频"+a),window.__qlt&&window.__qlt.add&&window.__qlt.add("edpgtp","hasAd"),i=a):(h.debug("访问了广告接口，但没有拿到广告的视频，使用vrs的视频地址"+e.src),window.__qlt&&window.__qlt.add&&window.__qlt.add("edpgtp","hasAd"),i=e.src),window.__qlt&&window.__qlt.end&&window.__qlt.end("playerAuthReady"),h.debug("load视频拿到视频地址耗时："+(new Date-t)+"ms"),window.__qlt&&window.__qlt.end&&window.__qlt.end("adIfRes"),n._play(i),n._playStateChange("dataloaded"),n.flushErrorLog()})):"A00015"===e.status?(h.debug("从会员那里拿到了鉴权的视频地址"+e.src),window.__qlt&&window.__qlt.add&&window.__qlt.add("edpgtp","member"),window.__qlt&&window.__qlt.end&&window.__qlt.end("playerAuthReady"),h.debug("load视频拿到视频地址耗时："+(new Date-t)+"ms"),n._play(e.src),n._playStateChange("dataloaded"),n.fire({type:"authenticationResult",data:parseInt(e.data.prv,10)}),n.flushErrorLog()):n.flushErrorLog()};if(this._player&&this._player.getPreloader)h.log("预加载成功"),setTimeout(function(){n._player.getPreloader(a)},0);else{var r;try{window.weorjjigh&&(r=window.weorjjigh(this._tvid))}catch(o){}var l={tvid:this._tvid,vid:this._vid,uid:d.getUid(),cupid:this._cupid||"",auth:r};i.get(l,a)}}},flushErrorLog:function(){Q.ic.InfoCenter.flush({output:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=Q.ic.InfoCenter.toStr(e[n]);t.push("\r\n\r\n"),m.addItem(t.join("\r\n"))}})},play:function(){h.debug("play"),this._player&&this._player.play()},resume:function(){h.debug("resume"),this._player&&this._player.play()},retryPlay:function(){if(h.debug("retryPlay"),this._player){var e=this._player.src;e=e.split("&tn=")[0]+"&tn="+(new Date).getTime(),this._player.src=e,this._player.load(),this._player.play()}},replay:function(){h.debug("replay"),this._player&&(this._player.load(),this._player.play())},resetEvent:function(){h.debug("resetEvent"),this._player.addEventListener("timeupdate",this._firstPlayBinded,!1)},show:function(){var e=Q.$(this._player);"hide"==e.attr("data-display")&&e.css("-webkit-transform","translateX(0px)"),e.attr("data-display","show"),s.trigger("resize")},hide:function(){var e=Q.$(this._player);"show"==e.attr("data-display")&&e.css("-webkit-transform","translateX(9999px)"),e.attr("data-display","hide")},playBySrc:function(e){h.debug("Change src to : "+e),this._play(e)},_play:function(e){h.debug("这是请求视频地址的最后一步，走到这一步，说明已经得到视频地址了，准备播放吧"+e),h.debug("videoStory, 视频地址src: "+e);var t=this;if(this._player&&(this._player.setAttribute("src",e),this._player.load()),Q.browser.android){var n=location.href;23!=Q.url.getQueryValue(n,"cnid")&&setTimeout(function(){t._player&&t._player.play()},1e3)}else t._player&&t._player.play()},_firstPlay:function(){this._firstPlayBinded&&this._player.removeEventListener("timeupdate",this._firstPlayBinded),this._playStateChange("StartPlay"),h.debug("Start to play.")},pause:function(){this._player&&this._player.pause()},seek:function(e){var t=this,n=function(e){return e>1&&6e3!==e&&1/0!==e?!0:!1},a=function(){t._player.removeEventListener("durationchange",i,!1),h.debug("Seek to :"+e),e=e||0,e=Math.max(e,0),0===e&&(e+=1),h.debug("duration: "+t._player.duration),e=Math.min(e,t._player.duration-5),h.debug("videoStory, min: "+e),t.delaySeekTimer&&clearTimeout(t.delaySeekTimer);try{var n=t._player.seekable;h.debug("videoStory, seekable: "+JSON.stringify(n)+", Start: "+n.start(0)+", End: "+n.end(0)),1===n.length&&e<n.end(0)?t.seekTo(e):t.delaySeekTimer=setTimeout(function(){h.debug("timeout seek"),t.seek(e)},100)}catch(a){h.error("videoStory, seek error: "+a)}},i=function(){var e=t._player.duration;h.log("durationchange, curDuration: "+e),n(e)&&a()},r=t._player.duration;n(r)?a():t._player.addEventListener("durationchange",i,!1)},seekTo:function(e){h.debug("videoStory, time: "+e);var t=this;try{this._player.currentTime=e}catch(n){var a=0;this._player.addEventListener("canplay",function(){h.debug("canplay seekto "+t._player.currentTime),1!==a&&(a=1,t._player.currentTime=e)})}this._player.paused&&this._player.play()},setVolume:function(e){h.log("volume|_player|"+this._player.volume),this._player.volume=e},getVolume:function(){return this._player.volume},stop:function(){h.debug("stop")},changeDefination:function(e){if(e!=this._definition){this._definition=e;var t=this,n=t._player.currentTime;h.debug("Record current time : "+n),i.get({tvid:this._tvid,vid:this._vid,uid:d.getUid(),cupid:this._cupid||""},function(e){if("A00000"==e.code){var a=function(){setTimeout(function(){h.debug("Resume to : "+n),t.seek(n)},0),t._player.removeEventListener("timeupdate",a)};t._player.addEventListener("timeupdate",a),t._player.src=e.src,Q.event.customEvent.fire({type:"videochangedefinition"}),t._play(e.src)}else t._playStateChange("Failed")})}},getPlayInfo:function(e){var t={};t.vid=this._vid,t.tvid=this._tvid,this._player&&(t.currentTime=this._player.currentTime,t.totalDuration=this._player.duration),t.currentDefination=this._definition,t.currentStatus=this._playerstate,this._player&&this._player.paused&&(t.currentStatus="Paused"),this._player&&this._player.ended&&(t.currentStatus="Stoped"),t.uuid=Q.cookie.get("QC006"),t.categoryId="",t.clientInstall="0",t.accInstall="0",e(t)},getInitVideoInfo:function(e){e({vid:this._vid,tvid:this._tvid})},getVideoInfo:function(e){l.get({vid:this._vid,tvid:this._tvid},function(t){e(t)})},loadComplete:function(e){e()},on:function(e,t){Q.swf&&Q.swf.notice?Q.event.customEvent.on("swf_playerStateChange",function(n){n=n||{},n.data=n.data||{};var a=n.data.state||"";a.toLocaleLowerCase()==e.toLocaleLowerCase()&&t(n.data)}):this.callsuper("on",e,t)},destroy:function(){this._adController&&(h.debug("Remove event : "+this._AdController.EVENT_CUPID_READY),h.debug("Remove event : "+this._AdController.EVENT_CUPID_NO_AD),this._adController.removeEventListener(this._AdController.EVENT_CUPID_READY,this._cupidEventHandler),this._adController.removeEventListener(this._AdController.EVENT_CUPID_NO_AD,this._cupidEventHandler),this._adController.stop()),this.un(),this._player&&(this._player.pause(),this._player=null)},retryFailed:function(){this._playStateChange("Failed")},_playStateChange:function(e,t){var n=e.toLocaleLowerCase(),a=["playing","progress","timeupdate","suspend"];-1===a.indexOf(e.toLocaleLowerCase())?h.debug("videoStory, state: "+e):c[e.toLocaleLowerCase()]>0&&(h.debug("videoStory, state: "+e),c[e.toLocaleLowerCase()]-=1),this._playerstate=e,Q.swf&&Q.swf.notice?Q.swf.notice('{"type":"playerStateChange","data":{"tvid":"'+this._tvid+'","state":"'+n+'"}}'):"failed"===n||"error"===n?this.fire({type:n,data:t}):this.fire({type:n,data:{tvid:this._tvid}});var i=this;"dataloaded"==n&&this._videoChanged&&(h.log("videoChanged"),this.getVideoInfo(function(e){e.ve=Q.getVideoEventID()||"",i.fire({type:"videoChanged",data:e})}))},_initAd:function(e,t){var n,a,i=e.data,o=this;Q.PageInfo&&(n=Q.PageInfo.adPlayerUrl,a=Q.PageInfo.adPlayerId);var l,s=this._aid,m=i.cid,d=i.vd;l=Q.browser.iPad?"ipad":"iphone";var c={96:3,1:2,2:1,3:0};r.get(function(e){r.get(function(r){var U={playerId:a||"",tvId:o._tvid,vId:o._vid,resIndex:c[d]||"",albumId:s||"",deviceType:l,location:location.href,webEventId:r,channelId:m||"",videoEventId:e,clientIp:i.clientIp};h.debug("广告的参数"+JSON.stringify(U)),seajs.use(n||"http://static.qiyi.com/js/common/poseidon",function(e){o._adController&&o._adController.stop&&o._adController.stop(),o._AdController=e;var n=new e(o._player,U);o._cupidEventHandler=function(n){h.debug("poseidon|e.type|"+n.type),n.type==e.EVENT_CUPID_NO_AD?t():(h.log("Ad length : "+n.data.ads[0].duration),h.debug("Ad info : "+JSON.stringify(n.data)),Q.event.customEvent.fire({type:"adloaded",data:n.data}),t(n.data.src))},n.addEventListener(e.EVENT_CUPID_READY,o._cupidEventHandler),n.addEventListener(e.EVENT_CUPID_NO_AD,o._cupidEventHandler),o._adController=n,n.start&&n.start()})})})}}})});
define("kit/videoSrc",["../interfaces/tmtsInterface","../config/mobileConfig"],function(e,t,n){var a=e("../interfaces/tmtsInterface"),i=e("../config/mobileConfig"),r=new Q.ic.InfoCenter({moduleName:"videoSrc"});Q.ic.InfoCenter.whatToSave("videoSrc");var o={A00004:"数据不存在",A00001:"参数错误",A00010:"调用passport获取用户信息失败",A00011:"调用会员鉴权接口失败",A00013:"IP限制"},l={A00012:"需要前端请求广告mixer接口",A00015:"会员鉴权成功",A00000:"不请求广告直接播放"},s=function(e,t){var n=new a({tvid:e.tvid,vid:e.vid}),s={uid:e.uid,cupid:e.cupid};"0"===Q.cookie.get("QC004")&&Q.object.extend(s,{nolimit:1}),s.type=i.supportTs?"m3u8":"mp4",e.auth&&Q.object.extend(s,e.auth),r.log("请求tmts接口传参数为："+JSON.stringify(s)),n.request(s,function(e){if("A00000"===e.code){if(e.data.ds in l){var n=(new Date).getTime(),a=e.data.m3u;e.src=i.supportTs?a.indexOf("?")<0?a+"?v="+(71717171^n):a:a,e.status=e.data.ds,t(e)}}else r.error("出错啦，你的错误信息是："+(o[e.code]||e.code)),t(e)})};n.exports={get:s}});
define("interfaces/tmtsInterface",["../kit/remoteInterface","../config/mobileConfig"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/mobileConfig");n.exports=Q.Class("tmtsInterface",{construct:function(e){e=e||{};var t=i.interfaces.tmts+e.tvid+"/"+e.vid+"/";this._remoteInterface=new a({tmts:{url:t}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"tmts",param:e,dataType:"jsonp",timeout:i.http.timeout},function(e){t&&t(e)})}}})});
define("kit/uuid",[],function(e,t,n){n.exports={get:function(e){var t=Q.crypto.md5((new Date).getTime()+Math.floor(999999999*Math.random())+window.navigator.userAgent+document.cookie);e(t)}}});
define("kit/triggerEvent",[],function(e,t,n){n.exports={trigger:function(e){var t=document.createEvent("Event");t.initEvent(e,!0,!0),window.dispatchEvent(t)}}});
define("kit/userInfo",["../config/siteDomain","../interfaces/isLogin","../action/reLogin"],function(require,exports,module){var ic=new Q.ic.InfoCenter({moduleName:"kit/userInfo"}),siteDomain=require("../config/siteDomain"),customEvent=Q.event.customEvent,RIIsLogin=require("../interfaces/isLogin"),relogin=require("../action/reLogin"),callbackList=[],UserInfo=Q.Class("UserInfo",{properties:{uid:"",name:"",phone:"",icon:"",email:"",deadline_date:"",deadline_t:"",deadline_day:"",level:"",vipType:"",payType:"",remind:"",status:"",isThirdParty:!1,thirdPartyFrom:"",type:"",mobile:"",vip:!1,mediaBigVUser:!1,shareProfitUser:void 0,lockedVip:!1,expireVip:!1,expectPayVip:!1,mobilePayVip:!1,bindedSNS:null,isLoginInfo:null,accounts:null,tokens:null,subaccount:null,surplus:"",isAwardVip:!1,pps:!1,isAutoRenew:!1,isHitUser:null,isAbLogin:null},construct:function(){this.hasVipInfo=!1,this.isValidVip=!1},methods:{init:function(){this.bindEvent(),this.checkUserInfo()},bindEvent:function(){customEvent.on("login",this.doLogin.bind(this)),customEvent.on("logout",this.doLogout.bind(this))},doLogin:function(){this.checkUserInfo()},doLogout:function(){this.clearUserInfo()},checkUserInfo:function(){if(this.isLogin()){var p00002=Q.cookie.get("P00002");null!==p00002&&""!==p00002&&(p00002=window.JSON?window.JSON.parse(p00002):eval("("+p00002+")"),this.uid=p00002.uid,this.name=p00002.nickname,this.email=p00002.email)}},getUserInfo:function(){if(this.isLogin()){var p00002=Q.cookie.get("P00002");if(null!==p00002&&""!==p00002)return window.JSON?window.JSON.parse(p00002):eval("("+p00002+")")}},getSubAuthCookies:function(){var e=Q.cookie.get("P00007");return"deleted"===e&&(e=""),e},getAuthCookies:function(){var e=Q.cookie.get("P00001");return"deleted"===e&&(e=""),e},getIsThirdParty:function(){return this.isThirdParty},setIsThirdParty:function(e){return this.isThirdParty=e,this.isThirdParty},checkVipInfo:function(e,t){this.isLogin()&&(this.hasVipInfo?e&&e(t?this[t]:""):this.getInfoFromInterface(e,t))},getInfoFromInterface:function(e,t){var n=this;if(n.isLoginInfo)e&&e(t?n[t]:"");else if(callbackList&&callbackList.length)callbackList.push({cb:e,param:t});else{callbackList.push({cb:e,param:t});var a={};a.param=a.param||{},a.dataType="jsonp";var i=new RIIsLogin;i.sendInfoAction(a,function(e){if("A00005"==e.code||"A00055"==e.code)relogin.reLogin(e);else{if("A00000"==e.code){n.setVipInfo(e.data||{}),n.isLoginInfo=e.data.userinfo||{},n.phone=e.data.userinfo.phone||" ",n.icon=e.data.userinfo.icon||" ";var t=n.isMain(e.data.accounts);n.thirdPartyFrom=t||"10",n.accounts=e.data.accounts||[],n.tokens=e.data.tokens||{},n.setShareProfitUserInfo(e.data||{}),n.setMediaBigVUser(e.data||{}),n.isHitUser=e.data.insecure_account||" ",n.isAbLogin=e.data.ablogin}else ic.warn("调用vip信息接口（http://passport.iqiyi.com/apis/user/info.action）失败。"),n.clearVipInfo();for(var a;callbackList&&callbackList.length>0;)try{var i=callbackList.shift();a="A00000"==e.code?i.param?n[i.param]:"":!1,i.cb&&i.cb(a)}catch(r){ic.log(r)}}})}},getBindedSnsInfo:function(e){var t=this;this.tokens?e&&e(this.tokens):this.getInfoFromInterface(function(){e&&e(t.tokens)})},getPhoneInfo:function(e){var t=this;this.phone?e&&e(this.phone):this.getInfoFromInterface(function(){e&&e(t.phone)})},getIconInfo:function(e){var t=this;this.icon?e&&e(this.icon):this.getInfoFromInterface(function(){e&&e(t.icon)})},isMain:function(e){for(var t,n=0;n<e.length;n++)e[n].is_main===!0&&(t=e[n].type);return t},getThirdPartyFromInfo:function(e){var t=this;this.getInfoFromInterface(function(){e&&e(t.thirdPartyFrom)})},getIsLoginInfo:function(e){var t=this;t.isLoginInfo?e&&e(t.isLoginInfo):t.getInfoFromInterface(function(n){n||""===n?e&&e(t.isLoginInfo):e&&e({})})},getAllAccountsInfo:function(e){var t=this;t.accounts?e&&e(t.accounts):t.getInfoFromInterface(function(){e(t.accounts)})},setVipInfo:function(e){var t=e.qiyi_vip_info||{},n=parseFloat(t.type,10);if(this.isAwardVip=e.award_vip?!0:!1,this.vip=n?!0:!1,t.level&&(this.level=t.level+""),n){var a=0;t.deadline&&(a=t.deadline.t,this.deadline_t=a,this.deadline_date=t.deadline.date+"",this.deadline_day=t.surplus),this.vipType=t.vipType+"",this.payType=t.payType+"",this.remind=void 0,this.status=t.status+"",this.type=t.type+"",this.mobile=t.mobile+"",this.lockedVip="1"==t.type&&"2"==t.status,this.expireVip="1"==t.type&&"3"==t.status,this.expectPayVip="1"==t.type&&"1"==t.status&&"0"==t.payType,this.mobilePayVip="1"==t.type&&"1"==t.status&&"1"==t.payType,this.surplus=t.surplus+"",this.hasVipInfo=!0,this.isValidVip="1"==t.status,this.autoRenew=t.autoRenew}},setShareProfitUserInfo:function(e){var t=e.verify_info,n=t.verifyState,a=t.verifyClass;isNaN(n)||isNaN(a)||(this.shareProfitUser=(4==n||5==n)&&3==a)},setMediaBigVUser:function(e){if(e){var t=e.verify_info,n=t.verifyState,a=t.copyright;isNaN(n)||isNaN(a)||(this.mediaBigVUser=4==n&&1==a)}},clearUserInfo:function(){this.uid="",this.name="",this.icon="",this.email="",this.phone="",this.clearVipInfo(),this.shareProfitUser=void 0,this.mediaBigVUser=!1,this.bindedSNS=null,this.isLoginInfo=null,this.accounts=null,this.tokens=null,this.subaccount=null,this.thirdPartyFrom="",this.isHitUser="",this.isAbLogin=""},clearVipInfo:function(){this.deadline_date="",this.deadline_day="",this.deadline_t="",this.level="",this.vipType="",this.payType="",this.remind="",this.status="",this.type="",this.mobile="",this.vip=!1,this.lockedVip=!1,this.expireVip=!1,this.expectPayVip=!1,this.mobilePayVip=!1,this.hasVipInfo=!1,this.surplus="",this.isValidVip=!1,this.autoRenew=!1},isLogin:function(){return""!==Q.cookie.get("P00002")&&null!==Q.cookie.get("P00002")&&"deleted"!==Q.cookie.get("P00002")&&""!==Q.cookie.get("P00003")&&null!==Q.cookie.get("P00003")&&"deleted"!==Q.cookie.get("P00003")},isVip:function(e){return this.checkVipInfo(e,"vip"),this.vip},isShareProfitUser:function(e){return void 0===this.shareProfitUser?this.getInfoFromInterface(e,"shareProfitUser"):e&&e(this.shareProfitUser),this.shareProfitUser},isMediaBigVUser:function(e){return this.getInfoFromInterface(e,"mediaBigVUser"),this.mediaBigVUser},isPPS:function(){return 10001<=parseInt(this.getUid(),10)&&parseInt(this.getUid(),10)<=564375554&&(this.pps=!0),this.pps},isAutoRenew:function(e){return this.checkVipInfo(e,"autoRenew"),this.autoRenew},getUserHit:function(e){var t=this;this.isHitUser?e&&e(this.isHitUser):this.getInfoFromInterface(function(){e&&e(t.isHitUser)})},getUserAbLogin:function(e){var t=this;this.isAbLogin?e&&e(this.isAbLogin):this.getInfoFromInterface(function(){e&&e(t.isAbLogin)})},isThirdPartyAccount:function(){if(!this.isLogin())return!1;var e=this.getUserInfo(),t=parseInt(e.type,10),n=parseInt(e.uid,10);return!!(t&&13!==t&&n>2e9&&3e9>n)},isLockedVip:function(e){return this.checkVipInfo(e,"lockedVip"),this.lockedVip},isExpireVip:function(e){return this.checkVipInfo(e,"expireVip"),this.expireVip},isExpectPayVip:function(e){return this.checkVipInfo(e,"expectPayVip"),this.expectPayVip},isMobilePayVip:function(e){return this.checkVipInfo(e,"mobilePayVip"),this.mobilePayVip},getUid:function(){return this.uid},getName:function(){return this.name},getIcon:function(e){return this.getIconInfo(e,"icon"),this.icon},getPhone:function(e){return this.getPhoneInfo(e,"phone"),this.phone},getThirdPartyFrom:function(e){return this.getThirdPartyFromInfo(e,"thirdPartyFrom"),this.thirdPartyFrom},getEmail:function(){return this.email},getDeadlineDate:function(e){return this.checkVipInfo(e,"deadline_date"),this.deadline_date},getDeadlineTime:function(e){return this.checkVipInfo(e,"deadline_t"),this.deadline_t},getDeadlineDay:function(e){return this.checkVipInfo(e,"deadline_day"),this.deadline_day},getLevel:function(e){return this.checkVipInfo(e,"level"),this.level},getVipType:function(e){return this.checkVipInfo(e,"vipType"),this.vipType},getPayType:function(e){return this.checkVipInfo(e,"payType"),this.payType},getRemind:function(e){return this.checkVipInfo(e,"remind"),this.remind},getStatus:function(e){return this.checkVipInfo(e,"status"),this.status},getType:function(e){return this.checkVipInfo(e,"type"),this.type},getMobile:function(e){return this.checkVipInfo(e,"mobile"),this.mobile},getSurplus:function(e){return this.checkVipInfo(e,"surplus"),this.surplus},getIsValidVip:function(e){return this.checkVipInfo(e,"isValidVip"),this.isValidVip},getAwardVip:function(e){return this.checkVipInfo(e,"isAwardVip"),this.isAwardVip},isSubaccount:function(){var e=this.getUid();return!!(e+"").match(/^4\d{9}$/)},getHitUser:function(e){return this.getUserHit(e,"isHitUser"),this.isHitUser},getAblogin:function(e){return this.getUserAbLogin(e,"isAblogin"),this.isAblogin}}}),userInfo=new UserInfo;userInfo.init(),module.exports={getSubAuthCookies:function(){return userInfo.getSubAuthCookies()},isLogin:function(){return userInfo.isLogin()},getUid:function(){return userInfo.getUid()},getName:function(){return userInfo.getName()},getIcon:function(e){return userInfo.getIcon(e)},getThirdPartyFrom:function(e){return userInfo.getThirdPartyFrom(e)},getPhone:function(e){return userInfo.getPhone(e)},getAuthCookies:function(){return userInfo.getAuthCookies()},getEmail:function(){return userInfo.getEmail()},getDeadlineDate:function(e){return userInfo.getDeadlineDate(e)},getDeadlineTime:function(e){return userInfo.getDeadlineTime(e)},getDeadlineDay:function(e){return userInfo.getDeadlineDay(e)},getLevel:function(e){return userInfo.getLevel(e)},getVipType:function(e){return userInfo.getVipType(e)},getPayType:function(e){return userInfo.getPayType(e)},getRemind:function(e){return userInfo.getRemind(e)},getStatus:function(e){return userInfo.getStatus(e)},getType:function(e){return userInfo.getType(e)},getMobile:function(e){return userInfo.getMobile(e)},isVip:function(e){return userInfo.isVip(e)},isShareProfitUser:function(e){return userInfo.isShareProfitUser(e)},isMediaBigVUser:function(e){return userInfo.isMediaBigVUser(e)},isLockedVip:function(e){return userInfo.isLockedVip(e)},isExpireVip:function(e){return userInfo.isExpireVip(e)},isExpectPayVip:function(e){return userInfo.isExpectPayVip(e)},isMobilePayVip:function(e){return userInfo.isMobilePayVip(e)},checkVipInfo:function(e){return userInfo.checkVipInfo(e)},checkUserInfo:function(){return userInfo.checkUserInfo()},getUserInfo:function(){return userInfo.getUserInfo()},getIsThirdParty:function(){return userInfo.getIsThirdParty()},getAwardVip:function(e){return userInfo.getAwardVip(e)},setIsThirdParty:function(e){return userInfo.setIsThirdParty(e)},getBindedSnsInfo:function(e){return userInfo.getBindedSnsInfo(e)},getIsLoginInfo:function(e){return userInfo.getIsLoginInfo(e)},getAllAccountsInfo:function(e){return userInfo.getAllAccountsInfo(e)},getSurplus:function(e){return userInfo.getSurplus(e)},clearUserInfo:function(){userInfo.clearUserInfo()},getIsValidVip:function(e){return userInfo.getIsValidVip(e)},isPPS:function(){return userInfo.isPPS()},isThirdPartyAccount:function(e){if(!userInfo.isLogin())return!1;if(0===arguments.length)return userInfo.isThirdPartyAccount();if(e&&userInfo.accounts&&userInfo.accounts.length)for(var t,n=0,a=userInfo.accounts.length;a>n;n++)if(t=userInfo.accounts[n].account,t&&-1!==t.indexOf("@"+e))return!0;return!1},isAccountBinded:function(){return userInfo.isLogin()?userInfo.accounts&&userInfo.accounts.length>1:!1},isAutoRenew:function(e){return userInfo.isAutoRenew(e)},isHitUser:function(e){return userInfo.getHitUser(e)},isAblogin:function(e){return userInfo.getAblogin(e)},isSubaccount:function(){return userInfo.isSubaccount()}}});
define("interfaces/isLogin",["../kit/remoteInterface","../config/siteDomain"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=i.getDomain(),o=window.location.protocol;n.exports=Q.Class("RIIsLogin",{construct:function(){this._remoteInterface=new a({url:"http://passport."+r+"/apis/user/islogin.php"}),this._infoRemote=new a({url:o+"//passport."+r+"/apis/user/info.action"})},methods:{send:function(e,t){e.param=e.param||{},e.method=e.method||"POST",e.cors=!0,e.withCredentials=!0,e.param.authcookie=e.param.authcookie||Q.cookie.get("P00001"),e.param.antiCsrf=Q.crypto.md5(Q.cookie.get("P00001")),this._remoteInterface.send(e,function(e){t&&t(e)})},sendInfoAction:function(e,t){e.param=e.param||{},e.method=e.method||"POST",e.cors=!0,e.withCredentials=!0,e.param.authcookie=e.param.authcookie||Q.cookie.get("P00001"),e.antiCsrf=!0,e.param.fields=e.param.fields||"userinfo,qiyi_vip,pps,accounts,tokens,v,insecure_account,ablogin",this._infoRemote.send(e,function(e){t&&t(e)})}}})});
define("action/reLogin",["./qipaLogin"],function(e,t,n){var a=e("./qipaLogin"),i=Q.Class("ReLogin",{construct:function(){this.needRefresh=!0},methods:{reLogin:function(e){var t=this,n="function"!=typeof window._js_app_service;("A00005"==e.code||"A00055"==e.code)&&(Q.event.customEvent.on("login",function(){t.needRefresh&&setTimeout(function(){window.location.reload()},100)}),Q.event.customEvent.on("loginIframeClosed",function(){t.needRefresh=!1,a.closeLoginWindow(),a.clearTempCallback(),Q.event.customEvent.fire({type:"logout",data:{}})}),"A00005"==e.code&&n?a.openLoginWindow({btnId:"resetpwd"}):"A00055"==e.code&&n&&a.openLoginWindow({btnId:"ipchange"}))}}});n.exports=new i});
define("components/action/viewCenter",[],function(e,t,n){var a=function(e,t){if(t=t||{},e){e=Q.$(e);var n=e.width(),a=e.height(),i=Q.page.getViewWidth(),r=Q.page.getViewHeight(),o=(i-n)/2+Q.page.getScrollLeft(),l=(r-a)/2+Q.page.getScrollTop();t.noposition||e.css("position","absolute"),"vertical"==t.direction?e.css("top",l+"px"):"horizontal"==t.direction?e.css("left",o+"px"):(e.css("left",o+"px"),e.css("top",l+"px"))}};n.exports=a});
define("components/action/floater",["./adapter","../model/floaterModel","../view/floaterView"],function(e,t,n){var a=e("./adapter"),i=e("../model/floaterModel"),r=e("../view/floaterView");n.exports=Q.Class("Floater",{ns:"Q.action",extend:a,construct:function(e){e=e||{},e.model=e.model||new i,e.view=e.view||new r(e),this.callsuper(e),this._valid=!0,this._plugins=[]},methods:{show:function(e){e=e||{},Q.object.extend(e,{display:!0}),this._model.set(e),this.syncGet()},reShow:function(){this._view.update({display:!0})},justShow:function(){this._view.show(),this._view.showCover(),this._view.adjustPosition(),this._view.playAnim()},hide:function(){this._model.set({display:!1}),this.syncGet()},pos:function(e){this._view.pos(e)},getFloater:function(){return this._view.getFloater()},destroy:function(){this.hide(),this._valid&&(this._model.destroy&&this._model.destroy(),this._view.destroy&&this._view.destroy(),this._valid=!1)},isValid:function(){return this._valid},isOpen:function(){return this._view.isOpen()},registPlugin:function(e){this._plugins.push(e)},plugin:function(e){this._plugins.forEach(function(t){t.init&&t.init(e)})},clearPlugins:function(){this._plugins=[]},getCoverFloater:function(){return this._view.getCoverFloater()}}})});
define("components/action/adapter",["../model/model","../view/view"],function(e,t,n){var a=e("../model/model"),i=e("../view/view");n.exports=Q.Class("Adapter",{construct:function(e){e=e||{};var t=e.model,n=e.view;t instanceof a&&(this._model=t,this._model.init(this)),n instanceof i&&(this._view=n,this._view.init(this))},methods:{notice:function(e){if(!e.hasOwnProperty("type"))throw'The ctrlClass method "notice" argument is not Meet the standard!';this._fire(e)},_fire:function(e){this.events&&this.events.hasOwnProperty(e.type)&&this.events[e.type].call(this,e)},syncGet:function(e){if(this._model)var t=this._model.get(e);this._view&&this._view.update(t)},asyncGet:function(e){if(!this._model)return!1;var t=this;this._model.get(e,function(e){t._view&&t._view.update(e)})},syncSet:function(e){if(this._model)var t=this._model.set(e);this._view&&this._view.update(t)},asyncSet:function(e){if(!this._model)return!1;var t=this;this._model.set(e,function(e){t._view&&t._view.update(e)})}}})});
define("components/model/model",[],function(e,t,n){n.exports=Q.Class("Model",{ns:"Q.model",construct:function(){this._data={}},methods:{init:Q.fn.emptyMethod,get:function(){return this._data},set:function(e){return Q.object.extend(this._data,e)}}})});
define("components/view/view",[],function(e,t,n){n.exports=Q.Class("View",{ns:"Q.view",methods:{init:function(e){this._ctrl=e},update:Q.fn.emptyMethod}})});
define("components/model/floaterModel",["./model"],function(e,t,n){var a=e("./model");n.exports=Q.Class("FloaterModel",{ns:Q.model,extend:a,methods:{init:function(){this._data={display:!1}}}})});
define("components/view/floaterView",["./view","../action/viewCenter","../action/overlay","../kit/wmodesp","../../kit/anim","../../kit/pageSizeListener"],function(e,t,n){var a=e("./view"),i=e("../action/viewCenter"),r=e("../action/overlay"),o=e("../kit/wmodesp"),l=e("../../kit/anim"),s=e("../../kit/pageSizeListener");n.exports=Q.Class("FloaterView",{ns:"Q.view",extend:a,construct:function(e){e=e||{},this.callsuper(e),this.doOnresize(e),this._wrapper=e.wrapper||document.body,this._zIndex=e.zIndex||100,this.isAnim=e.isAnim,this.noOverflowHidden=e.noOverflowHidden,this.background=e.background,this.clickCoverCloseFloater=!!e.clickCoverCloseFloater},methods:{init:function(e){this._ctrl=e,this._elem=Q.$(document.createElement("div")),this._elem.css("position","absolute"),this._elem.css("top","0px"),this._elem.css("zIndex",this._zIndex),this.noOverflowHidden||this._elem.css("overflow","hidden"),this.background&&this._elem.css("background",this.background),this._elem.css("visibility","hidden"),Q.$(this._wrapper).append(this._elem),this.adjustBind=this.adjustBind||this.adjustPosition.bind(this)},update:function(e){var t=this;e.display?(t.build(e),t.adjustPosition(e.floater),t.playAnim(e.anim),t.isResize&&t.doOnresize({isResize:!0}),setTimeout(function(){t.show(),t.showCover(e.cover)},1)):(this.hide(),this.hideCover(),this._removeEvent())},getFloater:function(){return this._elem},build:function(e){if(e.id){var t=Q.$("#"+e.id);t&&(this._elem.append(t),e.removeBlock?t.removeAttr("style"):t.show())}else e.html?this._elem.html(e.html):e.elem&&(e.replace&&this._elem.html(""),this._elem.append(e.elem),e.elem.show())},pos:function(e){this._elem.css("left",e.left+"px"),this._elem.css("top",e.top+"px")},show:function(){this._elem.css("visibility","visible"),this.hidePlayer()},hide:function(){this._elem.css("visibility","hidden"),this.showPlayer()},showPlayer:function(){Q.browser.iPad||(Q._PLAYER_WMODE_SP&&Q._PLAYER_WMODE_SP.hide(),o.hide())},hidePlayer:function(){Q.browser.iPad||(Q._PLAYER_WMODE_SP&&Q._PLAYER_WMODE_SP.show(),o.show())},destroy:function(){this._removeEvent(),this._removeDom()},adjustPosition:function(){var e=this;e.isAnim?setTimeout(function(){i(e._elem[0],{noposition:1,direction:"horizontal"}),r.resize()},0):setTimeout(function(){i(e._elem[0]);var t=e._elem.top();r.resize(),0>t&&e._elem.css("top","30px")},0)},showCover:function(e){var t=this;r.show(t._zIndex-5,e),t.clickCoverCloseFloater&&r._overlay.on("click",function(){t._ctrl.destroy(),r._overlay.un("click")})},hideCover:function(){r.hide()},playAnim:function(e){e=e||{},e.style&&l({elem:this._elem,style:e.style,from:e.from||-300,to:e.to||0,duration:e.duration||400})},_removeDom:function(){var e=this._elem[0];e.parentNode&&setTimeout(function(){e.parentNode.removeChild(e)},0)},_removeEvent:function(){this.winObj&&(this.winObj.un("resize",this.adjustBind),this.winObj=null)},isOpen:function(){return"visible"==this._elem.css("visibility")},doOnresize:function(e){e&&(e.isResize?(this.isResize=!0,this.winObj||(this.winObj=Q.$(window),this.adjustBind=this.adjustBind||this.adjustPosition.bind(this),this.winObj.on("resize",this.adjustBind))):e.isResponsive&&(this.isResize=!0,this.winObj||(this.winObj=Q.$(window),this.adjustBind=this.adjustBind||this.adjustPosition.bind(this),s.on("sizeChange",this.adjustBind))))},getCoverFloater:function(){return r._overlay}}})});
define("components/action/overlay",[],function(e,t,n){var a=Q.Class("Overlay",{ns:"Q.action",_overlay:null,statics:{_count:0,_originZIndex:[],show:function(e,t){if(t=t||{},!a._overlay){var n=Q.$(document.createElement("div"));n.css("position",Q.browser.IE6?"absolute":"fixed"),n.css("left","0"),n.css("top","0"),n.css("width",Q.page.getWidth()+"px"),n.css("height",Q.page.getHeight()+"px"),n.css("background",t.bg||"#000"),n.css("opacity",t.opacity||"0.5"),n.css("filter","alpha(opacity="+(100*t.opacity||50)+")"),n.css("-moz-opacity",t.opacity||"0.5"),Q.$(document.body).append(n),a._overlay=n}e&&a._overlay.css("zIndex",e),this.resize(),a._overlay.css("display","")},hide:function(){if(a._overlay){if(a._count>0)return a._count--,a._overlay.css("zIndex",a._originZIndex[a._count]),void 0;a._overlay.css("display","none").css("zIndex","100")}},resize:function(){a._overlay&&a._overlay.css("width",Q.page.getWidth()+"px").css("height",Q.page.getHeight()+"px")}}});n.exports=a});
define("components/kit/wmodesp",[],function(e,t,n){var a=Q.Class("WMODESP",{construct:function(){this.player=Q.$("#flash")},methods:{show:function(){this.player=Q.$("#flash"),this.player&&"window"==Q.player.wMode&&(this.player.css("visibility","hidden"),this.player.parent().css("visibility","hidden"))},hide:function(){this.player=Q.$("#flash"),this.player&&"window"==Q.player.wMode&&(this.player.css("visibility","visible"),this.player.parent().css("visibility","visible"))}}});n.exports=new a});
define("kit/anim",[],function(e,t,n){var a=[],i=function(e,t){var n;return a.forEach(function(a){return a.elem.equal(e)&&a.style==t?(n=a.anim,!1):void 0}),n};n.exports=function(e){if(e){var t=e.elem,n=e.style||"left",r=e.from,o=e.to,l=e.ease||"Expo.easeOut",s=e.duration||500,m=e.done||function(){},d=i(t,n);return d||(d=Q.anim.create(t),a.push({elem:t,style:n,anim:d})),d.ease(l),d.duration(s),d.stop().from(n,r).to(n,o).go().onDone(m),d}}});
define("kit/pageSizeListener",["../components/action/adapter","./eventPlugin"],function(e,t,n){var a=e("../components/action/adapter"),i=e("./eventPlugin"),r=null,o=Q.Class("PageSizeListener",{extend:a,plugins:[new i],construct:function(e){this.callsuper(e)},statics:{getInstance:function(){return r||(r=new o,r.init()),r}},methods:{init:function(){function e(){var e=Q.page.getViewWidth(),t=Q.page.getViewHeight();return{width:e,height:t}}var t=null;this._size=e();var n=this;Q.$(window).on("onresize",function(){t&&clearTimeout(t),t=setTimeout(function(){var t=e();(n._size.width!==t.width||n._size.height!==t.height)&&(n._size=t,n.fire({type:"sizeChange",data:{size:t}}))},100)})},get:function(){return this._size}}});n.exports=o.getInstance()});
define("kit/jsCallPlayer",[],function(e,t,n){function a(e,t){if(e=e||{},o[t]&&(r=o[t].getPlayerById(e.id)||o[t].getPlayerById("flashbox"))){var n=e.fn,a=e.param;a?r[e.name](a):n?r[e.name](n):r[e.name]()}}var i=[],r=null,o={};n.exports=function(e){var t=e.id||"flashbox";"video"===t&&(t="flashbox"),o[t]?a(e,t):(i.push(e),window.QiyiPlayerLoader.ready(function(e){e.ready(t,function(){if(o[t]=e,i.length){for(var n=0;n<i.length;n++)try{a(i[n],t)}catch(r){}i.length=0}})}))}});
define("config/video",[],function(e,t,n){var a=Q.browser.iPad||Q.browser.iPhone||Q.browser.android||Q.browser.lePad||Q.browser.WP;n.exports=a});
define("units/resizePageWidth",["../components/units/pageJob","../components/action/checkDoms","../kit/pageSizeListener"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=e("../kit/pageSizeListener"),i="resizePageWidth",r=null;t.create(i,{getDependentDoms:function(){return r={refEle:Q.$("[data-widget-maincontent=maincontent]")||Q.$("#widget-userheader")}},check:function(e){return n(e),!0},init:function(){var e=Q.$("body");a.on("sizeChange",function(t){var n=Q.PageInfo&&Q.PageInfo.minWidth||940;r&&r.refEle&&(n=r.refEle.width());var a=t.data.size;a.width<n?e.css("width",n+"px"):e.css("width","100%")})}}),t.add(i)});
define("components/action/checkDoms",[],function(e,t,n){var a=function(e){Q.object.forEach(e,function(e,t){if(!e)throw new Error("Dom "+t+" is null")})};n.exports=a});
define("kit/responsive",["../components/action/adapter","./eventPlugin","./pageSizeListener","./inExternal","./external"],function(e,t,n){var a=e("../components/action/adapter"),i=e("./eventPlugin"),r=e("./pageSizeListener"),o=e("./inExternal"),l=e("./external");Q.$(document.body);var s=null,m=Q.Class("Responsive",{extend:a,plugins:[new i],construct:function(e){this.callsuper(e)},statics:{getInstance:function(){return s||(s=new m,s.init()),l.add("responsive",s),s}},methods:{init:function(){Q.PageInfo=Q.PageInfo||{};var e=Q.PageInfo.respInfo,t=Q.$("body");this.respInfo=e,this.enable=!!e,(Q.browser.IE7||Q.browser.IE6)&&(this.enable=!1);var n=o("GetQiyiClientInfo");if(n&&e&&(this.enable=!0),"live"==t.attr("data-pageType")&&(this.enable=!0),this.enable){var a=this,i=function(n){n=n||r.get();for(var i=e.cnf,o=0;o<i.length;o++){var l=n.width,s=Q.browser.IE8?l<i[o].range.max:l<=i[o].range.max;if(l>=i[o].range.min&&s&&!t.hasClass(i[o].cls)){t.removeClass(i[e.curLayout].cls),t.addClass(i[o].cls),e.curLayout=i[o].layout,a.fire({type:"bodyClassChange",data:Q.object.extend({size:n},e)}),a.fire({type:"responsiveDone",data:{}});break}}};i(),r.on("sizeChange",function(e){i(e.data.size)})}},getCurrentLayout:function(){var e=this.respInfo,t=e.curLayout;return{bodyClass:e.cnf[e.curLayout].cls,layout:t}},addListener:function(e){this.on("bodyClassChange",function(t){var n=t.data;e(n.cnf[n.curLayout])})}}});n.exports=m.getInstance()});
define("kit/inExternal",[],function(){return function(e){try{return"undefined"!=typeof window.external&&"unknown"!=typeof window.external&&"undefined"!=typeof window.external[e]&&"unknown"!=typeof window.external[e]}catch(t){return!1}}});
define("kit/external",[],function(e,t,n){Q.external=Q.external||{};var a=function(e,t){switch(Object.prototype.toString.call(e)){case"[object Object]":Q.object.extend(Q.external,e);break;case"[object String]":Q.external[e]=t}return Q.external};n.exports={add:a}});
define("kit/yingyinPluginV2",[],function(e,t,n){var a,i=function(){if(!(Q.browser.getOS()||"").match(/win/i))return null;if(a)return a;var e=parseInt(31415926*Math.random()+1,10);return window.ActiveXObject||Q.browser.IE11&&void 0!==window.ActiveXObject?Q.$("body").html("beforeend","<object id="+e+" "+'classid="clsid:5E6A8DA1-5731-465B-B036-B9E16EF26CAC" width="0" height="0">'+"</object>"):navigator.plugins?navigator.plugins["iQiyi Browser Plugin"]&&Q.$("body").html("beforeend","<object id="+e+" "+'clsid="{5E6A8DA1-5731-465B-B036-B9E16EF26CAC}" width="0" height="0" '+'type="application/client-activex" ></object>'):Q.$("body").html("beforeend","<object id="+e+" "+'clsid="{5E6A8DA1-5731-465B-B036-B9E16EF26CAC}" width="0" height="0" '+'type="application/client-activex" ></object>'),Q.$("#"+e)&&Q.$("#"+e)[0]};n.exports={check:function(){a=i();var e;try{e=a.IsClientExists()}catch(t){e=!1}return null!=a&&e},checkClient:function(e,t){Q.http.json("http://localhost:16422/get_client_ver",{data:{ver:"5.2.15.2240"},dataType:"jsonp",jsonpCallback:"yingyinPluginV2",timeout:2e3,onsuccess:function(t,n){"A00000"===n.code&&e()},onfailure:function(){Q.http.json("http://localhost:16423/get_client_ver",{data:{ver:"5.2.15.2240"},dataType:"jsonp",jsonpCallback:"yingyinPluginV2",timeout:2e3,onsuccess:function(t,n){"A00000"===n.code&&e()},onfailure:function(){t()}})}})},checkDramaKing:function(){a=i();var e;try{e=a.IsFollowExists()}catch(t){e=!1}return null!=a&&e},down:function(e){var t=this;try{return a.Launch(e.albumId,"",e.isCharge,e.tvId,e.offline,e.startTime||"",e.definite,e.mdown||0),!0}catch(n){return t.downQisuProtocol(e),!1}},getPlugin:function(){return a=i()},downProtocol:function(e){var t="iqiyi://type=download&albumid="+e.albumId+"&tvid="+e.tvId+"&vid=videoid&name="+e.tvName+"&mdown="+(e.mdown||0)+"&ischarge=0";return window.location.href=t,!1},downQisuProtocol:function(e){var t="qisu://albumId="+e.albumId+";tvname="+encodeURIComponent(e.tvName)+";isCharge="+e.isCharge+";tvid="+e.tvId+";offline="+e.offline+';vtype=""';return window.location.href=t,!1},downDramaKing:function(e){try{return Q.log.log("setDeskTVInfo:"+JSON.stringify(e)),a.GetDeskFavorInfo(JSON.stringify(e)),!0}catch(t){return!1}},sendInfoToDrama:function(e){try{var t=a.GetJSInfo(JSON.stringify(e));return Q.log.log("GetJSInfo:"+JSON.stringify(e)),t}catch(n){return!1}}}});
define("kit/pcLogin",["../interfaces/pcLogin2","../interfaces/logout","../interfaces/isLogin","../kit/userInfo","../kit/iframeRequest","../config/siteDomain","../config/loginMsg"],function(e,t,n){var a=e("../interfaces/pcLogin2"),i=e("../interfaces/logout"),r=e("../interfaces/isLogin"),o=e("../kit/userInfo"),l=e("../kit/iframeRequest"),s=e("../config/siteDomain"),m=Q.event.customEvent,d=e("../config/loginMsg"),h=new Q.ic.InfoCenter({moduleName:"pcLogin"});window.lib=window.lib||{},window.lib.__callbacks__=window.lib.__callbacks__||{};var c={login_success:lib.__callbacks__.login_success||function(){},login_error:lib.__callbacks__.login_error||function(){},logout_callback:lib.__callbacks__.logout_callback||function(){},login_iframe_closed:lib.__callbacks__.login_iframe_closed||function(){},logBox_close:lib.__callbacks__.logBox_close||function(){},logBox_reset:lib.__callbacks__.logBox_reset||function(){}};window.lib.__callbacks__.login_iframe_closed=function(){c.login_iframe_closed(),m.fire({type:"loginIframeClosed"})},window.lib.__callbacks__.login_success=function(e){c.login_success(e),m.fire({type:"login",data:e})},window.lib.__callbacks__.logout_callback=function(e){c.logout_callback(e),m.fire({type:"logout",data:e})},window.lib.__callbacks__.logBox_close=function(e){c.logBox_close(e),m.fire({type:"loginIframeClosed"})},window.lib.__callbacks__.logBox_reset=function(e){c.logBox_reset(e),m.fire({type:"loginIframeReset",data:{opt:e}})},window.lib.__callbacks__.logBox_close.isMainsite=!0,n.exports={login:function(e,t){e=e||{},t=t||"normal";var n=new a(t);n.request(e,function(t){if("A00000"==t.code){if(t.data=t.data||{},t.data._loginName=e.param.email,e.param.from&&(t.data.from=e.param.from),t.data.hasLogined){var n=new l;n.request(t.data.hasLogined,null)}window.lib.__callbacks__.login_success(t.data)}else if("A00055"==t.code){if(h.log(t.code+d[t.code]),t.data.redirect){var a="http://passport."+s.getDomain()+"/apis/secure/verify_account.action";t.data.redirect=a}if(t.data&&"0"==t.data.bindphone)window.location.href=t.data.redirect;else{var i=null;e.param.from&&(i=e.param.from),m.fire({type:"abnormal_verifyPhone",data:{code:t.code,redirect:t.data.redirect,bindphone:t.data.bindphone,_loginName:e.param.email,from:i}})}}else h.log(t.code+d[t.code]),c.login_error(t.data),e.param&&2==e.param._pos||e.param&&e.param.target&&e.param.target.indexOf("_pos=2")>0?m.fire({type:"scrollfloater_login-failed",data:{code:t.code,msg:t.msg,needCode:t.data.needcode}}):m.fire({type:"login-failed",data:{code:t.code,msg:t.msg,needCode:t.data.needcode}})})},logout:function(){m.fire({type:"beforeLogout",data:{}}),Q.browser.IE6?(this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(this._dologout,1e3)):this._dologout()},_dologout:function(){var e=this,t=function(){var e=new i;e.request("",function(e){"A00000"==e.code&&window.lib.__callbacks__.logout_callback(e)})},n=new r,a={authcookie:o.getAuthCookies(),fields:"all",agent_type:1};n.sendInfoAction(a,function(n){if("A00000"==n.code){if(n.data&&n.data.verify_info){var a=n.data.verify_info;a.level&&"2"==a.level&&a.is_verified&&a.is_verified===!0?(e.req=new l,e.req.getFrame()&&e.req.request("http://portal.lego.iqiyi.com/logout-json",{callback:function(){t()},remove:!0})):t()}}else t()})}}});
define("interfaces/pcLogin2",["../kit/remoteInterface","../kit/userInfo","../config/siteDomain","../kit/rsa","./config","../kit/fdlKit"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../kit/userInfo"),r=e("../config/siteDomain");r.getDomain();var o=e("../kit/rsa"),l=e("./config").interfaces,s=e("../kit/fdlKit");n.exports=Q.Class("RIPcLogin",{construct:function(e){this._remoteInterface="normal"==e?new a({url:l.login}):new a({url:l.authlogin})},methods:{request:function(e,t){var n=this;e=e||{},e.param&&(e.param.passwd=o.rsaFun(e.param.passwd)),e.auth=i.getAuthCookies(),Q.browser.iPad&&e.param&&(e.param.agenttype=10),e.dataType="jsonp",e.method="GET",this._remoteInterface._remoteInterfaces.url.indexOf("reglogin")>=0?(e.bird_src=e.param.lang&&"zh_TW"==e.param.lang?"f8d91d57af224da7893dd397d52d811a":"eb8d221bc0c04c5ab4ba735b6b1560a1",e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/reglogin/login.action?",s.getToken(e,function(a){"A00000"===a.code?(e.param=Q.extend(e.param,a.param),n._remoteInterface._remoteInterfaces.url=a.requestUrl,n._remoteInterface.send(e,t)):t&&t(a)})):this._remoteInterface.send(e,t)}}})});
define("kit/rsa",[],function(e,t,n){n.exports={rsaFun:function(e){var t="ab86b6371b5318aaa1d3c9e612a9f1264f372323c8c0f19875b5fc3b3fd3afcc1e5bec527aa94bfa85bffc157e4245aebda05389a5357b75115ac94f074aefcd",n="10001",a=Q.crypto.rsa.RSAUtils.getKeyPair(n,"",t),i=Q.crypto.rsa.RSAUtils.encryptedString(a,encodeURIComponent(e)).replace(/\s/g,"-");return i}}});
define("kit/fdlKit",["../interfaces/fdlGetToken","../config/siteDomain"],function(require,exports,module){var fdlGetTokenIf=require("../interfaces/fdlGetToken"),siteDomain=require("../config/siteDomain"),protocol=window.location.protocol,ic=new Q.ic.InfoCenter({moduleName:"fdlKit"});module.exports={getToken:function(params,cb){var _this=this,ri=new fdlGetTokenIf;ri.request({},function(data){if("A00000"===data.code){var ip=data.ip,target;if(params.param)target=params.url_src+Q.url.jsonToQuery(params.param);else{var url_src=params.url_src;params.url_src=null,target=url_src+Q.url.jsonToQuery(params)}var input=target,timeStamp=Math.floor((new Date).getTime()/1e3),sign=eval(data.sdk),options={param:{target:target,server:params.server,token:data.token,bird_src:params.bird_src,sign:sign,bird_t:timeStamp},requestUrl:protocol+"//apollo."+siteDomain.getDomain()+"/validate",code:"A00000"};cb&&cb(options)}else cb&&cb(data)})}}});
define("interfaces/fdlGetToken",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface"),i=window.location.protocol,r=i+"//apollo.iqiyi.com/get_token";n.exports=Q.Class("fdlGetToken",{construct:function(){this._remoteInterface=new a({getToken:{url:r}})},methods:{request:function(e,t){e=e||{},this._remoteInterface.send({ifname:"getToken",param:e,dataType:"jsonp"},function(n){t&&t(n,e)})}}})});
define("interfaces/logout",["../kit/remoteInterface","../config/siteDomain"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=i.getDomain();n.exports=Q.Class("RILogout",{construct:function(){var e="";this._remoteInterface=new a({url:e})},methods:{request:function(e,t){Q.__logoutcb=function(){delete Q.__logoutcb,t({code:"A00000"}),Q.$("body")[0].removeChild(n[0])};var n=Q.element.Element.create({tagName:"iframe"});n[0].frameborder="0",n[0].width="0",n[0].height="0",n[0].src=window.location.protocol+"//passport."+r+"/user/logout.php?noredirect=1&logoutcb=Q.__logoutcb",Q.$("body").append(n)}}})});
define("kit/iframeRequest",[],function(e,t,n){var a=new Q.ic.InfoCenter({moduleName:"kit/iframeRequest"}),i=Q.Class("iframeRequest",{construct:function(e){e=e||{},this.param=e,this.createFrame()},methods:{createFrame:function(){var e="loadingIframe_thread"+Math.ceil(1e4*Math.random());this.loadFrames=e;var t=['<iframe id="'+e+'" name="'+e+'" class="invisible"',' scrolling="no" src=""',' allowTransparency="true" style="display:none;" frameborder="0"'," ></iframe>"].join(""),n=document.createElement("div");n.id="iframe_request",n.innerHTML=t,document.body.appendChild(n),this.ifr=n,this.frame=document.getElementById(this.loadFrames)},getFrame:function(){return this.frame||this.createFrame(),this.frame},request:function(e,t){if(this._initFrame(t),e&&this.ifr&&null!=this.frame){var n="sIframe_"+(new Date).getTime(),a=[];t=t||{},t.t=n;for(var i in t)a.push(i+"="+encodeURIComponent(t[i]));this.frame.src=-1==e.indexOf("?")?e+"?"+a.join("&"):e+"&"+a.join("&")}},_initFrame:function(e){var t=this;this.ifr&&this.frame&&(this.frame.onload=this.frame.onerror=this.frame.onabort=function(){a.log(t.frame.innerHTML),e.callback&&e.callback(),t.ifr.onload=t.ifr.onerror=t.ifr.onabort=null,t.param.remove&&(document.body.removeChild(t.ifr),t.ifr=t.frame=null)})}}});n.exports=i});
define("config/loginMsg",["../config/siteDomain"],function(e,t,n){var a=e("../config/siteDomain"),i="";i=a.isPPS()?"http://passport.pps.tv/user/login.php":"http://passport.qiyi.com/user/login.php",n.exports={A00000:"操作成功",A00101:"系统错误",P00101:"注册来源错误",P00102:"请输入正确的邮箱或手机号",P00103:"请输入正确的邮箱",P00104:"密码须为6-16位字母或数字",P00105:'该帐号已注册，请直接<a  j-delegate="loginscroll" href="'+i+'">登录</a>',P00106:'该手机已注册，请直接<a  j-delegate="loginscroll" href="'+i+'">登录</a>',P00107:"验证码错误，请重新输入",P00108:"帐号或密码错误，请重试",P00109:'仅支持中英文、数字或"_"',P00110:"昵称已被占用，换一个试试？",P00111:'该帐号尚未激活，<a href="{0}" target="_blank" class="onlink">重发激活邮件</a>',P00112:"邮箱未注册",P00113:"当前密码不正确",P00114:"新密码格式格式不正确",P00115:"找回密码链接失效",P00116:"找回密码链接错误",P00117:"帐号或密码错误，请重试",P00118:"帐号已激活，不用重发激活链接",P00119:"昵称包含敏感字",P00121:"该邮箱未注册",P00201:"缺少图片",P00202:"图片格式错误",T00115:"图片尺寸有问题，请重新选择",P00211:"抱歉！处理头像图片失败，请重试",P00301:"此第三方帐号已经绑定过了",P00302:"此邮箱已经被占用，请直接绑定已有帐号",P00303:"系统繁忙，绑定失败",P00304:"邮箱或密码错误，请重试",P00305:"该邮箱已被其他帐号绑定，换一个试试吧",P00306:"该帐号尚未激活，无法完成绑定",A00001:"用户未登录",E00000:"用户名或密码错误"}});
define("interfaces/locationInterface",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("UIDInterface",{construct:function(){var e=String(Math.floor(999999999*Math.random()))+""+(new Date).getTime(),t="http://iplocation.geo.qiyi.com/cityjson?tn="+e;this._remoteInterface=new a({LOC:{url:t}})},methods:{request:function(e){this._remoteInterface.send({ifname:"LOC",param:{},jsonp:{varname:"returnIpCity"}},function(t){"A00000"==t.code?e&&e(t.data):e({})})}}})});
define("interfaces/getDownloadUrlInterface",["./config","../kit/userInfo"],function(e,t,n){e("./config");var a,i=e("../kit/userInfo"),r=Q.browser.getOS(),o=Q.browser.ios;"Mac"===r?a=6:r.indexOf("Win")>-1?a=1:o?a=2:Q.browser.android?a=3:Q.browser.WindowsPhone&&(a=4);var l=Q.Class("GetDownloadUrlInterface",{construct:function(){},methods:{request:function(e,t){var n={ifname:e.ifname,method:e.method||"GET",param:e};e.jsonp?n.dataType="jsonp":n.encodeFn=function(e){return encodeURIComponent(e)},delete e.ifname,delete e.method,delete e.jsonp,this._remoteInterface.send(n,t)},mergeJson:function(e,t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},packageUrl:function(e){return"http://lotus.sp.iqiyi.com/ota?id=&pubplatform="+a+"&pubarea="+e.pubarea+"&qipuid=&u=&pu="+e.pu},getDownloadUrl:function(e){var t={pu:i.getUid()};return this.packageUrl(this.mergeJson(e,t))}}});n.exports=new l});
define("units/pcUserRegistLoginBoxManagerLoader",["../components/units/pageJob","../components/action/checkDoms","../kit/userInfo"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n,a,i=e("../kit/userInfo"),r="pcUserRegistLoginBoxManagerLoader",o=Q.event.customEvent,l=function(e,t){e.html(""),e.append(document.createTextNode(t))};t.create(r,{getDependentDoms:function(){var e=Q.$("#widget-userregistlogin");if(!e)return{wrapper:null};var t=e.down("[data-widget-loginbox=loginbox]"),n=e.down("[data-widget-registbox=registbox]"),a=e.down("[data-widget-userbox=userbox]"),i=e.down("[data-elem='topUserName']"),r=e.down("[data-elem=topLoginPanel]"),o=e.down("[data-elem=topRegistPanel]"),l=e.down("*[data-vipheader-elem=vipicon]"),s=e.down("*[data-vipheader-elem=notvipicon]"),m=Q.$("*[data-userinfocenter=loginbtn]");return this._doms={wrapper:e,loginBox:t,registBox:n,userBox:a,namePanel:i,loginPanel:r,registPanel:o,vipIcon:l,notVipIcon:s,loginBtn:m},this._doms},check:function(e){return!!(e.wrapper&&e.loginBox&&e.registBox&&e.userBox)},init:function(){Q(document).on("click",".J_pop-third-downbtn",function(){var e=Q(this).parents("tr"),t=e.find(".J_pop-third-upbtn"),n=e.find(".J_pop-third-box");Q(this).addClass("dn"),n.removeClass("dn"),t.removeClass("dn")}),Q(document).on("click",".J_pop-third-upbtn",function(){var e=Q(this).parents("tr"),t=e.find(".J_pop-third-downbtn"),n=e.find(".J_pop-third-box");t.removeClass("dn"),n.addClass("dn"),Q(this).addClass("dn")}),Q(document).on("click",".J_account-btn",function(){var e=Q('[data-registbox-elem="main"]'),t=Q('[data-registbox-elem="loginTable"]').find("input"),n=Q('[data-registbox-elem="registpanel"]'),a=n.find(".J_account-title"),i=n.find(".J_account-inp");n.find(".J_account-btn");var r=n.find(".J_sms-box"),o=n.find(".J_piccode-name"),l=n.find(".J_code-phoder"),s=n.find(".J_account-tr").attr("data-type");"phone"===s?(n.find(".J_account-tr").attr("data-type","email"),a.html("邮&nbsp;&nbsp;&nbsp;箱："),i.attr("placeholder","请输入电子邮箱地址"),Q(this).html("手机注册"),r.addClass("dn"),e.removeClass("mobileLoginBox"),o.html(" "),l.attr("placeholder","请输入验证码")):"email"===s&&(n.find(".J_account-tr").attr("data-type","phone"),a.html("手&nbsp;&nbsp;&nbsp;机："),i.attr("placeholder","请输入手机号码"),Q(this).html("邮箱注册"),r.removeClass("dn"),e.addClass("mobileLoginBox"),o.html("验证码："),l.attr("placeholder","请输入右侧字母")),t.each(function(e){Q(t[e]).val("")}),n.find('[data-registbox-elem="errDom"]').html(" "),n.find('[data-registbox-elem="pwdstrong"]').addClass("dn")})},exec:function(){this._doms.avatarPanael=this._doms.wrapper.down("[data-elem=topUserFaceSmall]"),this._doms.splitline=this._doms.wrapper.down("*[data-elem=splitline]"),n=this._doms,this.isVlib="lib"===this._doms.loginBox.attr("data-loginbox-loc"),this.isLogin=i.isLogin(),this.checkoutPanel(this.isLogin),this.isLogin?n.loginBtn&&n.loginBtn.hide():n.loginBtn&&n.loginBtn.css("display",""),this.bindEvent()},checkoutPanel:function(e){n=this._doms;var t=n.wrapper,a=n.avatarPanael,r=n.namePanel,o=n.loginPanel,s=n.registPanel,m=n.vipIcon,d=n.notVipIcon,h=n.splitline,c=this.isVlib;if(e){o.hide(),s.hide(),h&&h.hide();var U="",u=JSON.parse(Q.cookie.get("P00002")).pnickname;U=u?u:i.getName();var V=r.down("#top-username")||r.down("a");!Q.browser.IE8&&Q.browser.IE6&&V.css("width",Math.min(12*U.length,36)+"px"),l(V,U),r.css("display","");var f=!1;i.getIsLoginInfo(function(e){if(e&&e.icon)a&&a.attr("src",e.icon);else if(a){var n=a.attr("defaultSrc");a.attr("src",n)}f?c?t.css("display",""):t.show():f=!0}),i.getIsValidVip(function(e){var n="";i.getLevel(function(t){e?(n="qyvr"+t+" qyv-rank",d.hide(),m[0].className="",m.addClass(n).css("display","")):(n="qyvr-gray"+t+" qyv-rank",m.hide(),d[0].className="",d.addClass(n).css("display",""))}),f?c?t.css("display",""):t.show():f=!0})}else{if(r.hide(),o.html("登录").css("display",""),s.html("注册").css("display",""),c?t.css("display",""):t.show(),a){var p=a.attr("defaultSrc");a.attr("src",p)}m.hide(),d.hide()}},bindEvent:function(){var e=this,t=e._doms;t.loginPanel,t.registPanel,t.loginBox,t.registBox;var n=t.namePanel,a=["loginInputBegin","registInputBegin","login","logout","beforePcLoginBoxShow","beforePcRegistBoxShow","beforePcUserBoxShow","pcLoginBoxShow","pcRegistBoxShow","pcUserBoxShow","indexNavClassChange"],i=function(t){e.doload(t,function(e,t){o.fire({type:t.type+"exe",data:t.data})})},r=function(e){o.on(e,i)};e.clearEvent=function(){a.forEach(function(e){o.un(e,i)})},n.on("click",function(t){e.doload(t,function(e){e.clickUserBox("userBox")})}),Q.browser.iPad||n.on("mouseleave",function(t){e.doload(t,function(e){e.userboxMouseleave()})});var l=n.down("a");l&&l.on("click",function(t){var n=Q.event.get(t.event||window.event||t);n.preventDefault(),e.doload(t,function(e,t){e.dopingback(l,t)})}),a.forEach(function(e){r(e)});var s=Q.$("body");s.delegate("loginscroll",function(t){e.doload(t,function(e,t){e.dologinscroll(t)})}),s.delegate("registerscroll",function(t){e.doload(t,function(e,t){e.doRegisterDelegate(t)})}),o.on("checkoutPanel",function(t){e.checkoutPanel(t.data)})},doload:function(e,n){a?n&&n(a,e):t.async("pcUserRegistLoginBoxManager",function(t){a=t,n&&n(a,e)})}}),t.add(r)});
define("units/vertifyEmail",["../components/units/pageJob","../components/action/checkDoms","../interfaces/resendEmailInterface","../config/siteDomain","../kit/findParent"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../interfaces/resendEmailInterface"),a=e("../config/siteDomain"),i=e("../kit/findParent"),r="vertifyEmail";t.create(r,{getDependentDoms:function(){return!0},check:function(){return!0},resendEmail:function(e){var t=this,a=new n,r=Q.cookie.get("P00011"),o=Q.$(e),l=i(o,"p"),s=i(o,"li");l?a.resendActivateEmail({code:r},function(){l.html(" "),l.html(t._getTimeHtml());var e=Q.$("#J_num");t._EcountDown(l,e)}):s&&a.resendBindEmail({code:r},function(){s.html(" "),s.html(t._getTimeHtml());var e=Q.$("#J_num");t._EcountDown(s,e)})},setTimerAuto:function(){var e=this,t=window.location.href;t.indexOf("thirdparty/bind_email_notice")>0&&e.resendEmail(Q("#J_email-resendSubmit")[0])},init:function(){var e=this;e.setTimerAuto(),Q.$(document).delegate("resendemail",function(t){var n=Q.event.get(t).target;e.resendEmail(n)});var t=function(e){var t=Q.cookie.get("P000email");if(t){var n=/@(.*)\./.exec(t),a=e.down("[data-emailname]"),i=e.down("[data-entermail]");if(n&&n[1]){a&&a.html(t);var r="http://mail."+n[1]+".com";i&&i.attr("href",r)}}};if(Q.$("[data-registbox-third=thirdUserReg]")){var n=Q.$("[data-registbox-elem='vertifymail']");t(n)}Q.event.customEvent.on("showVertifyEmailInfo",function(e){t(e.data.wrap)}),Q.$(document).delegate("modifyemail",function(e){e=Q.event.get(e.event),e.preventDefault(),Q.cookie.remove("P00011",{path:"/",domain:a.getDomain()});var t=Q(e.target).attr("href");t.indexOf("bind_account.action")>0?window.location.href=t:Q.event.customEvent.fire({type:"rePcRegistBoxShow",data:{}})});var i=Q.$('[data-widget-registvertifymail="page"]');i&&(t(i),i.delegate("modifyemail",function(e){Q.event.get(e.event).stop(),Q.cookie.remove("P00011",{path:"/",domain:a.getDomain()}),setTimeout(function(){window.location.href="http://passport.iqiyi.com/pages/register/index.action"},0)}))},_getHtml:function(){var e=['<i class="site-icons square-icon"></i>',"<span>重新发送，</span>",'<a rseat="1411201_rem" href="javascript:void()" class="eA_links" j-delegate="resendemail">',"重发一封"].join("");return e},_getTimeHtml:function(){var e=['<i class="site-icons square-icon"></i>',"<span>已发送，</span>",'<span rseat="1411201_rem" style="color:#ccc;">','<span id="J_num">59</span>',"秒后重发</span>"].join("");return e},_EcountDown:function(e,t){var n=this,a=58,i=null;clearInterval(i),i=setInterval(function(){return Q.$(t).html(a),0===a?(Q.$(e).html(n._getHtml()),clearInterval(i),!1):(a--,void 0)},1e3)}}),t.add(r)});
define("interfaces/resendEmailInterface",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("editPwdInterface",{construct:function(){this._remoteInterface=new a({resendActivateEmail:{url:"https://passport.iqiyi.com/apis/secure/resend_activate_email.action"},resendBindEmail:{url:"https://passport.iqiyi.com/apis/thirdparty/resend_bind_email.action"}})},methods:{resendActivateEmail:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"resendActivateEmail",param:e},function(e){t&&t(e)})},resendBindEmail:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"resendBindEmail",param:e},function(e){t&&t(e)})}}})});
define("kit/findParent",[],function(e,t,n){var a=function(e,t){if(e&&e!==document){var n=e.parentNode;if(null==n)return!1;var a=Q.$(n).down(t);if(a)for(var i=0,r=a.length;r>i;i++)if(a[i]==e)return!0}return!1},i=function(e,t){e=Q.$(e);for(var n=e[0],i=n.parentNode,r=!1;i&&!(r=a(i,t));)i=i.parentNode;return r?Q.$(i):null};n.exports=i});
define("units/sso",["../components/units/pageJob","../components/action/checkDoms","../action/ppsSync","../config/siteDomain","../kit/userInfo","../kit/yingyinPluginV2","../kit/yingyinSyncLogin"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../action/ppsSync"),a=e("../config/siteDomain"),i=e("../kit/userInfo"),r=e("../kit/yingyinPluginV2"),o=e("../kit/yingyinSyncLogin"),l={};t.create("sso",{check:function(){return!0},init:function(){this._buildEvent(),this._doSync()},_buildEvent:function(){Q.event.customEvent.on("login",function(){l.uid=i.getUid(),l.auth=Q.cookie.get("P00001"),l.uid&&l.auth&&o.setLoginInfo({launcher:r.getPlugin(),loginInfo:l})}),Q.event.customEvent.on("logout",function(){o.setLogoutInfo({launcher:r.getPlugin(),loginInfo:{}})})},_doSync:function(){var e=a.getDomain(),t="",i="";/pps/.test(e)?(i="http://passport.iqiyi.com/apis/user/delcookie.action?agenttype=39",t="http://passport.iqiyi.com/apis/user/setcookie.action?agenttype=39"):(i="http://passport.pps.tv/apis/user/delcookie.action?agenttype=39",t="http://passport.pps.tv/apis/user/setcookie.action?agenttype=39"),this.sync=new n({setUrl:t,delUrl:i}),this.sync.init()}}),t.add("sso")});
define("action/ppsSync",["../kit/iframeRequest","../kit/userInfo"],function(e,t,n){var a=e("../kit/iframeRequest"),i=Q.event.customEvent,r=e("../kit/userInfo");n.exports=Q.Class("PpsSync",{construct:function(e){e=e||{},this.setUrl=e.setUrl,this.delUrl=e.delUrl},properties:{setUrl:"",delUrl:""},methods:{init:function(){this.req=new a,i.on("beforeLogout",this._doSync.bind(this,this.delUrl)),i.on("login",this._doSync.bind(this,this.setUrl))},_doSync:function(e){if(e){var t=r.getAuthCookies(),n={authcookie:t},a=r.getUid(),i=Q.cookie.get("QC102");if(i){var o=i.match(/uid:\d+/gi)[0];o&&(o=o.replace(/\D+/gi,""),o===a&&(i=i.replace("=1","=0"),n.fromBaidu=i))}this.req.getFrame()&&this.req.request(e,n)}}}})});
define("kit/yingyinSyncLogin",[],function(e,t,n){new Q.ic.InfoCenter({moduleName:"yingyinSyncLogin"}),n.exports={setLoginInfo:function(e){if(e.launcher)try{e.loginInfo&&e.launcher.SetLoginInfo(101,e.loginInfo.uid,e.loginInfo.auth,1)}catch(t){}},setLogoutInfo:function(e){if(e.launcher)try{e.loginInfo&&e.launcher.SetLoginInfo(101,e.loginInfo.uid,e.loginInfo.auth,0)}catch(t){}},setClientInfo:function(e){if(e.launcher)try{e.loginInfo&&e.launcher.SetLoginInfo(100,e.loginInfo.uid,e.loginInfo.auth,e.clientState)}catch(t){}},getLoginInfo:function(e){if(e.launcher)try{var t=e.launcher.GetLoginInfo(e.pid);if(t){var n=t.split("|");if(3==n.length)return{uid:n[0],auth:n[1],state:n[2]}}else if(""===t)return{uid:0,auth:"",state:0}}catch(a){}return null}}});
define("components/model/widgetModel",["./model"],function(e,t,n){var a=e("./model");n.exports=Q.Class("WidgetModel",{ns:"Q.model",extend:a,construct:function(){this.callsuper()}})});
define("components/action/widget",["./nonMVCWidget","../view/widgetView"],function(e,t,n){var a=e("./nonMVCWidget"),i=e("../view/widgetView");n.exports=Q.Class("Widget",{extend:a,construct:function(e){if(!(e.view instanceof i))throw new Error("Widget.construct : view is not instance of WidgetView");this.callsuper({model:e.model,view:e.view})},methods:{redraw:function(){this._view.update(this._model.get())},config:function(e){this._view.config(e)}}})});
define("components/action/nonMVCWidget",["./adapter","./plugin"],function(e,t,n){var a=e("./adapter"),i=e("./plugin");n.exports=Q.Class("NonMVCWidget",{extend:a,construct:function(e){this.callsuper(e),this._plugins=[]},methods:{init:function(){var e=this;this._plugins.forEach(function(t){t.init(e)})},registerPlugin:function(e){if(!(e instanceof i))throw new Error("Not a Plugin's instance.");this._plugins.push(e)},resetPlugin:function(){this._plugins=[]}}})});
define("components/action/plugin",[],function(e,t,n){n.exports=Q.Class("Plugin",{construct:function(){throw new Error("Can not create instance.")},methods:{init:function(e){this._widget=e}}})});
define("components/view/widgetView",["./view"],function(e,t,n){var a=e("./view");n.exports=Q.Class("WidgetView",{ns:"Q.view",extend:a,construct:function(e){if(e=e||{},!e.doms)throw new Error("Missing doms.");this._doms=e.doms},methods:{config:Q.fn.emptyMethod}})});
define("action/underframe",[],function(e,t,n){var a=new Q.ic.InfoCenter({moduleName:"kit/underframe"});n.exports=Q.Class("UnderFrame",{construct:function(e){e=e||{},e.elem?(this.elem="string"==typeof e.elem?Q.$("#"+e.elem):e.elem,this.target=e.target||Q.$("body"),this.attrs=e.attrs||{},this.distTop=e.distTop||0,this.distLeft=e.distLeft||0,this.distHeight=e.distHeight||0,this.distWidth=e.distWidth||0,this.distRadius=e.radius||0,this.bg=e.bg||"#FFFFFF",e._class&&(this._class=e._class),this.createIframe()):a.warn("opt.elem不存在！")},methods:{createIframe:function(){var e=Q.$(document.createElement("iframe")),t=this.elem.css("zIndex");"auto"==t?t=0:t-=1,e.attr("src","about:blank"),e.attr("frameBorder","0"),e.css("display","none"),this._class&&e.addClass(this._class),this.target.append(e),e.css("position","absolute"),e.css("zIndex",t);var n=this.elem.width()+this.distWidth;0>n&&(n=0);var a=this.elem.height()+this.distHeight;0>a&&(a=0),e.css("top",this.elem.top()+this.distTop+"px"),e.css("left",this.elem.left()+this.distLeft+"px"),e.css("width",n+"px"),e.css("height",a+"px"),e.css("background",this.bg),this.distRadius&&e.css("borderRadius",this.distRadius+"px");for(var i in this.attrs)e.css(i,this.attrs[i]);this.iframe=e},show:function(){var e=this.iframe,t=this.elem.width()+this.distWidth;0>t&&(t=0);var n=this.elem.height()+this.distHeight;0>n&&(n=0),e.css("top",this.elem.top(this.target)+this.distTop+"px"),e.css("left",this.elem.left(this.target)+this.distLeft+"px"),e.css("width",t+"px"),e.css("height",n+"px"),e.css("display","")},hide:function(){this.iframe.hide()},get:function(){return this.iframe}}})});
define("kit/artTemplate",[],function(e,t,n){var a;!function(e){"use strict";a=function(e,t){return a["string"==typeof t?"compile":"render"].apply(a,arguments)},a.version="2.0.2",a.openTag="<%",a.closeTag="%>",a.isEscape=!0,a.isCompress=!1,a.parser=null,a.render=function(e,t){var n=a.get(e)||i({id:e,name:"Render Error",message:"No Template"});return n(t)},a.compile=function(e,n){function o(t){try{return new l(t,e)+""}catch(r){return m?i(r)():a.compile(e,n,!0)(t)}}var l,s=arguments,m=s[2],d="anonymous";"string"!=typeof n&&(m=s[1],n=s[0],e=d);try{l=r(e,n,m)}catch(h){return h.id=e||n,h.name="Syntax Error",i(h)}return o.prototype=l.prototype,o.toString=function(){return l.toString()},e!==d&&(t[e]=o),o};var t=a.cache={},n=a.helpers={$include:a.render,$string:function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?n.$string(e()):""),e},$escape:function(e){var t={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};return n.$string(e).replace(/&(?![\w#]+;)|[<>"']/g,function(e){return t[e]})},$each:function(e,t){var n=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)};if(n(e))for(var a=0,i=e.length;i>a;a++)t.call(e,e[a],a,e);else for(var r in e)t.call(e,e[r],r)}};a.helper=function(e,t){n[e]=t},a.onerror=function(t){var n="Template Error\n\n";for(var a in t)n+="<"+a+">\n"+t[a]+"\n\n";e.console&&e.console.error(n)},a.get=function(n){var i;if(t.hasOwnProperty(n))i=t[n];else if("document"in e){var r=document.getElementById(n);if(r){var o=r.value||r.innerHTML;i=a.compile(n,o.replace(/^\s*|\s*$/g,""))}}return i};var i=function(e){return a.onerror(e),function(){return"{Template Error}"}},r=function(){var e=n.$each,t="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",i=new RegExp(["\\/\\*[\\w\\W]*?\\*\\/","\\/\\/[^\\n]*\\n","\\/\\/[^\\n]*$",'"(?:[^"\\\\]|\\\\[\\w\\W])*"',"'(?:[^'\\\\]|\\\\[\\w\\W])*'","[\\s\\t\\n]*\\.[\\s\\t\\n]*[$\\w\\.]+"].join("|"),"g"),r=/[^\w$]+/g,o=new RegExp(["\\b"+t.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),l=/^\d[^,]*|,\d[^,]*/g,s=/^,+|,+$/g,m=function(e){return e.replace(i,"").replace(r,",").replace(o,"").replace(l,"").replace(s,"").split(/^$|,+/)};return function(t,i,r){function o(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function l(e){return p+=e.split(/\n/).length-1,a.isCompress&&(e=e.replace(/[\n\r\t\s]+/g," ").replace(/<!--.*?-->/g,"")),e&&(e=k[1]+o(e)+k[2]+"\n"),e}function s(e){var t=p;if(u?e=u(e):r&&(e=e.replace(/\n/g,function(){return p++,"$line="+p+";"})),0===e.indexOf("=")){var i=0!==e.indexOf("==");if(e=e.replace(/^=*|[\s;]*$/g,""),i&&a.isEscape){var o=e.replace(/\s*\([^\)]+\)/,"");n.hasOwnProperty(o)||/^(include|print)$/.test(o)||(e="$escape("+e+")")}else e="$string("+e+")";e=k[1]+e+k[2]}return r&&(e="$line="+t+";"+e),d(e),e+"\n"}function d(t){t=m(t),e(t,function(e){g.hasOwnProperty(e)||(h(e),g[e]=!0)})}function h(e){var t;"print"===e?t=L:"include"===e?(y.$include=n.$include,t=w):(t="$data."+e,n.hasOwnProperty(e)&&(y[e]=n[e],t=0===e.indexOf("$")?"$helpers."+e:t+"===undefined?$helpers."+e+":"+t)),b+=e+"="+t+","}var c=a.openTag,U=a.closeTag,u=a.parser,V=i,f="",p=1,g={$data:1,$id:1,$helpers:1,$out:1,$line:1},y={},b="var $helpers=this,"+(r?"$line=0,":""),v="".trim,k=v?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],x=v?"if(content!==undefined){$out+=content;return content;}":"$out.push(content);",L="function(content){"+x+"}",w="function(id,data){data=data||$data;var content=$helpers.$include(id,data,$id);"+x+"}";e(V.split(c),function(e){e=e.split(U);var t=e[0],n=e[1];1===e.length?f+=l(t):(f+=s(t),n&&(f+=l(n)))}),V=f,r&&(V="try{"+V+"}catch(e){"+"throw {"+"id:$id,"+"name:'Render Error',"+"message:e.message,"+"line:$line,"+"source:"+o(i)+".split(/\\n/)[$line-1].replace(/^[\\s\\t]+/,'')"+"};"+"}"),V=b+k[0]+V+"return new String("+k[3]+");";try{var W=new Function("$data","$id",V);return W.prototype=y,W}catch(_){throw _.temp="function anonymous($data,$id) {"+V+"}",_}}}()}(window),function(e){e.openTag="{{",e.closeTag="}}",e.parser=function(t){t=t.replace(/^\s/,"");var n=t.split(" "),a=n.shift(),i=n.join(" ");switch(a){case"if":t="if("+i+"){";break;case"else":n="if"===n.shift()?" if("+n.join(" ")+")":"",t="}else"+n+"{";break;case"/if":t="}";break;case"each":var r=n[0]||"$data",o=n[1]||"as",l=n[2]||"$value",s=n[3]||"$index",m=l+","+s;"as"!==o&&(r="[]"),t="$each("+r+",function("+m+"){";break;case"/each":t="});";break;case"echo":t="print("+i+");";break;case"include":t="include("+n.join(",")+");";break;default:e.helpers.hasOwnProperty(a)?t="=="+a+"("+n.join(",")+");":(t=t.replace(/[\s;]*$/,""),t="="+t)}return t}}(a),n.exports=a});
define("kit/generateRandomString",[],function(e,t,n){n.exports={generate:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;e>a;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}}});
define("kit/getPicUrl",[],function(e,t,n){n.exports=function(e,t){if(!e)return"";var n=e.lastIndexOf("."),a=e.substr(0,n),i=e.substr(n);return a+(t||"")+i}});
define("kit/iframeLocation",[],function(e,t,n){function a(){var e=window.self!=window.top,t=null;e&&(t=document.referrer);var n=location.href;return l()&&(n=s()),t||n}var i=["baidu.com","139life.com"],r=[],o=function(e){var t,n=i.length,a=r.length,o=!1;for(t=0;n>t;t++)-1!=e.indexOf(i[t])&&(o=!0);if(o)for(t=0;a>t;t++)-1!=e.indexOf(r[t])&&(o=!1);return o},l=function(){var e=!1,t=document.referrer;if(t)for(var n=0;n<i.length;n++)if(-1!=t.indexOf(i[n])){e=!0;break}return e},s=function(){for(var e=location.href,t=0;t<i.length;t++)if(-1!=e.indexOf(i[t])){e=location.origin+location.pathname;break}return e};n.exports={test:o,check:function(){return o(a())},url:a,href:function(e,t){this.check()?window.open(e):t?(t=t||{},setTimeout(function(){window.location.href=e},t.time||0)):window.location.href=e}}});
define("action/tab",["../components/action/widget","../model/tabModel","../view/tabView","../kit/eventPlugin"],function(e,t,n){var a=e("../components/action/widget"),i=e("../model/tabModel"),r=e("../view/tabView"),o=e("../kit/eventPlugin"),l={};n.exports=Q.Class("Tab",{extend:a,plugins:[new o],statics:{init:function(){l={}},getTab:function(e){return l[e]}},construct:function(e){e=e||{},e.model=e.model||new i(e),e.view=e.view||new r(e),this.callsuper(e);var t=e.doms.widget.attr("data-tabname");t&&(l[t]=this)},properties:{events:{titleclick:function(e){this.select(e.data),this.fire({type:"itemclick",data:e.data})}}},methods:{select:function(e){var t,n,a=e.titleIdx,i=e.bodyIdx;a?(t=e.title,n=e.body):(a="object"==typeof e&&e.title?parseInt(e.title.attr("data-seq"),10):e,t=this._view.getTitleItem(a),i=this._view.getBodyIdx?this._view.getBodyIdx(t,a):a,n=this._view.getBodyItem(i));var r=this._model.get();r.focus!=a&&(this._model.setFocus(a,i),this.redraw(),this.fire({type:"focuschange",data:{seq:a,title:t,body:n}}))},doneAnim:function(){this._view.doneAnim()},getCurrentTab:function(){var e=this._model._data.focus;return{title:this._view.getTitleItem(e||1),body:this._view.getBodyItem(e||1),seq:e}},getTabIndex:function(e){for(var t,n=this._view._doms.titles,a=0;a<n.length;a++)if(Q.$(n[a]).attr("data-flag")===e){t=a;break}return t=parseInt(t,10)}}})});
define("model/tabModel",["../components/model/model"],function(e,t,n){var a=e("../components/model/model");n.exports=Q.Class("TabModel",{extend:a,construct:function(){this.callsuper(),this._data={focus:0,bodyFocus:0}},methods:{setFocus:function(e,t){var n=this._data;n.focus=e,n.bodyFocus=t}}})});
define("view/tabView",["../components/view/widgetView","../kit/plugins/anim/animPlugin","../kit/plugins/anim/sohAnimPlugin"],function(e,t,n){var a=e("../components/view/widgetView"),i=e("../kit/plugins/anim/animPlugin"),r=e("../kit/plugins/anim/sohAnimPlugin");n.exports=Q.Class("TabView",{extend:a,construct:function(e){this.callsuper(e)},methods:{init:function(e){this.enbleHover=this._doms.widget.attr("data-widget-hover"),this.enableHoverAndClick=this._doms.widget.attr("data-widget-hoverclick"),this.enableLazyloadContent=this._doms.widget.attr("data-widget-lazyloadcontent"),this.triggerLazyloadTimer=null,this.callsuper("init",e),this._initSeq(),this._bindEvent(),this._anim=new r},update:function(e){var t=this._doms,n=t.titles,a=t.bodies,i="selected";t.widget&&(i=t.widget.attr("data-tab-selectedtitlecls")||i),n.removeClass(i);var o=e.focus-1,l=e.bodyFocus-1;Q.$(n[o]).addClass(i),this._anim||(this._anim=new r),this._anim.play({elem:t.slide,s:Q.$(a[l]),h:a})},getTitleItem:function(e){var t=this._doms;return Q.$(t.titles[e-1])},getBodyItem:function(e){var t=this._doms;return Q.$(t.bodies[e-1])},config:function(e){this._configAnim(e)},doneAnim:function(){this._anim.done()},_configAnim:function(e){if(e.plugins.anim){if(!(e.plugins.anim instanceof i))throw new Error("Not instanceof AnimPlugin.");this._anim=e.plugins.anim}},_initSeq:function(){var e=this._doms,t=e.titles,n=e.bodies;t.forEach(function(e,t){Q.$(e).attr("data-seq",t+1)}),n.forEach(function(e,t){Q.$(e).attr("data-seq",t+1)})},lazyload:function(e){var t=e.down("img[data-widget-lazyload]");t&&t.forEach(function(e){e.src=Q.$(e).attr("data-lazyload-src"),Q.$(e).removeAttr("data-widget-lazyload")})},getBodyIdx:function(e,t){var n,a=e.attr("data-flag");return a&&this._doms.bodies.forEach(function(e,t){e=Q.$(e),e.attr("data-flag")===a&&(n=t+1)}),0===n||n||(n=t),n},_changeTab:function(e){for(var t=this._doms,n=t.titles,a=t.bodies,i=this;e;){var r=e.attr("data-seq");if(r&&e.equal(n[r-1]))break;e=e.parent()}if(e){var o,l,s=parseInt(e.attr("data-seq"),10);if(o=this.getBodyIdx(e,s),l=Q.$(a[o-1]),this.triggerLazyloadTimer&&window.clearTimeout(this.triggerLazyloadTimer),this.enableLazyloadContent){var m=window.parseInt(this.enableLazyloadContent,10);this.triggerLazyloadTimer=window.setTimeout(function(){i.lazyload(l)},m)}"true"!==e.attr("data-tab-disabletitleclick")&&this._ctrl.notice({type:"titleclick",data:{title:e,body:l,titleIdx:s,bodyIdx:o}})}},_bindClickEvent:function(){var e=this._doms,t=e.titles,n=this;t.on("click",function(t){t=Q.event.get(t),e.widget&&e.widget.attr&&"false"!==e.widget.attr("data-widget-disabletitleclickevt")&&t.preventDefault();var a=Q.$(t.target),i=a;n._changeTab(i)})},_bindHoverEvent:function(){var e=this._doms,t=e.titles,n=this;t.on("mouseover",function(e){e=Q.event.get(e),e.preventDefault();var t=Q.$(e.target),a=t;n._changeTab(a)})},_bindLazyHover:function(){for(var e=this._doms,t=e.titles,n=this,a=0;a<t.length;a++){var i=Q.$(t[a]);if(i.attr("data-lazyhover")){var r=i.attr("data-lazyhovertm")||0;i.on("mouseover",function(e){n.lazyhoverSt&&clearTimeout(n.lazyhoverSt),e=Q.event.get(e),e.preventDefault();var t=Q.$(e.target),a=t;n.lazyhoverSt=setTimeout(function(){n._changeTab(a)},r)}),i.on("mouseout",function(){n.lazyhoverSt&&clearTimeout(n.lazyhoverSt)})}}},_bindEvent:function(){this.enableHoverAndClick?(this._bindClickEvent(),this._bindLazyHover()):this.enbleHover?this._bindHoverEvent():this._bindClickEvent()}}})});
define("kit/plugins/anim/animPlugin",["../../eventPlugin"],function(e,t,n){var a=e("../../eventPlugin");n.exports=Q.Class("AnimPlugin",{plugins:[new a],construct:function(){},methods:{play:function(e){this._createAnim(e);var t=this;this._playAnim(e,function(){t.fire({type:"done"})})},pause:function(){},reset:function(){this._clearAnim()},done:function(){this._doneAnim()},_createAnim:function(e){this._anim||(this._anim=Q.anim(e.elem))},_playAnim:Q.fn.abstractMethod,_clearAnim:function(){this._anim=null},_doneAnim:function(){this._anim.done()}}})});
define("kit/plugins/anim/sohAnimPlugin",["./animPlugin"],function(e,t,n){var a=e("./animPlugin");n.exports=Q.Class("SoHAnimPlugin",{extend:a,construct:function(){},methods:{_createAnim:Q.fn.emptyMethod,_playAnim:function(e,t){e.h&&e.h.hide(),e.s&&e.s.show(),t()}}})});
define("action/list",["../components/action/adapter","../view/listView","../model/listModel","../kit/eventPlugin","./item","../units/activityNotice"],function(e,t,n){var a=e("../components/action/adapter"),i=e("../view/listView"),r=e("../model/listModel"),o=e("../kit/eventPlugin"),l=e("./item");e("../units/activityNotice");var s={};n.exports=Q.Class("List",{extend:a,plugins:[new o],construct:function(e){e=e||{},e.model=e.model||new r(e),e.view=e.view||new i(e);var t=e.name;t&&(s[t]?s[t].push(this):s[t]=[this]),this.callsuper(e)},statics:{getList:function(e){return s[e]}},methods:{init:function(){var e=this._model.get();this._updateItems(e),this.update(e),this.bindEvents()},fini:function(){this.destroyItems(),this._view.fini(),this.unbindEvents()},syncGet:function(e){return Q.object.extend({items:this.items},this._model.get(e))},syncSet:function(e){void 0!==e.itemsData&&this._isItemsDataChange(e.itemsData,this._model.get().itemsData)&&(this.destroyItems(),this._updateItems(e)),this.update(this._model.set(e)),this.fire({type:"listReady",data:{count:this.items.length}})},asyncGet:function(e){var t=this;this._model.asyncGet(e,function(e){void 0!==e.itemsData&&t._isItemsDataChange(e.itemsData,t._model.get().itemsData)&&(t.destroyItems(),t._updateItems(e)),t.update(t._model.set(e)),t.fire({type:"listReady",data:{count:t.items.length}})})},bindEvents:function(){this.bindItemsEvents()},unbindEvents:function(){this.unbindItemsEvents()},bindItemsEvents:function(){},unbindItemsEvents:function(){},buildItems:function(e){for(var t=[],n=0;n<e.itemsData.length;n++){var a=!1;e.curSn==n&&(a=!0);var i=new l({data:e.itemsData[n],select:a});i.init(),t.push(i)}return t},update:function(e){for(var t=e.curSn,n=0;n<this.items.length;n++){var a=this.items[n],i=!1,r=a.syncGet().select;t===n?r||(a.syncSet({select:!0}),i=!0):r&&(a.syncSet({select:!1}),i=!0),i&&this.fire({type:"sizeChange",data:{}})}this._view.update(e)},_updateItems:function(e){this.items=this.buildItems(e),this.bindItemsEvents(),this._model.get().calHtml&&(this._view.update({html:this._getItemsHtml(),historyhtml:this._getItemsHistoryHtml()}),this._setItemsDoms())},destroyItems:function(){this.unbindItemsEvents(),this.items&&this.items.forEach(function(e){e.fini()}),this.items=[]},_setItemsDoms:function(){var e,t=this._view._doms.list.children();this._view._doms.historylist&&(e=this._view._doms.historylist.children());var n=[];e&&e.forEach(function(e){var t=Q.$(e);t.attr("data-elem")||n.push(e)}),t&&t.forEach(function(e){var t=Q.$(e);t.attr("data-elem")||n.push(e)});for(var a=this.items,i=0;i<a.length;i++)a[i].syncSet({doms:{con:Q.$(n[i])}})},_getItemsHtml:function(){var e="",t=!0;return this.items.forEach(function(n){var a=n.syncGet();a.data.historySearch||(t&&!a.key&&a.data.search&&(e+='<li class="soResult_tit" data-elem="untrack">热门搜索</li>',t=!1),e+=n.syncGet().html)}),e},_getItemsHistoryHtml:function(){var e="",t=!0;return this.items.forEach(function(n){var a=n.syncGet();a.data.historySearch&&(t&&(e+='<li class="soHistory_tit" data-elem="untrack"><a class="fr" href="javascript:void(0);" j-delegate="clearSearchRecord" rseat="611281_cln"><i></i>清除记录</a><span>历史搜索</span></li>',t=!1),e+=n.syncGet().html)}),e},_isItemsDataChange:function(e,t){var n=!1;if(e.length==t.length){for(var a=0;a<e.length;a++)if(e[a]!=t[a]){n=!0;break}}else n=!0;return n}},properties:{events:{onSelItem:function(e){this.syncSet(e.data),this.fire({type:"selItem",data:e.data})},onFocusInItem:function(e){this.fire({type:"focusInItem",data:e.data})},onFocusOutItem:function(e){this.fire({type:"focusOutItem",data:e.data})},onSizeChange:function(e){this.fire({type:"sizeChange",data:e.data})}}}})});
define("view/listView",["../components/view/view"],function(e,t,n){var a=e("../components/view/view");n.exports=Q.Class("ListView",{extend:a,construct:function(e){e&&(this._doms=e.doms)},methods:{init:function(e){this._ctrl=e,this.update(e._model.get()),this.bindEvents()},update:function(e){if(void 0!==e.html){this.unbindItemsEvents();var t=this._doms.list,n=this._doms.historylist;t.html(e.html),n&&(n.html(""),e.historyhtml?(n.hasClass("dn")&&n.removeClass("dn"),n.html(e.historyhtml)):n.hasClass("dn")||n.addClass("dn"));var a,i=[];if(this._doms.historylist&&(a=this._doms.historylist.children()),a){var r=a.filter(function(e){return!Q.$(e).attr("data-elem")});i=i.concat(r)}var o=t.children();if(o){var l=o.filter(function(e){return!Q.$(e).attr("data-elem")});i=i.concat(l)}var s=["soNum_one","soNum_two","soNum_three"],m=0;if(i)for(var d=0;d<i.length;d++){var h=Q.$(i[d]);if(!h.attr("data-elem")){h.attr("index",d+"");var c=h.down('[data-elem="showNum"]');c&&(s[m]&&c.addClass(s[m]),m++,c.html(m)),d==e.curSn&&(h.addClass(e.selItemCls),this._curSn=e.curSn)}}this._ctrl.notice({type:"onSizeChange",data:{}}),this.bindItemsEvents()}this.selItem(e.curSn)},selItem:function(e){if(this._ctrl._model.get().respItemsEvts&&void 0!==e&&this._curSn!=e){var t,n=[];if(this._doms.historylist&&(t=this._doms.historylist.children()),t){var a=t.filter(function(e){return!Q.$(e).attr("data-elem")});n=n.concat(a)}var i=this._doms.list.children();if(i){var r=i.filter(function(e){return!Q.$(e).attr("data-elem")});n=n.concat(r)}if(n){var o=this._ctrl._model.get().selItemCls;n.forEach(function(t){t=Q.$(t),t.removeClass(o),parseInt(t.attr("index"),10)==e&&t.addClass(o)})}this._curSn=e,this._ctrl.notice({type:"onSizeChange",data:{}})}},doSelItem:function(e){e=Q.event.get(e);var t=parseInt(Q.$(e.currentTarget||e.target).attr("index"),10);this.selItem(t),this._ctrl.notice({type:"onSelItem",data:{curSn:t}})},doFocusInItem:function(e){e=Q.event.get(e);var t=Q.$(e.currentTarget||e.target),n=parseInt(t.attr("index"),10);t.addClass(this._ctrl._model.get().focusItemCls),this._ctrl.notice({type:"onFocusInItem",data:{curSn:n}})},doFocusOutItem:function(e){e=Q.event.get(e);var t=Q.$(e.currentTarget||e.target),n=parseInt(t.attr("index"),10),a=this._ctrl._model.get(),i=a.focusItemCls;(a.selItemCls!=i||n!=a.curSn)&&t.removeClass(i),this._ctrl.notice({type:"onFocusOutItem",data:{curSn:n}})},bindItemsEvents:function(){if(this._ctrl._model.get().respItemsEvts){var e,t=[];if(this._doms.historylist&&(e=this._doms.historylist.children()),e){var n=e.filter(function(e){return!Q.$(e).attr("data-elem")});t=t.concat(n)}var a=this._doms.list.children();if(a){var i=a.filter(function(e){return!Q.$(e).attr("data-elem")});t=t.concat(i)}if(t){var r={},o=this._ctrl._model.get(),l={selItem:{evts:o.selItemEvts,handler:this.doSelItem.bind(this)},focusInItem:{evts:o.focusInItemEvts,handler:this.doFocusInItem.bind(this)},focusOutItem:{evts:o.focusOutItemEvts,handler:this.doFocusOutItem.bind(this)}};t.forEach(function(e){e=Q.$(e);var t=e.attr("index");for(var n in l)if(l[n]){var a=l[n].evts,i=l[n].handler;a.forEach(function(a){e.on(a,i),r[t]||(r[t]={}),r[t][n]||(r[t][n]={}),r[t][n][a]=i})}}),this._itemHandlerObj=r}}},unbindItemsEvents:function(){if(this._ctrl._model.get().respItemsEvts){var e=this._itemHandlerObj;if(e){var t,n=[];if(this._doms.historylist&&(t=this._doms.historylist.children()),t){var a=t.filter(function(e){return!Q.$(e).attr("data-elem")});n=n.concat(a)}var i=this._doms.list.children();if(i){var r=i.filter(function(e){return!Q.$(e).attr("data-elem")});n=n.concat(r)}var o=this._ctrl._model.get(),l={selItem:o.selItemEvts,focusInItem:o.focusInItemEvts,focusOutItem:o.focusOutItemEvts};n.forEach(function(t){t=Q.$(t);var n=t.attr("index");for(var a in l)l[a]&&l[a].forEach(function(i){t.un(i,e[n][a][i])})})}this._itemHandlerObj=null}},bindEvents:function(){this.bindItemsEvents()},unbindEvents:function(){this.unbindItemsEvents()},fini:function(){this.unbindEvents()}}})});
define("model/listModel",["../components/model/widgetModel"],function(e,t,n){var a=e("../components/model/widgetModel");n.exports=Q.Class("ListModel",{extend:a,construct:function(e){this.callsuper(e),this._data=Q.object.extend({itemsData:[],curSn:-1,selItemEvts:["mouseenter"],focusInItemEvts:["mouseenter","click"],focusOutItemEvts:["mouseleave"],selItemCls:"",focusItemCls:"",respItemsEvts:!0,calHtml:!0},e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("action/item",["../components/action/adapter","../view/itemView","../model/itemModel","../kit/eventPlugin","../kit/artTemplate"],function(e,t,n){var a=e("../components/action/adapter"),i=e("../view/itemView"),r=e("../model/itemModel"),o=e("../kit/eventPlugin"),l=e("../kit/artTemplate"),s={};n.exports=Q.Class("Item",{extend:a,plugins:[new o],construct:function(e){e=e||{},e.model=e.model||new r(e),e.view=e.view||new i(e);var t=e.name;t&&(s[t]?s[t].push(this):s[t]=[this]),this.callsuper(e)},statics:{getItem:function(e){return s[e]}},methods:{init:function(){this.bindEvents()},syncGet:function(e){var t=this._model.get(e),n=this._view.formatData(Q.object.extend({},t.data)),a=Q.crypto.md5(t.tpl);return l.compile(a,t.tpl),Q.object.extend({html:l.render(a,n),formatData:n},t)},syncSet:function(e){void 0!==e.doms&&(this._view.update({doms:e.doms}),delete e.doms),this._view.update(this._model.set(e))},unbindEvents:function(){},bindEvents:function(){},fini:function(){this._view.fini(),this.unbindEvents()}}})});
define("view/itemView",["../components/view/view"],function(e,t,n){var a=e("../components/view/view");n.exports=Q.Class("ItemView",{extend:a,construct:function(e){e&&(this._doms=e.doms)},methods:{init:function(e){this._ctrl=e,this.update(e._model.get()),this.bindEvents()},update:function(e){void 0!==e.doms&&(this._doms&&this.unbindEvents(),this._doms=e.doms,e.doms&&this.bindEvents()),this._setSelect(e.select)},_setSelect:function(e){if(this._doms&&void 0!==e&&this._select!=e){var t=this._doms.con,n=this._ctrl._model.get().selectCls;e?t.addClass(n):t.removeClass(n),this._select=e}},bindEvents:function(){},unbindEvents:function(){},fini:function(){this.unbindEvents()},formatData:function(e){return e}}})});
define("model/itemModel",["../components/model/widgetModel"],function(e,t,n){var a=e("../components/model/widgetModel");n.exports=Q.Class("ItemModel",{extend:a,construct:function(e){this.callsuper(e),this._data=Q.object.extend({select:!1,tpl:"",selectCls:"",data:{}},e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("units/activityNotice",["../components/units/pageJob","../components/action/checkDoms","../kit/parentByProp","../kit/userInfo","../action/qipaLogin","../interfaces/activityNoticeInterface","../kit/qiyiPlayer","../action/scrollV2"],function(e,t,n){var a=e("../components/units/pageJob"),i=e("../components/action/checkDoms"),r=e("../kit/parentByProp"),o=e("../kit/userInfo"),l=e("../action/qipaLogin"),s=e("../interfaces/activityNoticeInterface");e("../kit/qiyiPlayer").getPlayer("video");var m,d=e("../action/scrollV2"),h="activityNotice",c="[data-widget-activity=activityshowbox]",U="[data-activity-attentBtn=attent]",u="[data-activity-notice=activity-join]",V="[data-activity-content=content]",f="[data-activity-noticeIcon=activity-msg]",p="<div data-widget-activity='index_bigpic'><div class='wrapper-listTitle wrapper-listTitle-notify wrapper-listTitle-notify-large'><div class='mod-listTitle album-notify-pic'><div class='notify-main' data-activity-attendBox='activity-box'><i class='notify-msgIco' data-activity-noticeIcon='activity-msg'></i><span class='notify-content' data-activity-content='content'></span><span class='notify-join' data-activity-notice='activity-join'><a style='cursor:pointer;' data-pb='' data-activity-attentBtn='attent'></a></span></div></div></div></div>",g="<div class='wrapper-listTitle wrapper-listTitle-oneNotify' data-activity-hover='0'><div class='mod-listTitle'><div class='mod-listTitle_left'><p class='textOverflow'><i class='notify-msgIco'></i> <span data-activity-notice='litTitle'></span></p></div></div></div><div class='rapper-listTitle wrapper-listTitle-notify' data-activity-hover='1'><div class='mod-listTitle album-notify-pic'><div class='notify-main' data-activity-attendBox='activity-box'><i class='notify-msgIco' data-activity-noticeIcon='activity-msg'></i><span class='notify-content' data-activity-content='content'></span><span class='notify-join' data-activity-notice='activity-join'><a style='cursor:pointer;' data-pb='' data-activity-attentBtn='attent'></a></span></div></div></div>",y="<div class='wrapper-listTitle wrapper-listTitle-row2' data-activity-hover='0'><div class='mod-listTitle'><div class='mod-listTitle_left'><p rseat='1_leftflo1' class='textOverflow' data-activity-tvname='tvname'></p></div><div class='mod-listTitle_describe'><p class='textOverflow'><i class='notify-msgIco'></i><span data-activity-notice='litTitle'></span></p></div></div></div><div class='wrapper-listTitle wrapper-listTitle-notify wrapper-listTitle-notifyTit' data-activity-hover='1'><div class='mod-listTitle album-notify-pic'><div class='mod-listTitle_left'><p rseat='1_leftflo2' class='textOverflow' data-activity-tvname='tvname'></p></div><div class='notify-main' data-activity-attendBox='activity-box'><i class='notify-msgIco' data-activity-noticeIcon='activity-msg'></i><span class='notify-content' data-activity-content='content'></span><span class='notify-join'  data-activity-notice='activity-join'><a style='cursor:pointer;' data-pb='' data-activity-attentBtn='attent'></a></span></div></div></div>",b="<div class='wrapper-listTitle wrapper-listTitle-notify'><div class='mod-listTitle album-notify-pic'><div class='notify-main' data-activity-attendBox='activity-box'><i class='notify-msgIco' data-activity-noticeIcon='activity-msg'></i><span class='notify-content' data-activity-content='content'></span><span class='notify-join' data-activity-notice='activity-join'><a style='cursor:pointer;' data-pb='' data-activity-attentBtn='attent'></a></span></div></div></div>",v="<div class='album-notify'><div class='notify-main' data-activity-attendBox='activity-box'><i class='notify-msgIco' data-activity-noticeIcon='activity-msg'></i><span class='notify-content' data-activity-content='content'></span><span class='notify-join' data-activity-notice='activity-join'><a style='cursor:pointer;' data-pb='' data-activity-attentBtn='attent'></a></span></div></div>",k={},x={},L=0;Q.PageInfo&&Q.PageInfo.playPageInfo&&Q.PageInfo.playPageInfo.tvId&&(L=Q.PageInfo.playPageInfo.tvId),a.create(h,{getDependentDoms:function(){var e=Q.$("*[data-activity-detailFlag]"),t=Q.$("*[data-activity-noticFlag]"),n=Q.$("[data-widget-activity=activitynoticedetail]"),a=n&&n.down("li");return m={activityDetailLi:a,activityShow:e,activityflag:t}},check:function(e){return i(e),!0},init:function(){for(var e,t,n=this,a=0,i=m.activityDetailLi.length;i>a;a++){var r=Q.$(m.activityDetailLi[a]),l=r.attr("data-activity-detailId");k[l]={},n.attrAssignment(l,r)}var h=new s,f={authcookie:o.getAuthCookies(),agent_type:1};h.get(f,function(a){for(var i=0,r=m.activityShow.length;r>i;i++){var l=Q.$(m.activityShow[i]),s=l.attr("data-activity-detailFlag"),h=l.attr("data-activity-noticFlag");x[s]=n.compareTime(k[s].start,k[s].stop,k[s].content,k[s].activityType);var f=x[s].substr(x[s].length-5,2);if("分钟"==f||"行中"==f)e=k[s].activityVideoId==L&&"0"==k[s].activityType?" ":"去看看";else if(x[s].substr(6,3).indexOf("周")>0||"小时"==f){if(o.isLogin()&&"A00000"==a.code)for(var w=0;w<a.data.activities.length;w++)if(a.data.activities[w]==k[s].id){var _=new Date(k[s].start).getTime()-(new Date).getTime(),W=Math.floor(_/6e4);t=60>W?"去看看":"已关注"}e="感兴趣"}else e="已结束","5"==h&&l.parent().parent().removeClass("mod-zy-notify");var X=l.down("[data-activity-wrapper=activity]");if("已结束"==e&&X&&X.css("display","block"),"已结束"!=e){X&&X.css("display","none");var I=l.down(c);I.css("display","block"),"0"==h||"3"==h?("0"==h&&I.html(g),"3"==h&&(I.html(y),l.down("[data-activity-tvname=tvname]").html(k[s].tvName)),l.down("[data-activity-hover=1]").hide(),l.down("[data-activity-notice=litTitle]").html(k[s].title),l.down("[data-activity-hover=0]").on("mouseenter",function(){Q.$(this).hide(),Q.$(this).parent().down("[data-activity-hover=1]").show()}),l.down("[data-activity-hover=1]").on("mouseleave",function(){Q.$(this).hide(),Q.$(this).parent().down("[data-activity-hover=0]").show()})):"1"==h?I.html(v):"4"==h?I.html(p):"2"==h?I.html(b):"5"==h&&(I.html(v),I.parent().addClass("play-notify"));var K=l.down(U);("分钟"==f||"行中"==f)&&(K.attr("href",k[s].href),"1"==k[s].activityType&&K.attr("target","_blank")),l.down(V).html(x[s]),K.attr("data-pb","rseat="+k[s].pingback+"&"+"noticeid="+k[s].id),"已关注"==t?(l.down(u).html(t),l.down("[data-activity-attendBox=activity-box]").addClass("notify-main-over"),t=" "):"去看看"==t?K.html(t):K.html(e),K&&K.on("click",function(){n.attendActivity(Q.$(this))})}}setTimeout(function(){var e=d.getScroll("sourcelist");e&&e.reset()},500)}),window.setInterval(function(){for(var e=0;e<m.activityShow.length;e++){var t=Q.$(m.activityShow[e]),a=t.attr("data-activity-detailFlag");x[a]=n.compareTime(k[a].start,k[a].stop,k[a].content,k[a].activityType),x[a].indexOf("分钟")>0||x[a].indexOf("进行中")>0?(t.down(V).html(x[a]),k[a].activityVideoId==L&&"0"==k[a].activityType?t.down(u).html(" "):(t.down(u).html("<a style='cursor:pointer;' data-pb='' data-activity-attentBtn='attent'>去看看</a>"),t.down(U).attr("href",k[a].href),t.down(U).attr("data-pb","rseat="+k[a].pingback+"&"+"noticeid="+k[a].id),"1"==k[a].activityType&&t.down(U).attr("target","_blank"))):x[a].indexOf("结束")>0}},6e4),Q.event.customEvent.on("logout",function(){for(var e=0,t=m.activityShow.length;t>e;e++){var a=Q.$(m.activityShow[e]);if(a.down(u)&&"已关注"==a.down(u).html()){var i=a.down(u).attr("data-activity-rseat");a.down(u).html("<a data-activity-attentBtn='attent' style='cursor:pointer;' rseat="+i+">感兴趣</a>"),a.down(U)&&a.down(U).on("click",function(){n.attendActivity(Q.$(this))})}}}),Q.event.customEvent.on("login",function(){var e={authcookie:o.getAuthCookies(),agent_type:1};h.get(e,function(e){if("A00000"==e.code)for(var t=0;t<e.data.activities.length;t++)for(var n=0;n<m.activityShow.length;n++)if(e.data.activities[t]==Q.$(m.activityShow[n]).attr("data-activity-detailFlag"))for(var a=0;a<m.activityDetailLi.length;a++)if(Q.$(m.activityShow[n]).attr("data-activity-detailFlag")==Q.$(m.activityDetailLi[a]).attr("data-activity-detailId")){var i=Q.$(m.activityDetailLi[a]).attr("data-activity-detailStartTime"),r=(new Date(i.replace(/-/g,"/")).getTime()-(new Date).getTime())/6e4,o=Q.$(m.activityDetailLi[a]).attr("data-activity-detailpingback"),l=Q.$(m.activityDetailLi[a]).attr("data-activity-detailId"),s=Q.$(m.activityDetailLi[a]).attr("data-activity-datailHref"),d=Q.$(m.activityDetailLi[a]).attr("data-activity-detailActivityVideoId"),h=Q.$(m.activityDetailLi[a]).attr("data-activity-detailactivitytype");if(60>r)if(d!=L||"1"==h){var c="<a style='cursor:pointer;' href="+s+">去看看</a>";Q.$(m.activityShow[n]).down(u).html(c),Q.$(m.activityShow[n]).down(u).down("a").attr("data-pb","rseat="+o+"&"+"noticeid="+l)}else Q.$(m.activityShow[n]).down(u).html("");else Q.$(m.activityShow[n]).down(u).html("已关注")}})})},changeState:function(e,t){var n=r(e,"data-activity-attendBox","activity-box"),a=n.down(V).html();n.addClass("notify-main-succ"),n.down(f).removeClass("notify-msgIco").addClass("notify-succIco"),n.down(V).html("成功关注该活动，活动开始前将收到通知"),n.down(u).html(""),window.setTimeout(function(){n.removeClass("notify-main-succ").addClass("notify-main-over"),n.down(f).removeClass("notify-succIco").addClass("notify-msgIco"),n.down(V).html(a),n.down(u).html("已关注");for(var e=0;e<m.activityShow.length;e++){var i=Q.$(m.activityShow[e]),r=i.attr("data-activity-detailflag");t==r&&i.down(u).html("已关注")}},2e3)},attendActivity:function(e){var t=this,n=r(e,"data-activity-attendBox","activity-box"),a=n.down(U).html(),i=r(e,"data-activity-detailFlag","").attr("data-activity-detailFlag");if(k[i]={},n.down(u).attr("data-activity-rseat",n.down(U).attr("rseat")),"去看看"!=a){for(var d=0,h=m.activityDetailLi.length;h>d;d++){var c=Q.$(m.activityDetailLi[d]),V=c.attr("data-activity-detailId");if(i==V){t.attrAssignment(i,c);break}}var f=new s,p={authcookie:o.getAuthCookies(),agent_type:1};if(!o.isLogin()){var g=0;return l.openLoginWindow(null,function(){f.get(p,function(e){if("A00000"==e.code)for(var t=0;t<e.data.activities.length;t++)k[i].id==e.data.activities[t]&&(n.down(u).html("已关注"),n.addClass("notify-main-over"),g=1)}),window.setTimeout(function(){"0"==g&&t.attendActivity(e)},1e3)}),!1}var y=o.getUid(),b={notice_id:k[i].id,rev_uids:y,notice_type:k[i].activityType,authcookie:o.getAuthCookies(),title:k[i].title,details:k[i].content,start_time:Math.round(new Date(k[i].start.replace(/-/g,"/")).getTime()/1e3),end_time:Math.round(new Date(k[i].stop.replace(/-/g,"/")).getTime()/1e3),correlation_url:k[i].href,correlation_id:k[i].activityVideoId,qipu_id:k[i].activityVideoId,agent_type:1};f.set(b,function(){}),t.changeState(e,k[i].id)}},attrAssignment:function(e,t){k[e].id=t.attr("data-activity-detailId"),k[e].title=t.attr("data-activity-detailTitle"),k[e].start=t.attr("data-activity-detailStartTime"),k[e].stop=t.attr("data-activity-detailEndTime"),k[e].content=t.attr("data-activity-detailContent"),k[e].href=t.attr("data-activity-datailHref"),k[e].tvName=t.attr("data-activity-detailTvname"),k[e].pingback=t.attr("data-activity-detailpingback"),k[e].activityVideoId=t.attr("data-activity-detailActivityVideoId"),k[e].activityType=t.attr("data-activity-detailActivityType")},compareTime:function(e,t,n,a){var i,r="",o=new Date,l=new Date(e.replace(/-/g,"/")),s=new Date(t.replace(/-/g,"/")),m=l.getTime()-o.getTime(),d=Math.floor(m/864e5),h=l.getDay(),c=Math.floor(m/36e5),U=Math.floor(m/6e4),u=l.getMonth(),V=l.getDate(),f=l.getHours(),p=l.getMinutes(),g=s.getHours(),y=s.getMinutes();switch(9>u&&(u="0"+(u+1)),10>V&&(V="0"+V),10>f&&(f="0"+f),10>p&&(p="0"+p),10>g&&(g="0"+g),10>y&&(y="0"+y),"0"==a?i=f+":"+p+"-"+g+":"+y:"1"==a&&(i=f+":"+p),h){case 0:h="日";break;case 1:h="一";break;case 2:h="二";break;case 3:h="三";break;case 4:h="四";break;case 5:h="五";break;case 6:h="六"}return d>0||c>12||l.getDate()>o.getDate()&&u>o.getMonth()?"0"==a?r=u+"-"+V+" 本周"+h+" "+i+"，"+n:"1"==a&&(r=u+"-"+V+" "+" 周"+h+" "+i+"，"+n):c>0&&12>c?r=i+" "+n+" "+c+"小时后开始":U>0?r=i+" "+n+" "+U+"分钟后开始":o.getTime()>l.getTime()&&o.getTime()<s.getTime()?"0"==a?r=i+" "+n+" "+"正在进行中...":"1"==a&&(r=n+" "+"正在进行中..."):o.getTime()>s.getTime()&&(r="活动已结束 "),r}}),n.exports=h});
define("kit/parentByProp",[],function(e,t,n){n.exports=function(e,t,n){for(var a=null;e;)if(e=e.parent()){var i=e.attr(t);if(n&&i==n||!n&&i){a=e;break}}return a}});
define("interfaces/activityNoticeInterface",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("activityInterface",{construct:function(){this._remoteInterface=new a({getActivityId:{url:"http://notice.iqiyi.com/apis/msg/activities/get_msg.action"},setActivityId:{url:"http://notice.iqiyi.com/apis/msg/activities/send_msg.action"}})},methods:{get:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"getActivityId",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})},set:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"setActivityId",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})}}})});
define("action/scrollV2",["../components/action/widget","../model/scrollModelV2","../view/scrollViewV2","../kit/eventPlugin"],function(e,t,n){var a=e("../components/action/widget"),i=e("../model/scrollModelV2"),r=e("../view/scrollViewV2"),o=e("../kit/eventPlugin"),l={};n.exports=Q.Class("ScrollV2",{extend:a,plugins:[new o],construct:function(e){e=e||{},this.disable=!1,e.model=e.model||new i(e),e.view=e.view||new r(e);var t=e.name;t&&(l[t]=this),this.callsuper(e)},statics:{getScroll:function(e){return l[e]}},properties:{events:{moving:function(e){this.fire({type:"moving",data:e.data})},private_mousemove:function(e){var t=e.data.endY-e.data.startY;t&&(this._model.moveBar(t),this.syncGet())},finishmove:function(){var e=this._model.get();this.fire({type:"finishmove",data:{margin:e.margin,rate:e.rate,dis:e.margin-this._model.startMove}})},disable:function(){this.disable=!0,this.fire({type:"disable"})},enable:function(){this.disable=!1,this.fire({type:"enable"})},mousescroll:function(e){this.scroll(-e.data.delta)}}},methods:{scroll:function(e){e&&!this.disable&&(this._model.moveBar(e),this.syncGet())},reset:function(e){e=e||{};var t=0;e.keepPos?(t=this._model.get().margin,this._model.restLength==t&&(t=9999999)):this._model.margin=0,this._model.targetLength=e.targetLength||this._view._doms.scrollContent.height(),this._model.contentLength=e.contentLength||this._view._doms.scrollWrap.height(),this._model.reset(this),this._view.init(this),e.keepPos&&this._model.moveBar(t),this._view.moveBar(this._model.get())},check:function(e){e=e||{};var t=this._model.margin||0,n=this._model.targetLength||0;this._model.targetLength=e.targetLength||this._view._doms.scrollContent.height(),this._model.contentLength=e.contentLength||this._view._doms.scrollWrap.height(),this._model.reset(this),this._view.init(this),this._model.moveBar(t*(n/this._model.targetLength)),this._view.moveBar(this._model.get())}}})});
define("model/scrollModelV2",["../components/model/model"],function(e,t,n){var a=e("../components/model/model");n.exports=Q.Class("ScrollModel",{extend:a,construct:function(e){this.callsuper(),this.contentLength=e.doms.scrollWrap.height(),this.targetLength=e.doms.scrollContent.height(),e.scrollWrapHeight&&(this.contentLength=e.scrollWrapHeight),this.dis=0,this.scrollBarLength=0,this.contentPos=0,this.moveDis=0,this.margin=0,this.maxRate=e.maxRate||2,this.minRate=e.minRate||1,this.minLength=e.minLength||50,this._data={}},methods:{init:function(e){return this.dis=this.targetLength-this.contentLength,this.dis<=0?e.notice({type:"disable"}):(e.notice({type:"enable"}),this.calc(),void 0)},get:function(){return{margin:this.margin,moveDis:this.moveDis,rate:this.rate,contentPos:this.contentPos}},calc:function(){this.scrollBarLength=this.dis<this.contentLength-this.minLength?this.contentLength-this.dis:this.minLength,this.restLength=this.contentLength-this.scrollBarLength,this.rate=this.dis/(this.contentLength-this.scrollBarLength)},moveBar:function(e){this.margin+e<=0?(this.moveDis=-this.margin,this.margin=0,this.contentPos=0):this.margin+e>=this.restLength?(this.moveDis=this.restLength-this.margin,this.margin=this.restLength,this.contentPos=-this.restLength*this.rate):(this.moveDis=e,this.margin=this.margin+e,this.contentPos=this.contentPos-e*this.rate)},reset:function(e){this.init(e),this.margin=0,this.moveDis=0,this.contentPos=0}}})});
define("view/scrollViewV2",["../components/view/widgetView","../kit/anim"],function(e,t,n){var a=e("../components/view/widgetView");e("../kit/anim"),n.exports=Q.Class("ScrollViewV2",{extend:a,construct:function(e){this.movingClass=e.movingClass||"",this.hasBindEvent=!1,this.contentMoveCss=e.contentMoveCss||"marginTop",this.disableWheel=e.disableWheel||!1,this.wheeldelta=e.wheeldelta||3,this.conRateWheel=e.conRateWheel||!1,this.movePerWheel=e.movePerWheel||10,this.cwheeldelta=e.cwheeldelta||120,this.callsuper(e),this.isScroll=!1,this._doms.widget.attr("data-class-scrolldis")&&(this.inClass=this._doms.widget.attr("data-class-scrollenable"),this.outClass=this._doms.widget.attr("data-class-scrolldis"))},methods:{init:function(e){e.disable?this._doms&&this._doms.scrollBar.css("height",0):(this.callsuper("init",e),this.scrollInfo={},this._bindEvent(),this._doms.scrollBar.css("height",e._model.scrollBarLength+"px"))},update:function(e){this.moveBar(e),this._ctrl.notice({type:"moving",data:e})},moveBar:function(e){var t=this._doms;Q.$("#pps-widget-dramalist")&&(e.margin=e.margin+15),t.scrollBar.css("marginTop",e.margin+"px"),t.scrollContent.css(this.contentMoveCss,e.contentPos+"px")},destroy:function(){this._unbindEvent()},_bindEvent:function(){if(!this.hasBindEvent){var e=this,t=this.disSelect.bind(this);e.inClass&&(e._doms.widget.on("mouseenter",function(){e._doms.scrollBar.removeClass(e.outClass),e._doms.scrollBar.addClass(e.inClass)}),e._doms.widget.on("mouseleave",function(){e.isScroll||(e._doms.scrollBar.removeClass(e.inClass),e._doms.scrollBar.addClass(e.outClass))})),Q.$(document).on("mousemove",function(t){if(e.isScroll&&!e._ctrl.disable){var n=t||window.event;e.scrollInfo.endX=n.clientX,e.scrollInfo.endY=n.clientY,e._ctrl.notice({type:"private_mousemove",data:e.scrollInfo}),e.scrollInfo.startX=n.clientX,e.scrollInfo.startY=n.clientY,Q.event.get(t).stop()}}),e._doms.scrollWrap.on("DOMMouseScroll",function(t){e.disableWheel||(e.conRateWheel?e._rateWheel(t):e._wheel(t))}),e._doms.scrollWrap.on("mousewheel",function(t){e.disableWheel||(e.conRateWheel?e._rateWheel(t):e._wheel(t))});var n,a;Q.browser.iPad&&(e._doms.scrollWrap.on("touchstart",function(e){n=e.touches[0].pageY}),e._doms.scrollWrap.on("touchmove",function(t){Q.event.get(t).preventDefault();var a=t.targetTouches[0].pageY;e._ctrl.scroll(n-a)}),e._doms.scrollBar.on("touchstart",function(e){a=e.touches[0].pageY}),e._doms.scrollBar.on("touchmove",function(t){Q.event.get(t).preventDefault();var n=t.targetTouches[0].pageY;e._ctrl.scroll(n-a)})),e._doms.scrollBar.on("mousedown",function(n){if(!e._ctrl.disable){e.isScroll=!0,e._ctrl._model.startMove=e._ctrl._model.margin,Q.$(document).on("selectstart",t),e.movingClass&&e._doms.scrollBar.addClass(e.movingClass);var a=n||window.event;e.scrollInfo.startX=a.clientX,e.scrollInfo.startY=a.clientY,e.scrollInfo.clickStartX=a.clientX,e.scrollInfo.clickStartY=a.clientY}Q.event.get(n).stop()}),e._doms.scrollBar.on("selectstart",function(e){Q.event.get(e).stop()}),Q.$(document).on("mouseup",function(n){var a=n||window.event;e.isScroll&&!e._ctrl.disable&&(e.scrollInfo.clickEndX=a.clientX,e.scrollInfo.clickEndY=a.clientY,e._ctrl.notice({type:"finishmove",data:e.scrollInfo}),e.movingClass&&e._doms.scrollBar.removeClass(e.movingClass),e.isScroll=!1,Q.$(document).un("selectstart",t),e.inClass&&(e._doms.scrollBar.removeClass(e.inClass),e._doms.scrollBar.addClass(e.outClass)))}),this.hasBindEvent=!0}},_wheel:function(e){var t=this;Q.event.get(e).preventDefault();var n=e||window.event,a=0,i=t.wheeldelta;a="Mac"==Q.browser.getOS()?n.wheelDelta?n.wheelDelta/i:0-n.detail/i:n.wheelDelta?n.wheelDelta/i:0-n.detail/i;var r=0;a&&(a>0?r="up":-0>a&&(r="down"),this._ctrl.notice({type:"mousescroll",data:{act:r,event:e,delta:a}}))},_rateWheel:function(e){var t=this;Q.event.get(e).preventDefault();var n=e||window.event,a=0,i=t.wheeldelta,r=t.cwheeldelta,o=t.movePerWheel,l=t._doms.scrollContent.height(),s=t._doms.scrollWrap.height()-t._doms.scrollBar.height(),m=s/l;a="Mac"==Q.browser.getOS()?n.wheelDelta?n.wheelDelta/r:0-n.detail/i:n.wheelDelta?n.wheelDelta/r:0-n.detail/i,a=m*o*a;var d=0;a&&(a>0?d="up":-0>a&&(d="down"),this._ctrl.notice({type:"mousescroll",data:{act:d,event:e,delta:a}}))},setWheelDelta:function(e){this.wheeldelta=e},disSelect:function(e){Q.event.get(e).preventDefault()},disable:function(){this._doms.scrollBar.hide()}}})});
define("kit/easyEventPlugin",["./eventPlugin"],function(e,t,n){var a=e("./eventPlugin");new Q.ic.InfoCenter({moduleName:"EasyEventPlugin"});var i=Q.Class("EasyEventPlugin",{extend:a,construct:function(){var e=this.on;this.on=function(t,n){var a=this;n&&e.call(a,t,function(e){return n.call(a,e.data)})};var t=this.fire;this.fire=function(e,n){t.call(this,{type:e,data:n})}}});n.exports=i});
define("units/thirdPartNoLogin",["../components/units/pageJob","../components/action/checkDoms","../components/action/floater","../components/view/floaterView","../kit/userInfo","../interfaces/thirdPartRegistInterface","../action/qipaLogin"],function(e){var t=e("../components/units/pageJob");e("../components/action/checkDoms");var n=e("../components/action/floater"),a=e("../components/view/floaterView"),i=e("../kit/userInfo"),r=e("../interfaces/thirdPartRegistInterface"),o=e("../action/qipaLogin"),l="thirdPartNoLogin",s="<div class='login-quick' style='width:462px;' data-thirdpart-message='floaterBox'><div class='login-quick-hd'><a class='pop-closeBtn' style='cursor:pointer;' data-thirdpart-message='close' rseat='1504012_4'>×</a><p class='quick-hd-tit'>登录爱奇艺，悦享品质生活</p></div><div class='login-quick-main'><div class='login-q-name'><p>您正在使用<span class='q-nameColor' data-thirdpart-message='source'></span>登录</p><p class='q-userPic'><img data-thirdpart-message='pic' src='http://www.qiyipic.com/common/fix/headicons/male-70.png'></p><p class='q-userName' data-thirdpart-message='name'></p></div><div class='login-quick-fd'><div class='q-fd-btn'><a style='cursor:pointer;' class='site-btn site-btn-green' data-thirdpart-message='login' rseat='1504012_2'>立即登录</a></div><p class='bind-emailAndPhone'><a style='cursor:pointer;' rseat='1504012_3' data-thirdpart-message='bind'>绑定手机&gt;</a></p></div></div></div>",m=null,d="http://passport.iqiyi.com/pages/thirdparty/bind_account.action",h=window.location.href,c={authcookie:i.getAuthCookies(),agent_type:1};t.create(l,{getDependentDoms:function(){},check:function(){return!0},init:function(){var e=this;Q.event.customEvent.on("thirdTypeBind",function(t){"1"==t.data.type?e.createfloater(t.data.icon,t.data.type,t.data.name):window.location.href=d+"?href="+h}),Q(document).delegate("[data-thirdpart-message=close]","click",function(){m.destroy(),m=null}),Q(document).delegate("[data-thirdpart-message=bind]","click",function(){window.location.href=d+"?href="+h}),Q(document).delegate("[data-thirdpart-message=login]","click",function(){e.floaterLogin()})},createfloater:function(e,t,i){var r=this;if(Q.$("#qipaLoginIfr")&&o.closeLoginWindow(),!m){m=new n({view:new a({isResize:!0,zIndex:4850})}),m.show({html:s}),r.pingbackShow();var l=Q.$("[data-thirdpart-message=pic]"),d=Q.$("[data-thirdpart-message=source]"),h=Q.$("[data-thirdpart-message=name]");l&&"null"!=e&&l.attr("src",e),d&&"1"==t&&d.html("百度帐号"),h&&i&&h.html(i)}},floaterLogin:function(){h.indexOf("/pages/register/index.action")>-1&&(h=-1!=h.indexOf("pps.tv")?"http://www.pps.tv/":"http://www.iqiyi.com/");var e={authcookie:i.getAuthCookies(),agent_type:1,fromurl:h},t=new r;t.login(e,function(e){window.location.href=e.data.redirect})},pingbackShow:function(){var e={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:"1504012_1"};Q.object.extend(e,c),Q.log.server(e,"http://msg.71.am/b")}}),t.add(l)});
define("interfaces/thirdPartRegistInterface",["../kit/remoteInterface","../config/siteDomain","../kit/rsa","../kit/fdlKit"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=e("../kit/rsa"),o=i.getDomain(),l=e("../kit/fdlKit");n.exports=Q.Class("thirdPartRegisterInterface",{construct:function(){this._remoteInterface=new a({mobileRegister:{url:"http://apollo."+o+"/validate"},emailRegister:{url:"https://passport.iqiyi.com/apis/thirdparty/bind_account.action"},setLogin:{url:"https://passport.iqiyi.com/apis/thirdparty/login_by_token.action"}})},methods:{mobileRegister:function(e,t){var n=this;e=e||{},e.passwd=r.rsaFun(e.passwd),e.server="BEA3AA1908656AABCCFF76582C4C6660",e.url_src="/apis/thirdparty/bind_account.action?",e.bird_src="bfc434ba2fa1457f8c42f824ff26aa7d",l.getToken(e,function(e){"A00000"===e.code?n._remoteInterface.send({dataType:"jsonp",param:e.param,ifname:"mobileRegister",cors:!0,withCredentials:!0,domain:o},function(e){t&&t(e)}):t&&t(e)})},emailRegister:function(e,t){e=e||{},e.passwd=r.rsaFun(e.passwd),this._remoteInterface.send({dataType:"jsonp",ifname:"emailRegister",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})},login:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"setLogin",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})}}})});
define("units/thirdPartyLogin",["../components/units/pageJob","../components/action/checkDoms","../kit/thirdPartLogin"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=e("../kit/thirdPartLogin"),i="thirdPartyLogin";t.create(i,{getDependentDoms:function(){return{}},check:function(){return n(this.getDependentDoms()),!0},init:function(){Q.$(document).delegate("authLoginBtn",function(e){Q.event.get(e.event).preventDefault();var t=Q.event.get(e),n=Q.$(t.target),i=n.attr("data-sourceId");if(i){var r=n.attr("href");a.show(i,r)}})},exec:function(){}}),t.add(i)});
define("kit/thirdPartLogin",["../kit/snsWindowKit","../kit/userInfo","../kit/iframeLocation","../kit/blockPingback"],function(e,t,n){function a(e){l.send("pcwtrdlgnok"),r.setIsThirdParty(!0),Q.event.customEvent.fire({type:"login",data:e}),i.close(),e&&Q.url.isUrl(e)&&setTimeout(function(){o.href(e)},1e3)}var i=e("../kit/snsWindowKit"),r=e("../kit/userInfo"),o=e("../kit/iframeLocation"),l=e("../kit/blockPingback");window.lib=window.lib||{},window.lib.__callbacks__=window.lib.__callbacks__||{};var s={_oAuthSuccess:lib.__callbacks__._oAuthSuccess||function(){},_oAuthError:lib.__callbacks__._oAuthError||function(){}};lib.__callbacks__._oAuthSuccess=function(e){if(e&&e.code&&"A00055"==e.code){var t="http://passport.iqiyi.com/apis/secure/verify_account.action";r.setIsThirdParty(!0),window.location.href=t,i.close()}else if(e&&"1"==e.newUser){var n="http://passport.iqiyi.com/pages/thirdparty/bind_account.action",o=window.location.href;window.location.href=n+"?href="+o,i.close()}else a(e),s._oAuthSuccess(e)},lib.__callbacks__._oAuthError=function(e){s._oAuthError(e)},lib.__callbacks__._bindSnsSuccess=function(e){i.close(),Q.event.customEvent.fire({type:"thirdPartSnsBinded",data:d["_"+e]})};var m={_1:"baidu",_2:"sina",_3:"renren",_4:"qweibo",_5:"zhifubao",_6:"kaixin",_30:"xiaomi",_31:"jingdong",_29:"weixin",_28:"facebook",_32:"google"},d={_1:"sina",_2:"qzone",_3:"qweibo",_4:"renren",_5:"baidu",_6:"kaixin",_7:"zhifubao",_28:"facebook",_32:"google"};n.exports={show:function(e,t){var n=m["_"+e];n?i.open(n,t):i.open(e,t)}}});
define("kit/snsWindowKit",[],function(e,t,n){var a,i={wbVeri:{w:600,h:400},sina:{w:600,h:400},weibo:{w:600,h:400},qqVeri:{w:600,h:400},qzone:{w:600,h:400},qweibo:{w:600,h:400},rrVeri:{w:420,h:320},renren:{w:420,h:320},bdVeri:{w:600,h:400},baidu:{w:600,h:400},xiaomi:{w:900,h:685},jingdong:{w:900,h:685},kaixin:{w:600,h:400},alipay_wallet:{w:600,h:400},zhifubao:{w:650,h:620},kxVeri:{w:600,h:400},weixin:{w:500,h:470},facebook:{w:900,h:685},google:{w:650,h:620}};n.exports={open:function(e,t){var n=i[e];Q.page.getViewWidth(),Q.page.getViewHeight(),n.l=window.screenX+(window.screen.width-n.w)/2,n.t=window.screenY+(window.screen.height-n.h)/2,a=window.open(t,"newwindow","height="+n.h+",width="+n.w+",top="+n.t+",left="+n.l+",toolbar=no,menubar=no,scrollbars=no, resizable=no,location=yes, status=no"),a||alert("请允许弹窗验证窗体。")},close:function(){a&&a.close()}}});
define("kit/blockPingback",[],function(e,t){t.send=function(e){var t={t:"21",pf:1,p:10,p1:101,p2:"1_10_101",jsuid:Q.cookie.get("QC005"),u:Q.cookie.get("QC005"),pu:Q.cookie.get("P00003"),block:e};Q.log.server(t,"http://msg.71.am/b")}});
define("units/userInfoCenterMailSuggest",["../components/units/pageJob","../components/action/suggestCore","../action/mailSuggest","../model/mailSuggestModel","../view/mailSuggestView","../model/staticMailSuggestModel","../components/action/input","../components/model/inputModel","../components/view/inputView","../components/action/menu","../components/model/menuModel","../components/view/menuView","../kit/accountHistory"],function(e){new Q.ic.InfoCenter({moduleName:"units/userInfoCenterMailSuggest"});var t=e("../components/units/pageJob"),n=e("../components/action/suggestCore"),a=e("../action/mailSuggest"),i=e("../model/mailSuggestModel");e("../view/mailSuggestView");var r=e("../model/staticMailSuggestModel"),o=e("../components/action/input"),l=e("../components/model/inputModel"),s=e("../components/view/inputView"),m=e("../components/action/menu"),d=e("../components/model/menuModel"),h=e("../components/view/menuView"),c=e("../kit/accountHistory"),u=function(e){return new o({model:new l,view:new s({doms:{input:e}})})},U=function(e,t){var n=(t?['<ul class="mailType-list">',"{{#items}}","{{#desc}}",'<li data-index="{{index}}" data-mailsuggest-elem="item">{{desc}}</li>',"{{/desc}}","{{#mail}}",'<li data-index="{{index}}" data-mailsuggest-elem="item" title="{{mail}}">','<span class="userLong">{{mail}}</span>',Q.browser.iPad?"":'<a href="javascript:;" j-delegate="removehistory" data-account="{{mail}}" ',Q.browser.iPad?"":'class="sEmail-closeBtn">×</a>',"</li>","{{/mail}}","{{/items}}","</ul>"]:['<ul class="mailType-list">',"{{#items}}","{{#desc}}",'<li data-index="{{index}}" data-mailsuggest-elem="item">{{desc}}</li>',"{{/desc}}","{{#mail}}",'<li data-index="{{index}}" data-mailsuggest-elem="item">{{mail}}</li>',"{{/mail}}","{{/items}}","</ul>"]).join("");return new m({model:new d,view:new h({doms:{wrapper:e},tpl:n})})},V=function(e,t,n,o,l){var s=l?new r({mails:c.get(),max:e.attr("data-mail-max")?parseInt(e.attr("data-mail-max"),10):3}):new i({mails:["qq.com","163.com","126.com","sina.com","sina.cn","hotmail.com","gmail.com","yahoo.cn","139.com"],prompt:"请选择或继续输入...",max:e.attr("data-mail-max")?parseInt(e.attr("data-mail-max"),10):4});return new a({model:s,inputObject:t,menuObject:n,referenceElement:e.attr("data-mail-refresh")?e:e.parent(),autoPos:o})},f=function(e,t,a){var i="true";t||(t=document.createElement("div"),t.className="mailType-box",document.body.insertBefore(t,null),t=Q.$(t),i="false"),Q.event.customEvent.on("hideUserCenterBox",function(){r.blur(),s.hide()}),Q.event.customEvent.on("showPlayHistoryBox",function(){r.blur(),s.hide()}),Q.event.customEvent.on("showUserCenterBox",function(){r.blur(),s.hide()}),Q.event.customEvent.on("showUpdateRecordBox",function(){r.blur(),s.hide()}),Q.event.customEvent.on("pcUserRegistLoginShow",function(){r.blur(),s.hide()}),Q.event.customEvent.on("bindAccountWrapperShow",function(){r.blur(),s.hide()}),Q.$("body").on("click",function(t){t=Q.event.get(t),t.target!=e[0]&&s.hide()}),t.on("click",function(t){if(!s.disabled){t=Q.event.get(t),t.stop();var n=Q.$(t.target);if("li"!==n[0].nodeName.toLowerCase()){if("a"===n[0].nodeName.toLowerCase())return;if(n=n.parent(),"li"!==n[0].nodeName.toLowerCase())return}var a=n.attr("data-index"),i=o.getItemByIndex(parseInt(a,10));i&&"false"!=i.canselected&&(e.value(i.mail),r.blur(),s.hide(),Q.event.customEvent.fire({type:"mailSuggestHide",data:{input:e}}))}}),t.on("mouseover",function(e){var t=Q.$(Q.event.get(e).target);if("li"===t[0].nodeName.toLowerCase()||(t=t.parent(),"li"===t[0].nodeName.toLowerCase())){var n=t.attr("data-index"),a=o.getItemByIndex(parseInt(n,10));a&&"false"!=a.canselected&&(s.disabled||s.focus(parseInt(n,10)))}});var r=u(e),o=U(t,a),l=V(e,r,o,i,a),s=new n({viewObject:l});return s.init(),a&&(l.getData("",function(e){o.redraw(e),o.hide()}),Q.event.customEvent.on("logout",function(){var e=c.get();l.setList(e)}),t.delegate("removehistory",function(e){Q.event.get(e.event).preventDefault(),c.remove(Q.$(e.target).attr("data-account")),s.viewObject._model._mails=c.get(),setTimeout(function(){r.fire({type:"focusin"}).fire({type:"input",data:{after:""}})},0)})),s};t.create("userInfoCenterMailSuggest",{check:function(){return!0},init:function(){Q.event.customEvent.on("pcUserRegDomReady",function(){}),Q.event.customEvent.on("pcUserLoginDomReady",function(e){var t=e.data.input||e.data.wrapper.down("*[data-elem=emailInput]"),n=f(t,e.data.wrapper,!0),a=f(t,e.data.wrapper),i=function(e){var i=t.value();i?(n.disable(e),a.enable(i,e)):(a.disable(e),n.enable(i,e))};a.disable();var r={13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down",9:"tab"};t.on("keydown",function(e){e=Q.event.get(e),e.keyCode+""in r||setTimeout(function(){i(!0)},50)}),a._input.on("input",function(){t.value()||i(!0)}),t.on("focus",function(){i(!0)}),Q.event.customEvent.on("pcLoginBoxShow",function(){a.show(),a.hide(),n.show(),n.hide()}),Q.event.customEvent.on("loginInputBegin",function(e){e.data.input[0]!==t[0]&&n.hide()})})},exec:function(){}}),t.add("userInfoCenterMailSuggest")});
define("components/action/suggestCore",["./nonMVCWidget"],function(e,t,n){var a=e("./nonMVCWidget");n.exports=Q.Class("SuggestCore",{extend:a,construct:function(e){e=e||{},this.callsuper(e),this.viewObject=e.viewObject,this._input=this.viewObject.getInput(),this._menu=this.viewObject.getMenu()},methods:{init:function(){this.initEvt()},bind:function(e,t,n){this._binds=this._binds||[],e.on(t,n),this._binds.push({elem:e,event:t,callback:n})},enable:function(e,t){this.disabled&&this.initEvt();var n=this;return this.viewObject.getData(e,function(e){n._menu.redraw(e),t&&n.show(),n.disabled=!1}),this},disable:function(e){return e&&this.hide(),this.disabled?this:(this._binds&&(this._binds.forEach(function(e){e.elem.un(e.event,e.callback)}),this.disabled=!0),this)},initEvt:function(){this.bind(this._input,"up",this.prev.bind(this)),this.bind(this._input,"down",this.next.bind(this)),this.bind(this._input,"esc",this.hide.bind(this)),this.bind(this._input,"enter",this.apply.bind(this)),this.bind(this._input,"input",this.input.bind(this)),this.bind(this._input,"tab",this.hide.bind(this)),this.bind(this._input,"focusin",this.show.bind(this)),this.bind(this._menu,"selected",this.selected.bind(this))},show:function(){this.viewObject.show()},hide:function(){this.viewObject.hide()},apply:function(e){Q.event.get(e.data.evt).stop(),this._menu.apply(),this._input.blur()},prev:function(e){Q.event.get(e.data.evt).stop(),this._menu.prev()},next:function(e){Q.event.get(e.data.evt).stop(),this._menu.next()},focus:function(e){return this.disabled?this:(this._menu.focus(e),void 0)},selected:function(e){this.viewObject.focus(e.data)},input:function(e){var t=this;this.viewObject.input(e.data)&&this.viewObject.getData(e.data.after,function(e){t._menu.redraw(e)})}}})});
define("action/mailSuggest",["../components/action/widget","../model/mailSuggestModel","../view/mailSuggestView"],function(e,t,n){var a=e("../components/action/widget"),i=e("../model/mailSuggestModel"),r=e("../view/mailSuggestView");n.exports=Q.Class("MailSuggest",{extend:a,construct:function(e){e=e||{},e.model=e.model||new i,e.view=e.view||new r(e),this.callsuper(e)},methods:{focus:function(e){this._view.focus(e)},input:function(){return!0},getData:function(e,t){var n=this._model.set({curStr:e});t(n.cacheData)},show:function(){this._view.show()},hide:function(){this._view.hide()},getInput:function(){return this._view._input},getMenu:function(){return this._view._menu},fixPos:function(){this._view.fixPos()},setList:function(){this._model.setList&&this._model.setList.apply(this._model,arguments)}}})});
define("model/mailSuggestModel",["../components/model/model"],function(e,t,n){var a=e("../components/model/model");n.exports=Q.Class("MailSuggestModel",{extend:a,construct:function(e){e=e||{},this.callsuper(e),this._mails=e.mails||[],this._max=e.max||0,this._prompt=e.prompt||"",this._data.curStr=""},methods:{set:function(e){return this.callsuper("set",e),this.assemble(this.parseMail()),this._data},parseMail:function(){var e=this._mails.concat(),t=this._data.curStr.match(/(@)(.*)/);return t&&t[2]&&(e=e.filter(function(e){return e.indexOf(t[2])>-1})),this._max&&e.length>this._max&&(e.length=this._max),e},assemble:function(e){var t=e.concat(),n=this._data.curStr.replace(/@.*/,"");t.length&&(t=t.map(function(e){return{mail:n+"@"+e,canselected:"true"}}),this._data.curStr&&this._data.curStr!=t[0].mail&&t.unshift({mail:this._data.curStr,canselected:"true"}),this._prompt&&t.unshift({desc:this._prompt,canselected:"false"}),t.forEach(function(e,t){e.index=t})),this._data.cacheData=t}}})});
define("view/mailSuggestView",["../components/view/widgetView"],function(e,t,n){var a=e("../components/view/widgetView");n.exports=Q.Class("MailSuggestView",{extend:a,construct:function(e){this._input=e.inputObject,this._menu=e.menuObject,this._reference=e.referenceElement||this._input.getDom(),this.autoPos=e.autoPos||"false"},methods:{init:function(e){this.callsuper("init",e)},update:function(){},focus:function(e){var t=this,n=this._menu.getDom().down("*[data-mailsuggest-elem=item]");n.removeClass("selected"),n.forEach(function(a,i){i==e.index&&(Q.$(n[i]).addClass("selected"),"refresh"!=e.ctrl&&"focus"!==e.ctrl&&t._input.val(e.item.mail))}),"apply"==e.ctrl&&(this.hide(),Q.event.customEvent.fire({type:"mailSuggestHide",data:{input:t._input.getDom()}}))},show:function(){return this._show?!1:("false"===this.autoPos?this._menu.show(this.getPosotion()):"true"===this.autoPos&&this._menu.show({}),this._show=!0,void 0)},hide:function(){if(!this._show)return!1;var e=this;e._menu.hide(),e._show=!1},fixPos:function(){this._menu.pos(this.getPosotion())},getPosotion:function(){var e=this._reference,t=e.getPosition(),n=e.width(),a=e.height(),i=function(){for(var t,n,a=e;a[0]!==document.body;)n=parseInt(a.css("zIndex"),10),!isNaN(n)&&(void 0===t||n>t)&&(t=n),a=a.parent();return t}();return{width:n+"px",zIndex:(i||0)+1,top:t.top+a+"px",left:t.left+"px",position:"absolute"}}}})});
define("model/staticMailSuggestModel",["../components/model/model"],function(e,t,n){var a=e("../components/model/model");n.exports=Q.Class("StaticMailSuggestModel",{extend:a,construct:function(e){e=e||{},this.callsuper(e),this._mails=e.mails||[],this._max=e.max||0,this._prompt=e.prompt||"",this._data.curStr=""},methods:{set:function(e){return this.callsuper("set",e),this.assemble(this.parseMail()),this._data},setList:function(e){this._mails=e},parseMail:function(){var e=this,t=this._mails.slice().filter(function(t){return!e._data.curStr||0===t.indexOf(e._data.curStr)});return this.max&&(t=t.slice(0,this.max)),t},assemble:function(e){var t=e.concat();t.length&&(t=t.map(function(e){return{mail:e,canselected:"true"}}),this._prompt&&t.unshift({desc:this._prompt,canselected:"false"}),t.forEach(function(e,t){e.index=t})),this._data.cacheData=t}}})});
define("components/action/input",["./widget","../../kit/eventPlugin"],function(e,t,n){var a=e("./widget"),i=e("../../kit/eventPlugin");n.exports=Q.Class("input",{extend:a,plugins:[new i],construct:function(e){e=e||{},this.callsuper(e)},properties:{events:{ctrlKey:function(e){this.fire({type:e.data.key,data:{evt:e.data.evt}})},checkInput:function(e){var t=this._model.get().cacheStr,n=this.compareValue(t,e.text);n||(this._model.set({cacheStr:e.text}),this._fireInput(t,e.text))},focusout:function(e){this.fire({type:"focusout",data:{evt:e.data.evt}})},focusin:function(e){this.fire({type:"focusin",data:{evt:e.data.evt}})}}},methods:{_fireInput:function(e,t){this.fire({type:"input",data:{before:e,after:t}})},val:function(e){return arguments.length&&this.syncSet({cacheStr:e}),this._model.get().cacheStr},compareValue:function(e,t){return!(e!==t)},getDom:function(){return this._view.getDom()},blur:function(){this.getDom()[0].blur()}}})});
define("components/model/inputModel",["./model"],function(e,t,n){var a=e("./model");n.exports=Q.Class("inputModel",{extend:a,construct:function(e){e=e||{},this._data={cacheStr:e.defaultStr||""}}})});
define("components/view/inputView",["./widgetView"],function(e,t,n){var a=e("./widgetView");new Q.ic.InfoCenter({moduleName:"inputView"}),n.exports=Q.Class("inputView",{extend:a,construct:function(e){this.callsuper(e),this._keyMap={_13:"enter",_27:"esc",_37:"left",_38:"up",_39:"right",_40:"down",_9:"tab"},this.checkValueTimerId=null,this.checkDelay=e.checkDelay||250},methods:{init:function(e){this.callsuper("init",e),this._initEvt()},update:function(e){this._doms.input.value(e.cacheStr)},_initEvt:function(){var e=this,t=this._doms.input;t.on("keydown",function(t){var n=Q.event.get(t),a=e._checkRegType(n);if(!a)return!1;e.checkValueTimerId&&clearInterval(e.checkValueTimerId);var i=e._keyMap["_"+t.keyCode];i?e._ctrl.notice({type:"ctrlKey",data:{key:i,evt:t}}):e.checkValueTimerId=setInterval(e._checkValue.bind(e),e.checkDelay)}),t.on("focus",function(t){var n=Q.event.get(t),a=e._checkRegType(n);return a?(e.checkValueTimerId&&clearInterval(e.checkValueTimerId),e.checkValueTimerId=setInterval(e._checkValue.bind(e),e.checkDelay),e._ctrl.notice({type:"focusin",data:{evt:t}}),void 0):!1}),t.on("blur",function(t){clearInterval(e.checkValueTimerId),e._ctrl.notice({type:"focusout",data:{evt:t}})})},_checkValue:function(){this._ctrl.notice({type:"checkInput",text:this._doms.input.value()})},getDom:function(){return this._doms.input},_checkRegType:function(e){var t=!0,n=Q(e.target).parents("tr");if(n.length>0){var a=n.attr("data-type");"phone"===a&&(t=!1)}return t}}})});
define("components/action/menu",["./widget","../../kit/eventPlugin"],function(e,t,n){var a=e("./widget"),i=e("../../kit/eventPlugin");n.exports=Q.Class("Menu",{extend:a,plugins:[new i],construct:function(e){e=e||{},this.callsuper(e)},properties:{events:{pre:function(){this.pre()},next:function(){this.next()},selected:function(e){this.fire({type:"selected",data:e.data})}}},methods:{init:function(){this.syncSet({ctrl:"refresh"})},prev:function(){this._model.prev(),this.syncGet()},next:function(){this._model.next(),this.syncGet()},focus:function(e){this._model.focus(e),this.syncGet()},redraw:function(e){this._model.refresh(e),this.syncGet()},show:function(e){this._view.setStyle(e),this.syncSet({ctrl:"show"})},hide:function(e){this._view.setStyle(e),this.syncSet({ctrl:"hide"})},apply:function(){this.syncSet({ctrl:"apply"})},pos:function(e){this._view.setStyle(e)},getDom:function(){return this._view._doms.wrapper},getItemByIndex:function(e){return this._model.get().data[e]}}})});
define("components/model/menuModel",["./model"],function(e,t,n){var a=e("./model");n.exports=Q.Class("MenuModel",{extend:a,construct:function(e){e=e||{},this._data={focus:-1,total:(e.datas||[]).length,data:e.datas||[],item:null,ctrl:"apply"}},methods:{prev:function(){if(this._data.total){var e=arguments,t=this._data.focus;if(t>-1){var n=t-1;t=0>n?this._data.total-1:n}else t=0;this._data.focus=t,this._data.item=this._data.data[t],this._data.ctrl="prev","false"===this._data.item.canselected&&e.callee.call(this)}},next:function(){if(this._data.total){var e=arguments,t=this._data.focus;if(t>-1){var n=t+1;t=n>=this._data.total?0:n}else t=0;this._data.focus=t,this._data.item=this._data.data[t],this._data.ctrl="next","false"===this._data.item.canselected&&e.callee.call(this)}},focus:function(e){if(this._data.total){var t=arguments;e%=this._data.total,0>e&&(e+=this._data.total),this._data.focus=e,this._data.item=this._data.data[e],this._data.ctrl="focus","false"===this._data.item.canselected&&t.callee.call(this)}},refresh:function(e){this._data.total=e.length,this._data.data=e,e.length?(this._data.focus=0,this._data.item=e[0],"false"===this._data.item.canselected&&this.next()):(this._data.focus=-1,this._data.item=null),this._data.ctrl="refresh"}}})});
define("components/view/menuView",["./widgetView"],function(e,t,n){var a=e("./widgetView");new Q.ic.InfoCenter({moduleName:"MenuView"}),n.exports=Q.Class("MenuView",{extend:a,construct:function(e){this.callsuper(e),this._tpl=e.tpl||""},methods:{update:function(e){"refresh"==e.ctrl&&this.draw(e.data),"prev"!=e.ctrl&&"next"!=e.ctrl&&"apply"!=e.ctrl&&"refresh"!=e.ctrl&&"focus"!=e.ctrl||!e.data.length||this._ctrl.notice({type:"selected",data:{index:e.focus,item:e.item,data:e.data,ctrl:e.ctrl}}),"show"==e.ctrl&&this.show(e.data),"hide"==e.ctrl&&this.hide(e.data)},draw:function(e){this._doms.wrapper.html(Q.plugins.Mustache.render(this._tpl,{items:e})),e.length?this.show(e):this.hide(e)},show:function(e){e.length&&this._doms.wrapper.css("display","")},hide:function(){this._doms.wrapper.css("display","none")},setStyle:function(e){for(var t in e)this._doms.wrapper.css(t,e[t])}}})});
define("kit/accountHistory",["./userInfo","./validate"],function(e,t,n){var a=e("./userInfo"),i=e("./validate"),r="QC116",o=3,l=31536e6,s=function(){return(Q.cookie.get(r)||"").split("|").filter(function(e){return e})},d=function(e){Q.cookie.set(r,e.slice(0,o).join("|"),{path:"/",domain:"iqiyi.com",expires:l})},m=function(e){if(!a.getIsThirdParty()||i.empty(e)){h(e);var t=s();t.unshift(e),d(t)}},h=function(e){var t,n=s();(t=n.indexOf(e))>=0&&(n.splice(t,1),d(n))};Q.event.customEvent.on("login",function(e){if("login"==e.type&&e.data&&"registed"!=e.data.type){var t=e.data&&e.data._loginName;t||(t=a.getEmail()),m(t)}}),Q.event.customEvent.on("registed",function(e){if("registed"==e.type){var t=e.data&&e.data._loginName;m(t)}}),n.exports={get:s,add:m,remove:h}});
define("units/suggest",["../components/units/pageJob","../components/action/checkDoms","../widgets/searchsuggest/searchSuggest","../widgets/searchsuggest/simpleSearchSuggest","../widgets/searchsuggest/ppsSearchSuggest","../widgets/searchsuggest/mall/mallSearchSuggest","../widgets/searchinput/searchInput","../kit/getSuggestConfig","../kit/userInfo","../kit/parentByProp","../kit/anim","../interfaces/locationInterface","../kit/responsive","../interfaces/getDownloadUrlInterface","../interfaces/searchIptPersonalise","../config/siteDomain"],function(e){var t=e("../components/units/pageJob"),n=e("../components/action/checkDoms"),a=e("../widgets/searchsuggest/searchSuggest"),i=e("../widgets/searchsuggest/simpleSearchSuggest"),r=e("../widgets/searchsuggest/ppsSearchSuggest"),o=e("../widgets/searchsuggest/mall/mallSearchSuggest"),s=e("../widgets/searchinput/searchInput"),l=e("../kit/getSuggestConfig"),d=e("../kit/userInfo");e("../kit/parentByProp");var m=e("../kit/anim"),h=new(e("../interfaces/locationInterface")),c=e("../kit/responsive"),u=e("../interfaces/getDownloadUrlInterface"),U=e("../interfaces/searchIptPersonalise"),V=e("../config/siteDomain"),f="suggest",p=Q.$("[data-widget-suggest=suggest]")||"",g=null;t.create(f,{getDependentDoms:function(){return p&&p.length>0&&(g=[],p.forEach(function(e){e=Q.$(e),g.push({widget:e,input:e.down("[data-suggest-elem=input]")})})),g},check:function(e){return e&&e.forEach(function(e){n(e)}),!0},handleSuggest:function(){var e=this,t=(Q.cookie.get("QC005")||"").toUpperCase(),n=t.substr(t.length-1),a=Q.url.parse(window.location.href);"0"!=n&&"5"!=n&&"9"!=n||"www.iqiyi.com"!=a.host||"/"!=a.path?e.initSuggest(!1):h.request(function(t){var n=t.province,a=t.city;"北京"!=n&&"上海"!=n&&"广州"!=a?e.initSuggest(!0):e.initSuggest(!1)})},initSuggest:function(e){var t=Q.event.customEvent,n="dn";g.forEach(function(d,h){var U=d.widget,V=U.down("[data-suggest-elem=body]"),f=U.down("[data-suggest-elem=list]"),p=U.down("[data-suggest-elem=historylist]"),g=U.down("[data-suggest-elem=btn]"),y=U.down("[data-suggest-elem=form]"),b=U.down("[data-suggest-elem=container]")||U;try{var v='{"call_type":"request", "cmd":"get_app_ver", "cmd_context":"", "cmd_data":""}',k=JSON.parse(window.external.js_app_service(v));if(parseFloat(k.cmd_data.ver.split(".").join(""))>=38152253)return Q.$(".mod_search_header").hide(),void 0}catch(x){}Q.browser.iPad&&d.input.removeAttr("autocomplete"),d.form=y,d.btn=g,d.container=b;var L={doms:d};if(V&&f){d.body=V,d.list=f,d.historylist=p,L.doms=d,L.simple=e,Q.object.extend(L,l(U,0,h));var w=a;L.nospecshow&&(w=i),L.pps&&(w=r),"iqiyi-mall"==L.site&&(w=o),delete L.nospecshow;var _=new w(L);_.init(),window.searchSuggestInited=!0,_.on("show",function(){t.fire({type:"suggestShow",data:{}})});var W=["navOneShow","updateRecordsShow","hideHeaderBoxFromVipHeader","playHistoryShow","showUserCenterBox","pcLoginBoxShow"];W.forEach(function(e){t.on(e,function(){var e={visible:!1},t=_.input.syncGet();"none"!=U.css("display")&&(e.focusIn=!1,t.value||(e.autoFill=!0)),_.syncSet(e)})});var X=U.down("[data-suggest-elem=soguide]"),I=1,K=300;if(X){var C=X.down(".tip_content"),E=function(){var e=864e5,t=I;t=parseInt(Q.cookie.get("QC140")||0,10)+1,Q.cookie.set("QC140",t,{expires:e,path:"/",domain:"iqiyi.com"}),new m({elem:Q.$(X.children()[0]),style:"height",from:38,to:0,ease:"Linear",duration:K,done:function(){X.addClass(n)}})},J=function(){function e(){X.hasClass(n)&&parseInt(Q.cookie.get("QC140")||0,10)<I&&(X.removeClass(n),new m({elem:Q.$(X.children()[0]),style:"height",from:0,to:38,ease:"Linear",duration:K}))}function t(){if(Q.PageInfo&&Q.PageInfo.respInfo){var e=Q.PageInfo.respInfo.cnf[Q.PageInfo.respInfo.curLayout];"qypage-980"===e.cls?C.html("使Mac客户端，看片更有范！"):C.html("使用Mac客户端，拒绝卡顿、发热，看片更有范！")}else"qypage-980"===document.body.className&&C.html("使Mac客户端，看片更有范！");setTimeout(function(){E(!0)},6e3)}"Mac"==Q.browser.getOS()&&(t(),c.on("bodyClassChange",function(){t()}),e())};X.delegate("close",function(){E(!0)}),X.delegate("getDownloadUrl",function(e){var t=Q.event.get(e.event);t.preventDefault();var n={pubarea:X.down("[j-delegate=getDownloadUrl]").attr("pubarea"),srcchannel:document.referrer},a=u.getDownloadUrl(n);window.location.href=a}),J()}}else{var S=new s(Q.object.extend(L,l(U,1,h)));S.init()}})},init:function(){if(p){var e=this,t=p.down('[data-widget-suggest="hotList"]')||"";t?(new U).request({"if":"defaultQuery",response_type:2,platform:14,is_qipu_platform:1,u:Q.cookie.get("QC005")||"",pu:d.getUid()||""},function(n){if("A00000"==n.code){var a="",i=n.data||"";i&&(i.forEach(function(e){a=a+"<a title="+e.query+" href="+e.url+' target="_blank" style="display:none;" data-suggest-elem="keyword"></a>'}),Q(t).empty().append(a),e.handleSuggest())}else e.handleSuggest()}):e.handleSuggest(),e.bindEvent()}},bindEvent:function(){Q.$(document).delegate("clearSearchRecord",function(){Q.event.customEvent.fire({type:"searchRecordClear",data:{}}),Q.cookie.remove("QC021",{path:"/",domain:V.SITE_DOMAIN})})}}),t.add(f)});
define("widgets/searchsuggest/searchSuggest",["../../action/suggest","./searchSuggestModel","./searchSuggestView","./searchSuggestListModel","./searchSuggestList","../../kit/getSearchUrl","../../action/form","../../kit/userInfo"],function(e,t,n){var a=e("../../action/suggest"),i=e("./searchSuggestModel"),r=e("./searchSuggestView"),o=e("./searchSuggestListModel"),s=e("./searchSuggestList"),l=e("../../kit/getSearchUrl"),d=e("../../action/form"),m=e("../../kit/userInfo"),h="input";n.exports=Q.Class("SearchSuggest",{extend:a,construct:function(e){var t=e.doms,n=t.form,a=t.list,o=t.historylist,l=e.maxCount,m=e.maxSearchHistoryCount,h=e.searchTarget,c=e.suggestTarget,u=e.layout,U=e.responsive,V=e.pps,f=e.searchType,p=e.from;n&&(this.form=new d({doms:{form:n}}),this.form.init());var g=t.input.value();this.keyWords=e.keyWords,this.userValue=g,g?(e.defaultValue=g,this._inputValue=!0):(e.defaultValue=g||this._selectKeyWord(e.keyWords).value,this._inputValue=!1),e.body||(e.body=new s({doms:{list:a,historylist:o},maxCount:l,maxSearchHistoryCount:m,searchTarget:h,layout:u,vvfrom:e.vvfrom,suggestTarget:c,responsive:U,searchType:f,from:p,pps:V,simple:e.simple})),e.model=new i(e),e.view||(e.view=new r(e)),this.callsuper(e)},methods:{init:function(){this._setForm(),this.callsuper("init"),this.initSearchInput();var e=this;Q.event.customEvent.on("changeInputType",function(t){h=t.data.inputType,e._setForm()})},fini:function(){this.form&&this.form.fini(),this.callsuper("fini")},initSearchInput:function(){if(this._inputValue){this.syncSet({autoFill:!1,inputValue:this._inputValue});var e=this.input;e._view._setTextRange(),this.checkUserValueInKeyWord(this.keyWords,this.userValue)||(this.syncSet({visible:!0}),e._model.get().likePlaceHolder=!1,this._setForm(),this.callsuper("onFocusIn"),e._view._setFocusBg(!0))}},syncSet:function(e){e.visible===!1&&this.syncGet().visible&&this.fire({type:"hide",data:{}}),void 0!==e.focusIn&&(this.input.syncSet({focusIn:e.focusIn}),delete e.focusIn),e.autoFill&&(this.input.syncSet({value:this._selectKeyWord(this._model.get().keyWords).value.trim(),autoFill:!0}),delete e.autoFill),e.inputValue&&this.input.syncSet({autoFill:!1}),this.callsuper("syncSet",e)},getLinkInfo:function(e){var t,n=!1,a=this,i=a._model.get(),r=i.body,s=a.input.syncGet(),d=s.value,m=l(d,i.searchType,h,i.from,e),c=i.searchTarget;if(s.autoFill&&!a._inputValue){var u=i.keyWords.list[i.keyWords.curSn];if(m=u.href){var U=m.lastIndexOf("?");if(-1==U)m+="?source=default";else{var V=m.substring(0,U),f=m.substring(U+1);f.length>0&&(f="&"+f),m=V+"?source=default"+f}}c=u.target,m||(m=l(u.value,i.searchType,h,i.from),c=i.searchTarget)}if(r&&(r=r._model,r.data&&r.data.isZhidahaoSuggest))if(r&&r.data&&Q.array.isArray(r.data.itemsData)&&void 0!==r.data.curSn){if(n=!0,r.data.curSn>-1)t=a.form.syncGet(),m=t.action||"",c="_blank";else for(var p=0,g=r.data.itemsData;p<g.length;p++)if(d.slice(1)===g[p].name){m=g[p].link||m,c="_blank";break}}else n=!1;return this.form.syncSet({isZhidahaoSuggest:o.isZhidahaoSuggest(d),zhidaohaoDataReady:n}),{isZhidahaoSuggest:o.isZhidahaoSuggest(d),zhidaohaoDataReady:n,href:m,target:c}},_selectKeyWord:function(e){for(var t=e.list,n=Math.floor(Math.random()*t.length),a=0;a<t.length;a++)if(t[a].selected){n=a;break}return e.curSn=n,t[n].selected=!0,t[n]},checkUserValueInKeyWord:function(e,t){for(var n=e.list,a=0;a<n.length;a++)if(n[a].value===t)return!0;return!1},_setForm:function(e){var t=this.form;if(t)if(e)t.syncSet({action:e.formatData.href,target:e.formatData.target,valid:!0});else if(this.input.syncGet().value){var n=this.getLinkInfo();t.syncSet({action:n.href,target:n.target,valid:!0})}else t.syncSet({valid:!1})},onValueChange:function(e){this._setForm(),this.callsuper("onValueChange",e)},onFocusIn:function(e){var t=this.input,n=t.syncGet();n.autoFill&&n.focusInClear&&t.syncSet({value:"",autoFill:!1}),this._setForm(),this.callsuper("onFocusIn",e)},onFocusOut:function(e){var t=this.input,n=t.syncGet();n.value||t.syncSet({value:this._selectKeyWord(this._model.get().keyWords).value.trim(),autoFill:!0}),this._setForm(),this.callsuper("onFocusOut",e)},onHide:function(){var e=this.body,t=e.syncGet();t.items&&t.items.length&&e.syncSet({curSn:-1}),this._setForm()},onItemSel:function(){this._setForm()},_doSendPingback:function(){try{var e=this.body.syncGet(),t=e.curSn,n=e.items[t].syncGet(),a=n.data,i=n.formatData.href,r="3-1";if("so.iqiyi.com"!=Q.url.parse(i).host&&(r="3-2"),a.name){var o={t:5,pf:1,p:10,p1:101,c1:a.cid||"",s1:1,s2:6,e:a.event_id,r:6,u:Q.cookie.get("QC005"),pu:m.getUid(),a:0,rn:Math.floor((new Date).getTime()*Math.random()),pos:n.pos,ptype:r,target:encodeURIComponent(a.name),keyword:encodeURIComponent(n.key)},s=[];for(var l in o)s.push(l+"="+o[l]);var d="http://msg.iqiyi.com/b?"+s.join("&"),h=new Image;h.src=d}}catch(c){}},onSubmit:function(e){this._doSendPingback();var t=Q.$(e.data.target).attr("type").toUpperCase(),n=e.data.type.toUpperCase(),a=this.form,i=this.input.syncGet(),r=this.body.syncGet(),o="";if(r.isZhidahaoSuggest&&Q.array.isArray(r.itemsData)){for(var s=0,l=r.itemsData;s<l.length;s++)if(i.value.slice(1)===l[s].name){o=l[s].link;break}o&&a.syncSet({action:o,target:"_blank"})}var d=r.items[r.curSn];if(Q.event.customEvent.fire({type:"wholeNetSearch",data:{}}),!a||"BUTTON"==t&&"CLICK"==n){var m=null;if(d&&i.focusIn){var h=d.syncGet();m=h.formatData.href,"_self"==h.formatData.target?window.location.href=m:window.open(m)}else if(i.value){var c="",u=i.value,U=this.body._model._data&&this.body._model._data.itemsData;U&&U.forEach(function(e){e.name==u&&(c=e.aid)});var V=this.getLinkInfo(c);m=V.href,"_self"==V.target?window.location.href=m:window.open(m)}}},onKeyDown:function(e){var t=e.data.keyCode,n=null,a=null;if(37==t?(n=1,a=-1):39==t?(n=1,a=1):38==t?(n=0,a=-1):40==t&&(n=0,a=1),null!==a&&null!==n){var i=this.body,r=i.syncGet(),o=r.isZhidahaoSuggest,s=r.curSn,l=null,d=null,m="";if(0===n){var h=r.items.length;s>=0&&h>s||(s=a>0?-1:0),s=(s+a+h)%h,i.syncSet({curSn:s}),l=r.items[s],l&&(l.syncSet({curSn:-1}),d=l.syncGet(),o&&(m+="@"),m+=d.formatData.name.trim(),d.key=m,this.input.syncSet({value:m,autoFill:!1}),this._setForm(d),e.data.preventDefault())}else if(l=r.items[r.curSn]){d=l.syncGet();var c=d.formatData.len;s=d.curSn,void 0!==c&&void 0!==s&&c>0&&(s>=0&&c>s||(s=a>0?-1:0),s=(s+a+c)%c,l.syncSet({curSn:s}),this._setForm(l.syncGet()),e.data.preventDefault())}}}},properties:{events:{onHoverOver:function(){this._model.set({hoverOver:!0})},onHoverOut:function(){this._model.set({hoverOver:!1}),this.input.syncGet().focusIn&&!Q.browser.iPad||!this.syncGet().visible||(Q.browser.iPad&&this.input.syncGet().focusIn?this.input._view._doms.input[0].blur():(this.syncSet({visible:!1}),this.fire({type:"hide",data:{}})))},onHoverOverBtn:function(){!this.input.syncGet().focusIn&&this.syncGet().visible&&(this.syncSet({visible:!1}),this.fire({type:"hide",data:{}}))}}}})});
define("action/suggest",["../components/action/widget","../view/suggestView","../model/listModel","../action/list","../action/input","../kit/eventPlugin","../kit/responsive"],function(e,t,n){var a=e("../components/action/widget"),i=e("../view/suggestView"),r=e("../model/listModel"),o=e("../action/list"),s=e("../action/input"),l=e("../kit/eventPlugin"),d=e("../kit/responsive"),m={};n.exports=Q.Class("Suggest",{extend:a,plugins:[new l],construct:function(e){var t=e.doms,n=t.btn,a=t.input,l=t.container,d=e.hoverCls,h=e.focusCls,c=e.defaultValue,u=e.focusInClear,U=e.likePlaceHolder,V=e.focusIn,f=e.focusBg,p=e.placeHolderColor,g=t.list;this.body=e.body?e.body:new o({doms:{list:g}}),this.body.init(),this.input=e.input?e.input:new s({doms:{input:a,btn:n,container:l},defaultValue:c,hoverCls:d,focusIn:V,focusCls:h,focusInClear:u,likePlaceHolder:U,focusBg:f,placeHolderColor:p}),this.input.init(),e.model=e.model||new r(e),e.view=e.view||new i(e);var y=e.name;y&&(m[y]?m[y].push(this):m[y]=[this]);var b=this;Q.$(window).on("blur",function(){b.syncGet().visible&&b.syncSet({visible:!1})}),this.callsuper(e)},statics:{getSuggest:function(e){return m[e]}},methods:{init:function(){this.bindEvents()},fini:function(){this.body.fini(),this.input.fini(),this._view.fini(),this.unbindEvents()},syncGet:function(e){return this._model.get(e)},syncSet:function(e){this._view.update(this._model.set(e))},onSubmit:function(){},onKeyDown:function(){},onFocusIn:function(){this.body.asyncGet({key:this.input.syncGet().value})},onFocusOut:function(){!this._model.get().hoverOver&&this.syncGet().visible&&(this.syncSet({visible:!1}),this.fire({type:"hide",data:{}}))},onValueChange:function(e){this.body.asyncGet({key:e.data.value})},onSizeChange:function(){this._view.update({sizeChange:!0})},onListReady:function(e){var t=this.syncGet().visible,n=!1;e.data.count>0&&(this.input.syncGet().focusIn||t)&&(n=!0),n!=t&&(this.syncSet({visible:n}),n?this.fire({type:"show",data:{}}):this.fire({type:"hide",data:{}}))},onItemSel:function(){},onLayoutChange:function(){this.syncSet({visible:!1}),this.body.syncSet({itemsData:[]})},onShow:function(){},onHide:function(){},bindEvents:function(){var e=this.input,t=this.body;this._focusInHandler||(this._focusInHandler=this.onFocusIn.bind(this)),this._focusOutHandler||(this._focusOutHandler=this.onFocusOut.bind(this)),this._valueChangeHandler||(this._valueChangeHandler=this.onValueChange.bind(this)),this._keyDownHandler||(this._keyDownHandler=this.onKeyDown.bind(this)),this._submitHandler||(this._submitHandler=this.onSubmit.bind(this)),this._sizeChangeHandler||(this._sizeChangeHandler=this.onSizeChange.bind(this)),this._listReadyHandler||(this._listReadyHandler=this.onListReady.bind(this)),this._itemSelHandler||(this._itemSelHandler=this.onItemSel.bind(this)),this._layoutChangeHandler||(this._layoutChangeHandler=this.onLayoutChange.bind(this)),this._showHandler||(this._showHandler=this.onShow.bind(this)),this._hideHandler||(this._hideHandler=this.onHide.bind(this)),e.on("focusIn",this._focusInHandler),e.on("focusOut",this._focusOutHandler),e.on("valueChange",this._valueChangeHandler),e.on("keyDown",this._keyDownHandler),e.on("submit",this._submitHandler),t.on("sizeChange",this._sizeChangeHandler),t.on("listReady",this._listReadyHandler),t.on("selItem",this._itemSelHandler),d.addListener(this._layoutChangeHandler),this.on("show",this._showHandler),this.on("hide",this._hideHandler);var n=this;Q.event.customEvent.on("searchRecordClear",function(){n.syncSet({visible:!1}),n.fire({type:"hide",data:{}})})},unbindEvents:function(){var e=this.body,t=this.input;this._focusInHandler&&t.un("focusIn",this._focusInHandler),this._focusOutHandler&&t.un("focusOut",this._focusOutHandler),this._onValueChangeHandler&&t.un("valueChange",this._valueChangeHandler),this._keyDownHandler&&t.un("keyDown",this._keyDownHandler),this._submitHandler&&t.un("submit",this._submitHandler),this._sizeChangeHandler&&e.un("sizeChange",this._sizeChangeHandler),this._listReadyHandler&&e.un("listReady",this._listReadyHandler),this._itemSelHandler&&e.un("selItem",this._itemSelHandler),this._showHandler&&this.un("show",this._showHandler),this._hideHandler&&this.un("hide",this._hideHandler)}},properties:{events:{onHoverOver:function(){this._model.set({hoverOver:!0})},onHoverOut:function(){this._model.set({hoverOver:!1}),!this.input.syncGet().focusIn&&this.syncGet().visible&&(this.syncSet({visible:!1}),this.fire({type:"hide",data:{}}))}}}})});
define("view/suggestView",["../components/view/widgetView","../action/underframe","../kit/getBindTool"],function(e,t,n){var a=e("../components/view/widgetView"),i=e("../action/underframe"),r=e("../kit/getBindTool");n.exports=Q.Class("SuggestView",{extend:a,construct:function(e){this.callsuper(e)},methods:{init:function(e){this._ctrl=e,this.update(e._model.get()),this.bindEvents()},update:function(e){this._setVisible(e.visible),e.sizeChange&&this._setUnderFrame()},_setVisible:function(e){if(void 0!==e&&this._visible!=e){this._visible=e;var t=this._doms.body;e?t.show():t.hide(),this._setUnderFrame()}},_setUnderFrame:function(){if(this._needUnderFrame())if(this._visible){if(!this._underFrame){var e=this._doms;this._underFrame=new i({elem:e.body,target:e.widget})}this._underFrame.show()}else this._underFrame&&this._underFrame.hide()},_needUnderFrame:function(){for(var e=!1,t=this._ctrl._model.get().ufBrowsers,n=0;n<t.length;n++)if(Q.browser[t[n]]){e=!0;break}return e},onHoverOver:function(){this._ctrl.notice({type:"onHoverOver",data:{}})},onHoverOut:function(e){if(e=Q.event.get(e),Q.browser.iPad){var t=Q.$(e.target);if(!t||this._doms.widget.contains(t))return}this._ctrl.notice({type:"onHoverOut",data:{}})},bindEvents:function(){var e=this._doms,t=e.widget;this._hoverOverHandler||(this._hoverOverHandler=this.onHoverOver.bind(this)),this._hoverOutHandler||(this._hoverOutHandler=this.onHoverOut.bind(this)),r(t).on("mouseenter",this._hoverOverHandler),r(t).on("mouseleave",this._hoverOutHandler)},unbindEvents:function(){var e=this._doms,t=e.widget;this._hoverOverHandler&&r(t).un("mouseenter",this._hoverOverHandler),this._hoverOutHandler&&r(t).un("mouseleave",this._hoverOutHandler)},fini:function(){this.unbindEvents()}}})});
define("kit/getBindTool",[],function(e,t,n){function a(e){var t=e[0].uuid;return t||(t=Math.floor(2147483648*Math.random()).toString(36),e[0].uuid=t),o[t]?o[t]:(this._elem=e,o[t]=this,this.on=function(e,t){"mouseenter"!=e&&"mouseleave"!=e||!r?this._elem.on(e,t):"mouseenter"==e?this._elem.on("touchstart",t):i.on("touchstart",t)},this.un=function(e,t){"mouseenter"!=e&&"mouseleave"!=e||!r?this._elem.un(e,t):"mouseenter"==e?this._elem.un("touchstart",t):i.un("touchstart",t)},this)}var i=Q.$("body"),r=Q.browser.iPad,o={};n.exports=function(e){return new a(e)}});
define("action/input",["../components/action/widget","../view/inputView","../model/inputModel","../kit/eventPlugin"],function(e,t,n){var a=e("../components/action/widget"),i=e("../view/inputView"),r=e("../model/inputModel"),o=e("../kit/eventPlugin"),s={};n.exports=Q.Class("Input",{extend:a,plugins:[new o],construct:function(e){e.model=e.model||new r(e),e.view=e.view||new i(e);var t=e.name;t&&(s[t]?s[t].push(this):s[t]=[this]),this.callsuper(e)},methods:{init:function(){this.bindEvents()},fini:function(){this._view.fini(),this.unbindEvents()},syncGet:function(e){return this._model.get(e)},syncSet:function(e){this._view.update(this._model.set(e))},bindEvents:function(){},unbindEvents:function(){}},statics:{getInput:function(e){return s[e]}},properties:{events:{onValueChange:function(e){this._model.set(Q.object.extend({autoFill:!1},e.data)),this.fire({type:"valueChange",data:e.data})},onFocusIn:function(e){var t=e.data.evt.type.toUpperCase();delete e.data.evt,this._model.set(e.data),"CLICK"==t&&this.fire({type:"focusIn",data:e.data})},onFocusOut:function(e){this._model.set(e.data),this.fire({type:"focusOut",data:e.data})},onKeyDown:function(e){13==e.data.keyCode&&this.fire({type:"submit",data:e.data}),this.fire({type:"keyDown",data:e.data})},onSubmit:function(e){this.fire({type:"submit",data:e.data})}}}})});
define("view/inputView",["../components/view/widgetView"],function(e,t,n){var a=e("../components/view/widgetView");n.exports=Q.Class("InputView",{extend:a,construct:function(e){this.callsuper(e)},methods:{init:function(e){this._ctrl=e;var t=e._model.get();this._initDom(t),this.update(t),this.bindEvents()},fini:function(){this.unbindEvents()},_initDom:function(e){this._setAutoFill(e.autoFill);var t=this._doms.input,n=e.defaultValue.trim();t.value(n),this._value=n,this._ctrl._model.set({value:n}),e.focusIn?t[0].focus():t[0].blur(),this._focusIn=e.focusIn,this._setTextRange(),this._check=!0,this._setFocusBg(e.focusBg)},update:function(e){this._setAutoFill(e.autoFill),this._setFocusIn(e.focusIn),this._setValue(e.value),this._setFocusBg(e.focusBg)},_setFocusIn:function(e,t){if(void 0!==e&&this._focusIn!=e){this._focusIn=e;var n=this._doms.input;t||(e?Q.browser.iPad||n[0].focus():n[0].blur()),this._setFocusBg(e),this._checkValueChange()}},_setCheck:function(e){this._check!=e&&(this._check=e,this._checkValueChange())},_setFocusBg:function(e){if(void 0!==e&&this._focusBg!=e){this._focusBg=e,this._ctrl._model._data.focusBg=e;var t=this._ctrl._model.get().focusCls,n=this._doms.container;n&&(e?n.addClass(t):n.removeClass(t))}},_setAutoFill:function(e){if(void 0!==e&&this._autoFill!=e&&(this._autoFill=e,this._ctrl._model._data.autoFill=e,this._ctrl._model.get().likePlaceHolder)){var t=this._doms.input;e?t.css("color",this._ctrl._model._data.placeHolderColor):t.css("color","")}},_setTextRange:function(){if(this._focusIn){var e=this._doms.input[0],t=e.value.length;if(this._autoFill&&this._ctrl._model.get().likePlaceHolder&&(t=0),e.createTextRange){var n=e.createTextRange();n.move("character",t),n.collapse(),n.select()}else e.setSelectionRange(t,t),e.focus()}},_setValue:function(e){if(void 0!==e&&this._value!=e){var t=this._check;this._setCheck(!1);var n=this._doms.input;n.value(e),this._value=e,this._setTextRange(),this._setCheck(t)}},onFocusIn:function(e){e=Q.event.get(e);var t=Q.$(e.target).attr("type").toUpperCase();"TEXT"!=t&&"PASSWORD"!=t&&"TEXTAREA"!=t||this._focusIn||(this._setFocusIn(!0,!0),this._setTextRange(),this._ctrl.notice({type:"onFocusIn",data:{focusIn:!0,evt:e}}))},onFocusOut:function(e){e=Q.event.get(e);var t=Q.$(e.target).attr("type").toUpperCase();"TEXT"!=t&&"PASSWORD"!=t&&"TEXTAREA"!=t||!this._focusIn||(this._setFocusIn(!1,!0),this._ctrl.notice({type:"onFocusOut",data:{focusIn:!1}}))},onKeyDown:function(e){e=Q.event.get(e);var t=Q.$(e.target).attr("type").toUpperCase();if(("TEXT"==t||"PASSWORD"==t||"TEXTAREA"==t)&&this._autoFill&&this._ctrl._model.get().likePlaceHolder){var n=e.keyCode;(37==n||39==n)&&e.preventDefault()}this._ctrl.notice({type:"onKeyDown",data:e})},onValueChange:function(){var e=this._doms.input.value().trim();if(e!=this._value){this._setFocusBg(!0);var t=this._ctrl._model.get(),n=t.defaultValue.trim();this._autoFill&&t.likePlaceHolder&&e!=n&&e.lastIndexOf(n)>0?(this._setAutoFill(!1),e=e.substr(0,e.lastIndexOf(n)),this._setValue(e)):this._value=e,this._ctrl.notice({type:"onValueChange",data:{value:e}})}},onClick:function(e){e=Q.event.get(e);var t=e.target,n=Q.$(t).attr("type").toUpperCase();if("TEXT"==n||"PASSWORD"==n||"TEXTAREA"==n)if(this._setFocusBg(!0),this._autoFill&&this._ctrl._model.get().likePlaceHolder){this._setAutoFill(!1);var a="";this._setValue(a),this._ctrl.notice({type:"onValueChange",data:{value:a}})}else this._setFocusIn(!0),this._ctrl.notice({type:"onFocusIn",data:{focusIn:!0,evt:e}});else this._ctrl.notice({type:"onSubmit",data:e})},onHoverOver:function(){this._setFocusBg(!0)},onHoverOut:function(){this._focusIn||this._setFocusBg(!1)},_checkValueChange:function(){this._check&&this._focusIn?this._checkValueTimer||(this._checkValueTimer=setInterval(this.onValueChange.bind(this),150)):this._checkValueTimer&&(clearTimeout(this._checkValueTimer),this._checkValueTimer=null)},bindEvents:function(){this._focusInHandler||(this._focusInHandler=this.onFocusIn.bind(this)),this._focusOutHandler||(this._focusOutHandler=this.onFocusOut.bind(this)),this._keyDownHandler||(this._keyDownHandler=this.onKeyDown.bind(this)),this._clickHandler||(this._clickHandler=this.onClick.bind(this)),this._hoverOverHandler||(this._hoverOverHandler=this.onHoverOver.bind(this)),this._hoverOutHandler||(this._hoverOutHandler=this.onHoverOut.bind(this)),this._valueChangeHandler||(this._valueChangeHandler=this.onValueChange.bind(this));var e=this._doms,t=e.input,n="change";Q.browser.SAFARI&&(n="input"),t.on(n,this._valueChangeHandler);var a=[t],i=e.btn;i&&a.push(i);var r=this;a.forEach(function(e){e.on("focus",r._focusInHandler),e.on("blur",r._focusOutHandler),e.on("keydown",r._keyDownHandler),e.on("click",r._clickHandler)});var o=e.container;o&&(o.on("mouseenter",this._hoverOverHandler),o.on("mouseleave",this._hoverOutHandler)),this._checkValueChange()},unbindEvents:function(){var e=this._doms,t=e.input;if(this._valueChangeHandler){var n="change";Q.browser.SAFARI&&(n="input"),t.un(n,this._valueChangeHandler)}var a=[t],i=e.btn;i&&a.push(i);var r=this;a.forEach(function(e){r._focusInHandler&&e.un("focus",r._focusInHandler),r._focusOutHandler&&e.un("blur",r._focusOutHandler),r._keyDownHandler&&e.un("keydown",r._keyDownHandler),r._clickHandler&&e.un("click",r._clickHandler)});var o=e.container;o&&(this._hoverOverHandler&&o.un("mouseenter",this._hoverOverHandler),this._hoverOutHandler&&o.un("mouseleave",this._hoverOutHandler)),this._checkValueTimer&&(clearTimeout(this._checkValueTimer),this._checkValueTimer=null)}}})});
define("model/inputModel",["../components/model/widgetModel"],function(e,t,n){var a=e("../components/model/widgetModel");n.exports=Q.Class("InputModel",{extend:a,construct:function(e){this.callsuper(e),this._data=Q.object.extend({defaultValue:"",value:"",focusIn:!1,hoverCls:"",focusCls:"",focusInClear:!1,autoFill:!0,likePlaceHolder:!0,focusBg:!1,placeHolderColor:"#999"},e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("widgets/searchsuggest/searchSuggestModel",["../../model/suggestModel"],function(e,t,n){var a=e("../../model/suggestModel");n.exports=Q.Class("SearchSuggestModel",{extend:a,construct:function(e){e=Q.object.extend({searchTarget:"_blank",suggestTarget:"_self",keyWords:{list:[],curSn:0},searchType:0,from:""},e),this.callsuper(e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("model/suggestModel",["../components/model/widgetModel"],function(e,t,n){var a=e("../components/model/widgetModel");n.exports=Q.Class("SuggestModel",{extend:a,construct:function(e){this._data=Q.object.extend({visible:!1,hoverOver:!1,ufBrowsers:["ff"]},e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("widgets/searchsuggest/searchSuggestView",["../../view/suggestView"],function(e,t,n){var a=e("../../view/suggestView");n.exports=Q.Class("SuggestView",{extend:a,construct:function(e){this.callsuper(e)},methods:{onHoverOverBtn:function(e){this._ctrl.notice({type:"onHoverOverBtn",data:Q.event.get(e)})},bindEvents:function(){this._hoverOverBtnHandler||(this._hoverOverBtnHandler=this.onHoverOverBtn.bind(this)),this._doms.btn.on("mouseenter",this._hoverOverBtnHandler),this.callsuper("bindEvents")},unbindEvents:function(){this._hoverOverBtnHandler&&this._doms.btn.un("mouseenter",this._hoverOverBtnHandler),this.callsuper("unbindEvents")}}})});
define("interfaces/suggestV3Interface",["../kit/remoteInterface","./config.js"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config.js");n.exports=Q.Class("SuggestV3Interface",{construct:function(){this._remoteInterface=new a({suggestV3:{url:i.interfaces.suggest}})},methods:{request:function(e,t){var n={dataType:"jsonp",ifname:"suggestV3",param:e};this._remoteInterface.send(n,function(e){t&&t(e)})}}})});
define("interfaces/zhidahaoInterface",["../kit/remoteInterface","./config.js"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config.js");n.exports=Q.Class("ZhidahaoInterface",{construct:function(){this._remoteInterface=new a({suggestZhidahao:{url:i.interfaces.suggestZhidahao}})},methods:{request:function(e,t){var n={dataType:"jsonp",ifname:"suggestZhidahao",param:e};this._remoteInterface.send(n,function(e){t&&t(e)})}}})});
define("interfaces/hotWordInterface",["../kit/remoteInterface","./config","../kit/generateRandomString"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config"),r=e("../kit/generateRandomString").generate;n.exports=Q.Class("HotWordInterface",{construct:function(){this._remoteInterface=new a({fetch:{url:i.interfaces.hotWord}})},methods:{request:function(e,t){var n={ifname:e.ifname,method:e.method||"GET",param:e};e.jsonp?n.dataType="jsonp":n.encodeFn=function(e){return encodeURIComponent(e)},delete e.ifname,delete e.method,delete e.jsonp,this._remoteInterface.send(n,t)},fetch:function(e,t){this.request(Q.object.extend({ifname:"fetch","if":"hotQuery",p:"global",cb:"cb_"+r(36)},e),t)},fetchTest:function(e,t){this.request(Q.object.extend({ifname:"fetch","if":"video_library",pageSize:10,key:"0|全部",jsonp:!0,video_library_type:"billboard"},e),t)}}})});
define("widgets/searchsuggest/searchSuggestList",["../../action/list","./searchSuggestListView","./searchSuggestListModel","../../kit/responsive","../../action/item","./suggestItemModel","./suggestItemView"],function(e,t,n){var a=e("../../action/list"),i=e("./searchSuggestListView"),r=e("./searchSuggestListModel"),o=e("../../kit/responsive"),s=e("../../action/item"),l=e("./suggestItemModel"),d=e("./suggestItemView");n.exports=Q.Class("SearchSuggestList",{extend:a,construct:function(e){e=e||{},e.model=e.model||new r(e),e.view=e.view||new i(e),this.callsuper(e)},methods:{_isSuggest:function(e){if(e){var t=e.syncGet().data.cid;if(1==t||2==t||3==t||4==t||6==t)return!0}return!1},update:function(e){for(var t=e.curSn,n=0;n<this.items.length;n++){var a=this.items[n],i=!1,r=a.syncGet().select;if(t===n)r||(a.syncSet({select:!0}),i=!0),a.syncSet({highLightContent:!0});else{if(-1==t&&0===n&&this._isSuggest(this.items[0])){a.syncSet({select:!0,highLightContent:!1,curSn:-1}),i=!0;continue}r&&(this._isSuggest(this.items[t])||-1==t?(a.syncSet({select:!1,curSn:-1}),i=!0):a.syncSet({highLightContent:!1,curSn:-1}))}i&&this.fire({type:"sizeChange",data:{}})}this._view.update(e)},buildItems:function(e){var t=[],n="";e.tpl&&(n=e.tpl.suggestTpl||"");var a=e.layout;e.responsive&&(a=o.getCurrentLayout().layout,0!==a&&(a=1));var i={tpl:n,layout:a,vvfrom:e.vvfrom,searchTarget:e.searchTarget,suggestTarget:e.suggestTarget,searchType:e.searchType,from:e.from,key:e.key};return e.itemsData.forEach(function(a,r){var o=n,m=null,h=null;delete i.selectCls,Q.object.extend(i,{data:a,select:0===e.curSn,pos:r+1}),e.isZhidahaoSuggest?(o=e.tpl.suggestZhidahaoTpl,h=new d,Q.object.extend(i,{searchTarget:"_blank"})):(o=e.tpl.searchTpl,h=new d),m=new l(Q.object.extend(i,{tpl:o}));var c=new s({model:m,view:h});c.init(),t.push(c)}),t},syncGet:function(e){return Q.object.extend({items:this.items},this._model.get(e))}}})});
define("widgets/searchsuggest/searchSuggestListView",["../../view/listView"],function(e,t,n){var a=e("../../view/listView");n.exports=Q.Class("SuggestView",{extend:a,construct:function(e){this.callsuper(e)},methods:{selItem:function(e,t){if(void 0!==e&&this._curSn!=e)if(t)this.callsuper("selItem",e);else{this.unbindItemsEvents(),this.callsuper("selItem",e),this._timer&&(clearTimeout(this._timer),this._timer=null);var n=this;this._timer=setTimeout(function(){n.bindItemsEvents(),n._timer=null},100)}},doSelItem:function(e){e=Q.event.get(e);var t=parseInt(Q.$(e.currentTarget||e.target).attr("index"),10);this.selItem(t,!0),this._ctrl.notice({type:"onSelItem",data:{curSn:t}})}}})});
define("widgets/searchsuggest/suggestItemModel",["../../model/itemModel"],function(e,t,n){var a=e("../../model/itemModel");n.exports=Q.Class("SuggestItemModel",{extend:a,construct:function(e){e=Q.object.extend({searchTarget:"_blank",suggestTarget:"_self",layout:0,vvfrom:"",highLightContent:!0,searchType:0,from:""},e),this.callsuper(e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("widgets/searchsuggest/suggestItemView",["../../view/itemView","../../kit/getSearchUrl","../../kit/getPicUrl","../../kit/userInfo","../../kit/parentByProp"],function(e,t,n){var a=e("../../view/itemView"),i=e("../../kit/getSearchUrl"),r=e("../../kit/getPicUrl"),o=e("../../kit/userInfo"),s=e("../../kit/parentByProp"),l="input";n.exports=Q.Class("SuggestItemView",{extend:a,construct:function(e){this.callsuper(e)},statics:{registEvents:function(){Q.event.customEvent.on("changeInputType",function(e){l=e.data.inputType})}},methods:{init:function(e){this.callsuper("init",e)},update:function(e){if(void 0!==e.select||void 0!==e.highLightContent){var t=!1;e.select&&(t=!0),void 0!==e.highLightContent&&(t=e.highLightContent),this._setHighLightContent(t)}this.callsuper("update",e)},_setHighLightContent:function(e){if(this._doms&&void 0!==e&&this._highLightContent!==e){var t,n=this._doms.con;n&&(t=n.down("[data-suggest-elem=itemcontent]"));var a="def-f2f2f2";t&&(e?(n.removeClass(a),t.removeClass(a)):(n.addClass(a),t.addClass(a))),this._highLightContent=e}},bindEvents:function(){if(this._conClickHandler||(this._conClickHandler=this.onConClick.bind(this)),this._doms&&this._doms.con){var e=this._doms.con;e.on("click",this._conClickHandler)}},unbindEvents:function(){this._conClickHandler&&this._doms&&this._doms.con&&this._doms.con.un("click",this._conClickHandler)},_check:function(e){var t=this._doms.con;t.attr("checking","true");for(var n=Q.$(e.target);n.attr("checking")!=t.attr("checking");){var a="A"==n[0].nodeName.toUpperCase()&&n.attr("href");if(a||n.attr("notjump")){if(t.removeAttr("checking"),a){var i=n.attr("href");if("_blank"!=n.attr("target")){e.preventDefault();try{Q.url.isUrl(i)&&setTimeout(function(){window.location.href=i},300)}catch(r){}}this._doSendPingback(Q.$(e.target),i)}return!1}n=n.parent()}return t.removeAttr("checking"),!0},_checkUrl:function(e){var t,n=this._doms.con;n.attr("checking","true");for(var a=Q.$(e.target);a.attr("checking")!=n.attr("checking");){var i="A"==a[0].nodeName.toUpperCase()&&a.attr("href").indexOf("hot")<0&&a.attr("rebuildUrl"),r="A"==a[0].nodeName.toUpperCase()&&a.attr("href").indexOf("hot")>0&&a.attr("rebuildUrl");if(i)return t="suggest",n.removeAttr("checking"),t;if(r)return t="hot",n.removeAttr("checking"),t;a=a.parent()}return n.removeAttr("checking"),!1},_doSendPingback:function(e,t){var n=this._ctrl._model.get(),a=n.data,i="1-5";if("so.iqiyi.com"!=Q.url.parse(t).host?i="2-1":(e=s(e,"ptype")||e,e.attr("ptype")?i=e.attr("ptype"):"IMG"==e[0].nodeName.toUpperCase()&&(i="1-1")),a.name){var r={t:5,pf:1,p:10,p1:101,c1:a.cid||"",s1:1,s2:6,e:a.event_id,r:6,u:Q.cookie.get("QC005"),pu:o.getUid(),a:0,rn:Math.floor((new Date).getTime()*Math.random()),pos:n.pos,ptype:i,target:encodeURIComponent(a.name),keyword:encodeURIComponent(n.key)},l=[];for(var d in r)l.push(d+"="+r[d]);var m="http://msg.iqiyi.com/b?"+l.join("&"),h=new Image;h.src=m}},onConClick:function(e){e=Q.event.get(e);var t=this._ctrl._model.get(),n=t.data,a=n.name||n.key,r=i(a,t.searchType,("input"===l?"":"second")+"suggest",t.from),o=t.searchTarget,s=this._checkUrl(e);this._check(e)?"_blank"!=o?setTimeout(function(){window.location.href=r},300):window.open(r):s&&(e.preventDefault(),"hot"==s&&(r=i(a,t.searchType,("input"===l?"":"second")+"hot",t.from)),"_blank"!=o?setTimeout(function(){window.location.href=r},300):window.open(r,"_blank"))},_getTextMaxLength:function(){var e=this._ctrl._model.get().layout,t=12;switch(e){case 0:t=12;break;case 1:t=34;break;case 2:t=38;break;default:t=12}return t},getNamesHtml:function(e,t,n,a){e=e||[],t=t||2,n=n||0,t=Math.min(t,e.length);for(var r=this._getTextMaxLength()-n,o=this._ctrl._model.get(),s=o.searchTarget,d=0,m="",h=0;t>h;h++){h>0&&(m+="/",d++);var c=e[h],u=r-d,U=i(c,o.searchType,("input"===l?"":"second")+"suggest",o.from),f=Q.string.getLength(c);if(f>u){m+='<a ptype="'+a+'" title="'+e[h]+'" href="'+U+'" target="'+s+'">'+Q.string.truncate(c,u,"...")+"</a>";break}if(m+='<a ptype="'+a+'" href="'+U+'" target="'+s+'">'+c+"</a>",d+=f,d+1>=r)break}return m},getformatSearchUrl:function(e,t,n){var a="input"===l?"suggest":"secondsuggest";return i(e,t,a,n)},getPictureUrl:function(){var e=this._ctrl._model.get(),t=e.data.source_code,n=e.data.picture_url,a=n.match(/(\S.+qiyipic\S.+)\/(\S.+)_195_260.jpg/);if(a)n=a[1]+"/"+a[2]+"_160_90.jpg";else{var i="";(!t||13e8>t||t>15e8)&&(i="_160_90"),n=r(n,i)}return n},appendVVFromForUrl:function(e){var t=this._ctrl._model.get().vvfrom;return t&&(e+="#vfrm="+t),e},formatData:function(e){var t=e.name||e.key;e.searchKey=e.searchKey.replace(/^@/i,"");var n={name:t,showName:t.replace(e.searchKey,'<i class="green">'+e.searchKey+"</i>")},a=this._ctrl._model.get();return n.titleTarget=a.searchTarget,n.target=a.searchTarget,n.indexTarget=e.historySearch||a.key?"":'<em class="soNum" data-elem="showNum"></em>',e.isZhidahaoSuggest===!0?(n.logo=e.logo,n.titleHref=e.link):n.titleHref=i(t,a.searchType,("input"===l?"":"second")+(e.key?"hot":"suggest"),a.from),n.href=n.titleHref,n}}})});
define("action/form",["../components/action/widget","../view/formView","../model/formModel","../kit/eventPlugin"],function(e,t,n){var a=e("../components/action/widget"),i=e("../view/formView"),r=e("../model/formModel"),o=e("../kit/eventPlugin");n.exports=Q.Class("Form",{extend:a,plugins:[new o],construct:function(e){e=e||{},e.model=e.model||new r(e),e.view=e.view||new i(e),this.callsuper(e),this.bindEvents()},methods:{init:function(){this.callsuper("init"),this.bindEvents()},fini:function(){this._view.fini(),this.unbindEvents()},syncGet:function(e){return this._model.get(e)},syncSet:function(e){this._view.update(this._model.set(e))},bindEvents:function(){},unbindEvents:function(){}}})});
define("view/formView",["../components/view/widgetView"],function(e,t,n){var a=e("../components/view/widgetView");n.exports=Q.Class("FormView",{extend:a,construct:function(e){this.callsuper(e)},methods:{init:function(e){this.callsuper("init",e),this.update(e._model.get()),this.bindEvents()},fini:function(){this.unbindEvents()},update:function(e){var t=this._doms.form;void 0!==e.target&&t.attr("target",e.target),void 0!==e.action&&this._setAction(e.action),void 0!==e.method&&t.attr("method",e.method)},_setAction:function(e){var t=this._doms.form,n=e.lastIndexOf("?");if(-1==n?t.attr("action",e):t.attr("action",e.substring(0,n)),this._inputs&&this._inputs.forEach(function(e){t.remove(e)}),t.down("[data-elems=input]")&&t.down("[data-elems=input]").forEach(function(e){t.remove(e)}),this._inputs=[],-1!=n){var a=Q.url.queryToJson(e);for(var i in a){var r=Q.element.Element.create({tagName:"input"});r.css("display","none"),r.attr("type","hidden"),r.attr("name",i),r.value(decodeURIComponent(a[i])),t.append(r),this._inputs.push(r)}}},_onSubmit:function(){return this._ctrl._model.get().valid},bindEvents:function(){var e=this._doms.form;this._submitHandler||(this._submitHandler=this._onSubmit.bind(this)),e[0].onsubmit=this._submitHandler},unbindEvents:function(){this._doms.form[0].onsubmit=null}}})});
define("model/formModel",["../components/model/widgetModel"],function(e,t,n){var a=e("../components/model/widgetModel");n.exports=Q.Class("FormModel",{extend:a,construct:function(e){this.callsuper(e),this._data=Q.object.extend({valid:!1,action:"",target:"_self",method:"GET"},e)},methods:{init:function(e){this.callsuper("init",e)}}})});
define("widgets/searchsuggest/simpleSearchSuggest",["./searchSuggest","./simpleSearchSuggestList","../../kit/getSearchUrl","./simpleSearchSuggestView"],function(e,t,n){var a=e("./searchSuggest"),i=e("./simpleSearchSuggestList"),r=e("../../kit/getSearchUrl"),o=e("./simpleSearchSuggestView");n.exports=Q.Class("SimpleSearchSuggest",{extend:a,construct:function(e){var t=e.doms,n=t.list,a=Q.object.extend({},e);e.body=e.body||new i(Q.object.extend(a,{doms:{list:n}})),e.view=new o(e),this.callsuper(e)},methods:{_setForm:function(e){if(4==this._model.get().searchType)this.form.syncSet({valid:!1});else{var t=this.form;if(t)if(e)t.syncSet({action:e.formatData.href,target:e.formatData.target,valid:!0});else if(this.input.syncGet().value){var n="",a=this.input.syncGet().value,i=this.body._model._data&&this.body._model._data.itemsData;i&&i.forEach(function(e){e.name==a&&(n=e.aid)});var r=this.getLinkInfo(n);t.syncSet({action:r.href,target:r.target,valid:!0})}else t.syncSet({valid:!1})}},onSubmit:function(e){var t=this._model.get().searchType;return 4==t?(this.syncSet({visible:!1}),void 0):(3==t&&this.input.syncGet().autoFill||this.callsuper("onSubmit",e),void 0)},onKeyDown:function(e){var t=this._model.get();if(4==t.searchType){if(!t.visible)return;if(9==e.data.keyCode)return this.syncSet({visible:!1}),void 0}this.callsuper("onKeyDown",e)},getLinkInfo:function(e){var t=this._model.get(),n=this.input.syncGet(),a=n.value,i=r(a,t.searchType,"input",t.from,e),o=t.searchTarget;if(n.autoFill){var s=t.keyWords.list[t.keyWords.curSn];i=s.href,o=s.target,i||(i=r(s.value,t.searchType,"input",t.from),o=t.searchTarget)}return{href:i,target:o}}}})});
define("widgets/searchsuggest/simpleSearchSuggestList",["./searchSuggestList","./simpleSearchSuggestListModel","../../kit/responsive","../../action/item","./suggestItemModel","./simpleSuggestItemView"],function(e,t,n){var a=e("./searchSuggestList"),i=e("./simpleSearchSuggestListModel"),r=e("../../kit/responsive"),o=e("../../action/item"),s=e("./suggestItemModel"),l=e("./simpleSuggestItemView");n.exports=Q.Class("SimpleSearchSuggestList",{extend:a,construct:function(e){e=e||{},e.model=e.model||new i(e),this.callsuper(e)},methods:{buildItems:function(e){var t=[],n=0;return e.itemsData.forEach(function(a){var i=e.layout;e.responsive&&(i=r.getCurrentLayout().layout,0!==i&&(i=1));var d=new o({model:new s({data:a,tpl:e.tpl.suggestTpl,select:n==e.curSn,layout:i,searchTarget:e.searchTarget,suggestTarget:e.suggestTarget,searchType:e.searchType,from:e.from}),view:new l});d.init(),t.push(d)}),t}}})});
define("widgets/searchsuggest/simpleSearchSuggestListModel",["./searchSuggestListModel","../../interfaces/videoIndexInterface","../../kit/userInfo"],function(e,t,n){var a=e("./searchSuggestListModel"),i=e("../../interfaces/videoIndexInterface"),r=e("../../kit/userInfo");n.exports=Q.Class("SimpleSearchSuggestListModel",{extend:a,construct:function(e){this.callsuper(e)},methods:{asyncGet:function(e,t){var n=e.key;this.set({key:n});var a=this;this.checkTpl(function(){var e=null;n&&a.getSuggest(n,function(i){e=Q.object.extend({},a.get()),e.key===n&&t(Q.object.extend(e,{itemsData:i,curSn:-1}))})})},getSuggest:function(e,t){var n=new i({ifname:"suggestIf"}),a=/ipad/.test(navigator.userAgent.toLowerCase())?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11,o=11==a?Q.cookie.get("QC005"):Q.cookie.get("QC006"),s=this.get(),l={key:e,platform:a,rltnum:s.maxCount,uid:o||"",ppuid:r.getUid()||""};if(s.pps&&(l["if"]="pps"),s.cachedSuggestData[e])t(s.cachedSuggestData[e]);else{var d=this;n.request(l,function(n){var a=[];"A00000"==n.code?(n.data.forEach(function(e){e.cid&&e.cname&&(e.name+=e.cname&&"（"+e.cname+"）",a.push(e))}),d.get().cachedSuggestData[e]=a,t(a)):t(a)})}},checkTpl:function(e){this.get().tpl||this.set({tpl:{suggestTpl:['<li class="soItem clearfix"> <a href="javascript:void(0);" class="soRow">','<div class="simple clearfix"><span class="so_txt">{{name}}</span></div>',"</a>",'<div class="so_detail"></div>',"</li>"].join("")}}),e()}}})});
define("interfaces/videoIndexInterface",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("VideoIndexInterface",{construct:function(e){e=e||{},this._ifname=e.ifname,this._remoteInterface=new a({videoLocationIf:{url:"http://uaa.iqiyi.com/video_index/v1/get_province_distribution"},videoUserProfileIf:{url:"http://uaa.iqiyi.com/video_index/v1/get_user_profile"},videoTrendIf:{url:"http://uaa.iqiyi.com/video_index/v1/get_index_trend"},hasIndexStatIf:{url:"http://uaa.iqiyi.com/video_index/v1/is_album_empty"},suggestIf:{url:"http://uaa.iqiyi.com/video_index/v1/filtered_suggest_album"}})},methods:{request:function(e,t){e=e||{};var n=e.ifname||this._ifname||"videoUserProfileIf",a=e.timeout||5e3;delete e.ifname,delete e.timeout,this._remoteInterface.send({ifname:n,param:e,dataType:"jsonp",timeout:a},function(n){t&&t(n,e)})}}})});
define("widgets/searchsuggest/simpleSuggestItemView",["./suggestItemView"],function(e,t,n){var a=e("./suggestItemView"),i="http://index.iqiyi.com/q/?";n.exports=Q.Class("SimpleSuggestItemView",{extend:a,construct:function(e){this.callsuper(e)},methods:{formatData:function(e){var t=e.name||e.key,n=e.cname,a=e.cid,r=e.aid,o={name:t,cname:n,aid:r,cid:a},s=this._ctrl._model.get(),l=["aid="+encodeURIComponent(r),"cid="+encodeURIComponent(a),"name="+encodeURIComponent(this.trimCnameSuffix(t))];return o.titleHref=i+l.join("&"),o.titleTarget=s.searchTarget,o.href=o.titleHref,o.target=s.searchTarget,o},trimCnameSuffix:function(e){var t=/(.*)（(综艺|电视剧|电影|纪录片|动漫|娱乐|体育|资讯|片花|微电影|脱口秀|生活|少儿|母婴|游戏|教育|音乐|搞笑|时尚|原创|旅游|拍客|财经|军事|科技|广告|汽车|特色频道|爱奇艺出品)）$/gi,n=t.exec(e);return n&&3==n.length?n[1]:e},onConClick:function(){}}})});
define("widgets/searchsuggest/simpleSearchSuggestView",["./searchSuggestView"],function(e,t,n){var a=e("./searchSuggestView");n.exports=Q.Class("SimpleSearchSuggestView",{extend:a,construct:function(e){this.callsuper(e)},methods:{bindEvents:function(){this._onClickHandler||(this._onClickHandler=this.onClick.bind(this)),this._onBodyClickHandler||(this._onBodyClickHandler=this.onBodyClick.bind(this)),this._doms.widget.on("click",this._onClickHandler),this._doms.body.on("click",this._onBodyClickHandler),this.callsuper("bindEvents")},unbindEvents:function(){this._onClickHandler&&this._doms.widget.un("click",this._onClickHandler),this._onBodyClickHandler&&this._doms.body.un("click",this._onBodyClickHandler),this.callsuper("unbindEvents")},onClick:function(e){var t=Q.$(Q.event.get(e).target),n=this._doms;t.contains(n.container)||t.contains(n.body)?this._ctrl.notice({type:"onHoverOut",data:{}}):this._ctrl._model.set({hoverOver:!0})},onBodyClick:function(){var e=this._ctrl,t=e.body.syncGet(),n=t.items[t.curSn].syncGet();e.input.syncSet({value:n.formatData.name.trim(),autoFill:!1}),e.notice({type:"onHoverOut",data:{}})}}})});
define("widgets/searchsuggest/ppsSearchSuggest",["./searchSuggest","./ppsSearchSuggestList","../../kit/getSearchUrl","./ppsSearchSuggestView"],function(e,t,n){var a=e("./searchSuggest"),i=e("./ppsSearchSuggestList"),r=e("../../kit/getSearchUrl"),o=e("./ppsSearchSuggestView");n.exports=Q.Class("PpsSearchSuggest",{extend:a,construct:function(e){var t=e.doms,n=t.list,a=Q.object.extend({},e);e.body=e.body||new i(Q.object.extend(a,{doms:{list:n}})),e.view=new o(e),this.callsuper(e)},methods:{getLinkInfo:function(){var e=this._model.get(),t=this.input.syncGet(),n=t.value,a=r(n,e.searchType,"input",e.from),i=e.searchTarget;if(t.autoFill){var o=e.keyWords.list[e.keyWords.curSn];a=o.href,i=o.target,a||(a=r(o.value,e.searchType,"input",e.from),i=e.searchTarget)}return{href:a,target:i}}}})});
define("widgets/searchsuggest/ppsSearchSuggestList",["./searchSuggestList","./ppsSearchSuggestListModel","../../kit/responsive","../../action/item","./suggestItemModel","./ppsSuggestItemView"],function(e,t,n){var a=e("./searchSuggestList"),i=e("./ppsSearchSuggestListModel"),r=e("../../kit/responsive"),o=e("../../action/item"),s=e("./suggestItemModel"),l=e("./ppsSuggestItemView");n.exports=Q.Class("PpsSearchSuggestList",{extend:a,construct:function(e){e=e||{},e.model=e.model||new i(e),this.callsuper(e)},methods:{buildItems:function(e){var t=[],n=0;return e.itemsData.forEach(function(a){var i=e.layout;e.responsive&&(i=r.getCurrentLayout().layout,0!==i&&(i=1));var d=new o({model:new s({data:a,tpl:e.tpl.suggestTpl,select:n==e.curSn,layout:i,searchTarget:e.searchTarget,suggestTarget:e.suggestTarget,searchType:e.searchType,from:e.from}),view:new l});d.init(),t.push(d)}),t}}})});
define("widgets/searchsuggest/ppsSearchSuggestListModel",["./searchSuggestListModel","../../interfaces/suggestV3Interface","../../kit/userInfo"],function(e,t,n){var a=e("./searchSuggestListModel"),i=e("../../interfaces/suggestV3Interface"),r=e("../../kit/userInfo");n.exports=Q.Class("PpsSearchSuggestListModel",{extend:a,construct:function(e){this.callsuper(e)},methods:{getSuggest:function(e,t){var n=new i,a=/ipad/.test(navigator.userAgent.toLowerCase())?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11,o=11==a?Q.cookie.get("QC005"):Q.cookie.get("QC006"),s=this.get(),l={key:e,platform:a,"if":"pps",rltnum:s.maxCount,uid:o||"",ppuid:r.getUid()||""};if(s.cachedSuggestData[e])t(s.cachedSuggestData[e]);else{var d=this;n.request(l,function(n){var a=[];"A00000"==n.code?(a=n.data,d.get().cachedSuggestData[e]=a,t(a)):t(a)})}},checkTpl:function(e){this.get().tpl||this.set({tpl:{suggestTpl:['<li class="soItem clearfix"> <a href="{{titleHref}}" target="{{titleTarget}}" class="soRow">','<div class="simple clearfix"><span class="so_txt">{{name}}</span></div>',"</a>",'<div class="so_detail"></div>',"</li>"].join("")}}),e()}}})});
define("widgets/searchsuggest/ppsSuggestItemView",["./suggestItemView","../../kit/getSearchUrl"],function(e,t,n){var a=e("./suggestItemView"),i=e("../../kit/getSearchUrl");n.exports=Q.Class("PpsSuggestItemView",{extend:a,construct:function(e){this.callsuper(e)},methods:{formatData:function(e){var t=e.name||e.key,n={name:t},a=this._ctrl._model.get();return n.titleHref=i(t,a.searchType,e.key?"hot":"suggest",a.from),n.titleTarget=a.searchTarget,n.href=n.titleHref,n.target=a.searchTarget,n}}})});
define("widgets/searchsuggest/ppsSearchSuggestView",["./searchSuggestView"],function(e,t,n){var a=e("./searchSuggestView");n.exports=Q.Class("PpsSearchSuggestView",{extend:a,construct:function(e){this.callsuper(e)},methods:{bindEvents:function(){this._onClickHandler||(this._onClickHandler=this.onClick.bind(this)),this._doms.widget.on("click",this._onClickHandler),this.callsuper("bindEvents")},unbindEvents:function(){this._onClickHandler&&this._doms.widget.un("click",this._onClickHandler),this.callsuper("unbindEvents")},onClick:function(e){var t=Q.$(Q.event.get(e).target),n=this._doms;t.contains(n.container)||t.contains(n.body)?this._ctrl.notice({type:"onHoverOut",data:{}}):this._ctrl._model.set({hoverOver:!0})}}})});
define("widgets/searchsuggest/mall/mallSearchSuggest",["../searchSuggest","./mallSearchSuggestList","../../../kit/getSearchUrl","./mallSearchSuggestView"],function(e,t,n){var a=e("../searchSuggest"),i=e("./mallSearchSuggestList"),r=e("../../../kit/getSearchUrl"),o=e("./mallSearchSuggestView");n.exports=Q.Class("MallSearchSuggest",{extend:a,construct:function(e){var t=e.doms,n=t.list,a=Q.object.extend({},e);e.body=e.body||new i(Q.object.extend(a,{doms:{list:n}})),e.view=new o(e),this.callsuper(e)},methods:{_setForm:function(e){if(4==this._model.get().searchType)this.form.syncSet({valid:!1});else{var t=this.form;if(t)if(e)t.syncSet({action:e.formatData.href,target:e.formatData.target,valid:!0});else if(this.input.syncGet().value){var n=this.getLinkInfo();t.syncSet({action:n.href,target:n.target,valid:!0})}else t.syncSet({valid:!1})}},onSubmit:function(e){var t=this._model.get().searchType;return 4==t?(this.syncSet({visible:!1}),void 0):(3==t&&this.input.syncGet().autoFill||this.callsuper("onSubmit",e),void 0)},onKeyDown:function(e){var t=this._model.get();if(4==t.searchType){if(!t.visible)return;if(9==e.data.keyCode)return this.syncSet({visible:!1}),void 0}this.callsuper("onKeyDown",e)},getLinkInfo:function(){var e=this._model.get(),t=this.input.syncGet(),n=t.value,a=r(n,e.searchType,"input",e.from),i=e.searchTarget;if(t.autoFill){var o=e.keyWords.list[e.keyWords.curSn];a=o.href,i=o.target,a||(a=r(o.value,e.searchType,"input",e.from),i=e.searchTarget)}return{href:a,target:i}}}})});
define("widgets/searchsuggest/mall/mallSearchSuggestList",["../searchSuggestList","./mallSearchSuggestListModel","../../../kit/responsive","../../../action/item","../suggestItemModel","./mallSearchSuggestItemView"],function(e,t,n){var a=e("../searchSuggestList"),i=e("./mallSearchSuggestListModel"),r=e("../../../kit/responsive"),o=e("../../../action/item"),s=e("../suggestItemModel"),l=e("./mallSearchSuggestItemView");n.exports=Q.Class("SimpleSearchSuggestList",{extend:a,construct:function(e){e=e||{},e.model=e.model||new i(e),this.callsuper(e)},methods:{buildItems:function(e){var t=[],n=0;return e.itemsData.forEach(function(a){var i=e.layout;e.responsive&&(i=r.getCurrentLayout().layout,0!==i&&(i=1));var d=new o({model:new s({data:a,tpl:e.tpl.suggestTpl,select:n==e.curSn,layout:i,searchTarget:e.searchTarget,suggestTarget:e.suggestTarget,searchType:e.searchType,from:e.from}),view:new l});d.init(),t.push(d)}),t}}})});
define("widgets/searchsuggest/mall/mallSearchSuggestListModel",["../searchSuggestListModel","../../../interfaces/suggestV3Interface","../../../kit/userInfo"],function(e,t,n){var a=e("../searchSuggestListModel"),i=e("../../../interfaces/suggestV3Interface"),r=e("../../../kit/userInfo");n.exports=Q.Class("MallSearchSuggestListModel",{extend:a,construct:function(e){this.callsuper(e)},methods:{asyncGet:function(e,t){var n=e.key;this.set({key:n});var a=this;this.checkTpl(function(){var e=null;n&&a.getSuggest(n,function(i){e=Q.object.extend({},a.get()),e.key===n&&t(Q.object.extend(e,{itemsData:i,curSn:-1}))})})},getSuggest:function(e,t){var n=new i,a=/ipad/.test(navigator.userAgent.toLowerCase())?21:Q.browser.android||Q.browser.iPhone||Q.browser.WP?31:11,o=11==a?Q.cookie.get("QC005"):Q.cookie.get("QC006"),s=this.get(),l={"if":"mall",key:e,platform:a,rltnum:s.maxCount,uid:o||"",ppuid:r.getUid()||""};if(s.cachedSuggestData[e])t(s.cachedSuggestData[e]);else{var d=this;n.request(l,function(n){var a=[];"A00000"==n.code?(n.data.forEach(function(e){a.push(e)}),d.get().cachedSuggestData[e]=a,t(a)):t(a)})}},checkTpl:function(e){this.get().tpl||this.set({tpl:{suggestTpl:'<li class=""><a href="{{href}}" class="in_Suggest_link" target="{{titleTarget}}"><span class="in_Suggest_n">{{name}}</span>{{if (item_cnt)}}<span class="in_Suggest_info">约{{item_cnt}}个商品</span>{{/if}}</a></li>'}}),e()}}})});
define("widgets/searchsuggest/mall/mallSearchSuggestItemView",["../suggestItemView","../../../kit/getSearchUrl"],function(e,t,n){var a=e("../suggestItemView"),i=e("../../../kit/getSearchUrl");n.exports=Q.Class("MallSearchSuggestItemView",{extend:a,construct:function(e){this.callsuper(e)},methods:{formatData:function(e){var t=e.name||e.key,n={name:t,item_cnt:e.item_cnt},a=this._ctrl._model.get();return n.titleHref=i(t,a.searchType,"suggest",a.from),n.titleTarget=a.searchTarget,n.href=n.titleHref,n.target=a.searchTarget,n},onConClick:function(){}}})});
define("widgets/searchsuggest/mall/mallSearchSuggestView",["../searchSuggestView"],function(e,t,n){var a=e("../searchSuggestView");n.exports=Q.Class("SimpleSearchSuggestView",{extend:a,construct:function(e){this.callsuper(e)},methods:{bindEvents:function(){this._onClickHandler||(this._onClickHandler=this.onClick.bind(this)),this._onBodyClickHandler||(this._onBodyClickHandler=this.onBodyClick.bind(this)),this._doms.widget.on("click",this._onClickHandler),this._doms.body.on("click",this._onBodyClickHandler),this.callsuper("bindEvents")},unbindEvents:function(){this._onClickHandler&&this._doms.widget.un("click",this._onClickHandler),this._onBodyClickHandler&&this._doms.body.un("click",this._onBodyClickHandler),this.callsuper("unbindEvents")},onClick:function(e){var t=Q.$(Q.event.get(e).target),n=this._doms;t.contains(n.container)||t.contains(n.body)?this._ctrl.notice({type:"onHoverOut",data:{}}):this._ctrl._model.set({hoverOver:!0})},onBodyClick:function(){var e=this._ctrl,t=e.body.syncGet(),n=t.items[t.curSn].syncGet();e.input.syncSet({value:n.formatData.name.trim(),autoFill:!1}),e.notice({type:"onHoverOut",data:{}})}}})});
define("widgets/searchinput/searchInput",["../../action/input","./searchInputModel","../../view/inputView","../../kit/getSearchUrl","../../action/form"],function(e,t,n){var a=e("../../action/input"),i=e("./searchInputModel"),r=e("../../view/inputView"),o=e("../../kit/getSearchUrl"),s=e("../../action/form");n.exports=Q.Class("SearchInput",{extend:a,construct:function(e){e.doms&&e.doms.form&&(this.form=new s({doms:{form:e.doms.form}}),this.form.init()),e.defaultValue=this._selectKeyWord(e.keyWords).value,e.model=e.model||new i(e),e.view=e.view||new r(e),this.callsuper(e)},methods:{init:function(){this._setForm(),this.callsuper("init")},fini:function(){this.form&&this.form.fini(),this.callsuper("fini")},_getLinkInfo:function(){var e=this._model.get(),t=e.value,n=o(t,e.searchType,"input",e.from),a=e.target;if(e.autoFill){var i=e.keyWords.list[e.keyWords.curSn];n=i.href,a=i.target,n||(n=o(i.value,e.searchType,"input",e.from),a=e.target)}return{href:n,target:a}},_selectKeyWord:function(e){for(var t=e.list,n=Math.floor(Math.random()*t.length),a=0;a<t.length;a++)if(t[a].selected){n=a;break}return e.curSn=n,t[n].selected=!0,t[n]},_setForm:function(){var e=this.form;if(e)if(this._model.get().value){var t=this._getLinkInfo();e.syncSet({action:t.href,target:t.target,valid:!0})}else e.syncSet({valid:!1})},submitHandler:function(e){var t=this.form,n=Q.$(e.data.target).attr("type").toUpperCase(),a=e.data.type.toUpperCase(),i=this._model.get().value;if(i&&(!t||"BUTTON"==n&&"CLICK"==a)){var r=this._getLinkInfo(),o=r.href;"_self"==r.target?window.location.href=o:window.open(o)}},focusInHandler:function(){var e=this._model.get();e.autoFill&&e.focusInClear&&this.syncSet({value:"",autoFill:!1}),this._setForm()},focusOutHandler:function(){var e=this._model.get();e.value||this.syncSet({value:this._selectKeyWord(e.keyWords).value.trim(),autoFill:!0}),this._setForm()},valueChangeHandler:function(){this._setForm()},bindEvents:function(){this._submitHandler||(this._submitHandler=this.submitHandler.bind(this)),this._focusInHandler||(this._focusInHandler=this.focusInHandler.bind(this)),this._focusOutHandler||(this._focusOutHandler=this.focusOutHandler.bind(this)),this._valueChangeHandler||(this._valueChangeHandler=this.valueChangeHandler.bind(this)),this.on("submit",this._submitHandler),this.on("valueChange",this._valueChangeHandler),this.on("focusIn",this._focusInHandler),this.on("focusOut",this._focusOutHandler)},unbindEvents:function(){this._submitHandler&&this.un("submit",this._submitHandler),this._focusInHandler&&this.un("focusIn",this._focusInHandler),this._focusOutHandler&&this.un("focusOut",this._focusOutHandler),this._valueChangeHandler&&this.un("valueChange",this._valueChangeHandler)}}})});
define("widgets/searchinput/searchInputModel",["../../model/inputModel"],function(e,t,n){var a=e("../../model/inputModel");n.exports=Q.Class("SearchInputModel",{extend:a,construct:function(e){e=Q.object.extend({target:"_blank",keyWords:{list:[],curSn:0},searchType:0,from:""},e),this.callsuper(e)}})});
define("kit/getSuggestConfig",["./iframeLocation","./responsive","./getKeyWordFromReferrer","./getSearchUrl","../interfaces/locationInterface","./checkI18nType"],function(e,t,n){function a(e,t,n,a){var i=(e.attr("data-suggest-tip")||"").trim(),r="true"===(e.attr("data-suggest-showemptyval")||"").trim(),o=m(),s=[],l=null;if(o?i=o:r?i="":l=e.down("[data-suggest-elem=keyword]"),l)l.forEach(function(e){e=Q.$(e);var t=(e.attr("title")||"").trim(),n=e.attr("target")||"_self",i=(Q.browser.IE6?e[0].getAttribute("href",2):e.attr("href"))||"";try{if(-1!=Q.url.parse(i).host.indexOf(u)){var r=Math.floor((new Date).getTime()*Math.random());i+=-1!=i.indexOf("?")?"&sr="+r:"?sr="+r,a&&(i+="&"+a)}}catch(o){}s.push({value:t,target:n,href:i})});else{var d="",c="_blank";o&&(d=h(i,t,"se",a),c=n),s.push({value:i,target:c,href:d})}return{list:s,curSn:0}}function i(e){for(var t=window.location.hostname,n=0;n<e.length;n++)if(e[n]&&-1!=t.indexOf(e[n]))return!0;return!1}function r(e,t){return l.check()?"_blank":i(t)?"_blank"==e?"_self":"_blank":e}function o(e,t,n){var o=e.attr("data-suggest-hoverclass")||"srchHover",s={hoverCls:o,name:e.attr("data-suggest-name")||"suggest"},l=e.attr("data-suggest-site");if(0===t){var m=e.attr("data-suggest-maxcount")||10,h=e.attr("data-suggest-maxsearchhistorycount")||5,c="";c=1==n?"2-3-0-1":"3-6-3-1";var U=Q.url.parse(window.location.href),f=U.host==u&&"/"==U.path,p=e.attr("data-suggest-searchtarget")||"_blank",V=(e.attr("data-suggest-searchtargetblacklist")||u).split(",");p=r(p,V);var g=e.attr("data-suggest-suggesttarget")||"_self",y=(e.attr("data-suggest-suggesttargetblacklist")||u).split(",");g=r(g,y);var b=(e.attr("data-suggest-focusoutblacklist")||u).split(","),v=i(b)&&"none"!=e.css("display")&&!Q.browser.iPad,k=(e.attr("data-suggest-placeholderblacklist")||u).split(","),x=!i(k)||f,L=f,w=e.attr("data-suggest-selItemCls")||"keyBg",_="www.iqiyi.com"==U.host&&"/"==U.path?"":"#999",W=(e.attr("data-suggest-focusinclearblacklist")||u).split(","),X=!i(W)||f,I=(e.attr("data-suggest-ufbrwosers")||"ff,IE,CHROME").split(","),K=d.enable;"false"==e.attr("data-suggest-responsive")&&(K=!1);var C=parseInt(e.attr("data-suggest-layout"),10);C=C||0,d.respInfo&&K&&(C=d.respInfo.curLayout);var E=o,S=0,J=!1;"pps.tv"===l&&(S=1);var T=!1;("pps"===l||"true"==e.attr("data-suggest-nospecshow"))&&(T=!0,o="",E="",v=!0,p="_self",X=!1,I=[],S=1,"ppsclient"===l&&(S=2),J=!0),"iqiyi-index"===l&&(T=!0,v=!e.attr("data-suggest-focusIn"),p=e.attr("data-suggest-brainsearchtarget")||"_self",X=!0,I=[],S=3),"iqiyi-index-compare"===l&&(T=!0,v=!1,p="_self",X=!0,I=[],S=4),"iqiyi-mall"===l&&(T=!0,v=!location.hash,g=p,I=[],S=5),Q.object.extend(s,{maxCount:m,maxSearchHistoryCount:h,suggestTarget:g,searchTarget:p,layout:C,vvfrom:c,focusIn:v,focusInClear:X,focusCls:E,focusBg:L,selItemCls:w,ufBrowsers:I,responsive:K,likePlaceHolder:x,placeHolderColor:_,hoverCls:o,site:l,searchType:S,pps:J,nospecshow:T})}else Q.object.extend(s,{target:"_self",focusInClear:!0,searchType:"ppsclient"===l?2:0});return s.from=e.attr("data-suggest-refersource")||"",s.keyWords=a(e,s.searchType,s.searchTarget||s.target,s.from),s}function s(e,t,n,a){{e.down("[data-suggest-elem=conf]")}return a}var l=e("./iframeLocation"),d=e("./responsive"),m=e("./getKeyWordFromReferrer"),h=e("./getSearchUrl");e("../interfaces/locationInterface");var c=e("./checkI18nType"),u=c.type?"so.iqiyi.com":"so.tw.iqiyi.com";n.exports=function(e,t,n){var a=o(e,t,n);return s(e,t,n,a)}});
define("kit/getKeyWordFromReferrer",[],function(e,t,n){var a=[{host:"v.baidu.com",key:"word"},{host:"www.baidu.com",key:"wd"},{host:"www.soku.com",key:"keyword"}];n.exports=function(){try{for(var e=document.referrer,t=Q.url.parse(e).host,n=0;n<a.length;n++){var i=a[n];if(-1!=t.indexOf(i.host))return decodeURIComponent(Q.url.getQueryValue(e,i.key))}}catch(r){}return""}});
define("interfaces/searchIptPersonalise",["../kit/remoteInterface","./config"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("./config"),r="hotWord";n.exports=Q.Class(r,{construct:function(){this._remoteInterface=new a({url:i.interfaces[r]})},methods:{request:function(e,t,n){var a=this;n=n||{},e=e||{},a._remoteInterface.send({ifname:r,param:e,method:"get",antiCsrf:!!n.antiCsrf,timeout:n.timeout||1e3,dataType:n.dataType?n.dataType:"jsonp"},function(e){t&&t(e)})}}})});
define("kit/juicer",[],function(e,t,n){!function(){var e=function(){var t=[].slice.call(arguments);return t.push(e.options),t[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&t[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(e,n){var a=document,i=a&&a.getElementById(n);t[0]=i?i.value||i.innerHTML:e}),1==arguments.length?e.compile.apply(e,t):arguments.length>=2?e.to_html.apply(e,t):void 0},t={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return t.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return"undefined"==typeof e?"":e}},a=function(e){var t=window.console;if("undefined"!=typeof t){if(t.warn)return t.warn(e),void 0;if(t.log)return t.log(e),void 0}throw e},i=function(e,t){if(e=e!==Object(e)?{}:e,e.__proto__)return e.__proto__=t,e;var n=function(){},a=Object.create?Object.create(t):new Object(n.prototype=t,n);for(var i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);return a};e.__cache={},e.version="0.6.5-stable",e.settings={},e.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},e.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:i({__escapehtml:t,__throw:a,__juicer:e},{})},e.tagInit=function(){var t=e.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+e.tags.operationClose,n=e.tags.operationOpen+"\\/each"+e.tags.operationClose,a=e.tags.operationOpen+"if\\s*([^}]*?)"+e.tags.operationClose,i=e.tags.operationOpen+"\\/if"+e.tags.operationClose,r=e.tags.operationOpen+"else"+e.tags.operationClose,o=e.tags.operationOpen+"else if\\s*([^}]*?)"+e.tags.operationClose,s=e.tags.interpolateOpen+"([\\s\\S]+?)"+e.tags.interpolateClose,l=e.tags.noneencodeOpen+"([\\s\\S]+?)"+e.tags.noneencodeClose,d=e.tags.commentOpen+"[^}]*?"+e.tags.commentClose,m=e.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+e.tags.operationClose,h=e.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+e.tags.operationClose;e.settings.forstart=new RegExp(t,"igm"),e.settings.forend=new RegExp(n,"igm"),e.settings.ifstart=new RegExp(a,"igm"),e.settings.ifend=new RegExp(i,"igm"),e.settings.elsestart=new RegExp(r,"igm"),e.settings.elseifstart=new RegExp(o,"igm"),e.settings.interpolate=new RegExp(s,"igm"),e.settings.noneencode=new RegExp(l,"igm"),e.settings.inlinecomment=new RegExp(d,"igm"),e.settings.rangestart=new RegExp(m,"igm"),e.settings.include=new RegExp(h,"igm")},e.tagInit(),e.set=function(e,t){var n=this,a=function(e){return e.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(e){return"\\"+e})},i=function(e,t){var i=e.match(/^tag::(.*)$/i);return i?(n.tags[i[1]]=a(t),n.tagInit(),void 0):(n.options[e]=t,void 0)};if(2===arguments.length)return i(e,t),void 0;if(e===Object(e))for(var r in e)e.hasOwnProperty(r)&&i(r,e[r])},e.register=function(e,t){var n=this.options._method;return n.hasOwnProperty(e)?!1:(n[e]=t,n[e])},e.unregister=function(e){var t=this.options._method;return t.hasOwnProperty(e)?delete t[e]:void 0},e.template=function(t){var n=this;this.options=t,this.__interpolate=function(e,t,n){var a,i=e.split("|"),r=i[0]||"";return i.length>1&&(e=i.shift(),a=i.shift().split(","),r="_method."+a.shift()+".call({}, "+[e].concat(a)+")"),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+r+")"+")"+" %>"},this.__removeShell=function(t,a){var i=0;return t=t.replace(e.settings.forstart,function(e,t,n,a){var r=n||"value",o=a&&a.substr(1),s="i"+i++;return"<% ~function() {for(var "+s+" in "+t+") {"+"if("+t+".hasOwnProperty("+s+")) {"+"var "+r+"="+t+"["+s+"];"+(o?"var "+o+"="+s+";":"")+" %>"}).replace(e.settings.forend,"<% }}}(); %>").replace(e.settings.ifstart,function(e,t){return"<% if("+t+") { %>"}).replace(e.settings.ifend,"<% } %>").replace(e.settings.elsestart,function(){return"<% } else { %>"}).replace(e.settings.elseifstart,function(e,t){return"<% } else if("+t+") { %>"}).replace(e.settings.noneencode,function(e,t){return n.__interpolate(t,!1,a)}).replace(e.settings.interpolate,function(e,t){return n.__interpolate(t,!0,a)}).replace(e.settings.inlinecomment,"").replace(e.settings.rangestart,function(e,t,n,a){var r="j"+i++;return"<% ~function() {for(var "+r+"="+n+";"+r+"<"+a+";"+r+"++) {{"+"var "+t+"="+r+";"+" %>"}).replace(e.settings.include,function(e,t,n){if(t.match(/^file\:\/\//gim))return e;var a="<%= _method.__juicer("+t+", "+n+"); %>";return a}),a&&a.errorhandling===!1||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(t){var n=[],a=[],i="",r=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],o=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},s=function(t,i){if(i=i.match(/\w+/gim)[0],-1===o(n,i)&&-1===o(r,i)&&-1===o(a,i)){if("undefined"!=typeof window&&"function"==typeof window[i]&&window[i].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return t;var s={};if("undefined"!=typeof s&&"function"==typeof s[i]&&s[i].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return t;if("function"==typeof e.options._method[i]||e.options._method.hasOwnProperty(i))return a.push(i),t;n.push(i)}return t};t.replace(e.settings.forstart,s).replace(e.settings.interpolate,s).replace(e.settings.ifstart,s).replace(e.settings.elseifstart,s).replace(e.settings.include,s).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,s);for(var l=0;l<n.length;l++)i+="var "+n[l]+"=_."+n[l]+";";for(var d=0;d<a.length;d++)i+="var "+a[d]+"=_method."+a[d]+";";return"<% "+i+" %>"},this.__convert=function(e,t){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=t!==!1?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,t){var a=this;return t&&t.loose===!1||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,t),e=this.__toNative(e,t),this._render=new Function("_, _method",e),this.render=function(e,t){return t&&t===n.options._method||(t=i(t,n.options._method)),a._render.call(this,e,t)},this}},e.compile=function(e,t){t&&t===this.options||(t=i(t,this.options));try{var n=this.__cache[e]?this.__cache[e]:new this.template(this.options).parse(e,t);return t&&t.cache===!1||(this.__cache[e]=n),n}catch(r){return a("Juicer Compile Exception: "+r.message),{render:function(){}}}},e.to_html=function(e,t,n){return n&&n===this.options||(n=i(n,this.options)),this.compile(e,n).render(t,n._method)},"undefined"!=typeof n&&n.exports?n.exports=e:this.juicer=e}()});
define("kit/pcUserRegistKit",["../interfaces/pcUserRegistInterface","../interfaces/mobileRegistInterface","../interfaces/checkUserInterface","./checkI18nType","../config/i18n/i18nloginMsg","../config/loginMsg"],function(e,t,n){var a=e("../interfaces/pcUserRegistInterface"),i=e("../interfaces/mobileRegistInterface"),r=e("../interfaces/checkUserInterface"),o=Q.event.customEvent,s=new Q.ic.InfoCenter({moduleName:"pcUserRegistKit"}),l={},d=e("./checkI18nType");l=d&&!d.type?e("../config/i18n/i18nloginMsg"):e("../config/loginMsg"),n.exports={regist:function(e){e=e||{},window.location.href.indexOf("vip.")>-1&&(e.param.agenttype=5);var t=new a;t.request(e,function(t){t=t||{},t.data&&(t.data._loginName=e.param.email),"A00000"==t.code?o.fire({type:"registed",data:t.data}):(s.log(t.code+l[t.code]),o.fire({type:"registFail",data:{code:t.code,msg:l[t.code]}}))})},regByMobile:function(e){e=e||{},(new i).register(e,function(t){t=t||{},"A00000"==t.code?(t.data._loginName=e.cellphoneNumber,o.fire({type:"registed",data:t.data})):(s.log(t.code+l[t.code]),e&&2===e._pos?o.fire({type:"scrollfloater_mobile-failed",data:{code:t.code,msg:l[t.code]||t.msg}}):o.fire({type:"registFail",data:{code:t.code,msg:l[t.code]||t.msg}}))})},checkAccount:function(e,t){e=e||{},(new r).checkAccount(e,function(e){e=e||{},"A00000"==e.code?e.data===!0?t({code:"P00105",msg:l.P00105}):t({code:"A00000"}):"P00102"==e.code?t({code:"P00102",msg:l.P00102}):t(e)})},sendCode:function(e,t){e=e||{},(new i).sendCode(e,function(e){e=e||{},"A00000"!==e.code?(t&&t(e),s.log("mobile register send code error")):t(e)})}}});
define("interfaces/pcUserRegistInterface",["../kit/remoteInterface","../config/siteDomain","../kit/rsa"],function(e,t,n){var a=e("../kit/remoteInterface"),i=e("../config/siteDomain"),r=e("../kit/rsa"),o=i.getDomain();n.exports=Q.Class("pcUserRegistInterface",{construct:function(){this._remoteInterface=new a({url:"https://passport."+o+"/apis/reglogin/register.action"})},methods:{request:function(e,t){e=e||"",Q.browser.iPad&&(e.param.agenttype=10),e.param.passwd=r.rsaFun(e.param.passwd),this._remoteInterface.send(e,function(e){t&&t(e)})}}})});
define("interfaces/checkUserInterface",["../kit/remoteInterface2","../config/siteDomain"],function(e,t,n){var a=e("../kit/remoteInterface2"),i=e("../config/siteDomain"),r=i.getDomain();n.exports=Q.Class("checkUserInterface",{construct:function(){this._remoteInterface=new a({checkAccount:{url:"http://passport."+r+"/apis/user/check_account.action?t="+ +new Date}})},methods:{checkAccount:function(e,t){e=e||{},this._remoteInterface.send({method:"POST",ifname:"checkAccount",param:e,cors:!0,withCredentials:!0},function(e){t&&t(e)})}}})});
define("kit/remoteInterface2",["./checkRemoteData"],function(e,t,n){var a=e("./checkRemoteData");n.exports=Q.Class("RemoteInterface2",{construct:function(e){this._remoteInterfaces=e},methods:{send:function(e,t){var n=this,i=e.ifname,r=e.param,o=e.method||"GET",s=n._remoteInterfaces[i]||n._remoteInterfaces;Q.http.json2(s.url,{data:r,method:o,timeout:e.timeout,withCredentials:e.withCredentials,ifr:e.ifr,encodeFn:e.encodeFn,headers:e.headers,onsuccess:function(e,i){try{Q.log.log("send url : "+n._getUrl(s.url,r)+", Check result : "+a.check(s.struct,i))}catch(o){}t&&t(i)},onfailure:function(e,n){t&&t(n||{code:"E00000"})}})},_getUrl:function(e,t){var n=[];for(var a in t)n.push(a+"="+t[a]);return e+"?"+n.join("&")}}})});
define("config/i18n/i18nloginMsg",["../siteDomain"],function(e,t,n){var a=e("../siteDomain"),i="";i=a.isPPS()?"http://passport.pps.tv/user/login.php":"http://passport.qiyi.com/user/login.php",n.exports={A00000:"操作成功",A00101:"系統錯誤",P00101:"註冊來源錯誤",P00102:"請輸入正確的郵箱或手機號",P00103:"請輸入正確的郵箱",P00104:"密碼須為6-16位字母或數字",P00105:'該帳號已註冊，請直接<a  j-delegate="loginscroll" href="'+i+'">登錄</a>',P00106:'該手機已註冊，請直接<a  j-delegate="loginscroll" href="'+i+'">登錄</a>',P00107:"驗證碼錯誤，請重新輸入",P00108:"帳號或密碼錯誤，請重試",P00109:'僅支持中英文、數字或"_"',P00110:"昵稱已被占用，換壹個試試？",P00111:'該帳號尚未激活，<a href="{0}" target="_blank" class="onlink">重發激活郵件</a>',P00112:"郵箱未註冊",P00113:"當前密碼不正確",P00114:"新密碼格式格式不正確",P00115:"找回密碼鏈接失效",P00116:"找回密碼鏈接錯誤",P00117:"帳號或密碼錯誤，請重試",P00118:"帳號已激活，不用重發激活鏈接",P00119:"昵稱包含敏感字",P00121:"該郵箱未註冊",P00201:"缺少圖片",P00202:"圖片格式錯誤",T00115:"圖片尺寸有問題，請重新選擇",P00211:"抱歉！處理頭像圖片失敗，請重試",P00301:"此第三方帳號已經綁定過了",P00302:"此郵箱已經被占用，請直接綁定已有帳號",P00303:"系統繁忙，綁定失敗",P00304:"郵箱或密碼錯誤，請重試",P00305:"該郵箱已被其他帳號綁定，換壹個試試吧",P00306:"該帳號尚未激活，無法完成綁定",A00001:"用戶未登錄",E00000:"用戶名或密碼錯誤"}});
define("units/lazyload",["../components/units/pageJob","../kit/lazyload"],function(e){var t=e("../components/units/pageJob"),n=e("../kit/lazyload"),a="lazyload";t.create(a,{getDependentDoms:function(){var e={};return e},check:function(){return!0},exec:function(){n.init(),Q.event.customEvent.on("imagelazyload",function(){n.check()})},destroy:function(){n.destroy()}}),t.add(a)});
define("kit/lazyload",[],function(e,t,n){var a,i,r="data-lazy",o=function(){},s=function(e,t,n){e.attr("src",t),e.removeAttr(n),o(e)},l=function(){a||(a=Q.$("img["+r+"]"))},d=function(){l(),a&&a.length>0&&a.forEach(function(e){e=Q.$(e);var t=e.attr(r);t&&e.isInScreen()&&s(e,t,r)})},m=function(){i&&clearTimeout(i),i=setTimeout(function(){a=null},100),d()};n.exports={init:function(e){e=e||{},r=e.flag||r,o=e.ready||o,Q.$(window).on("scroll",m),Q.$(window).on("resize",m),d()},check:function(){a=null,d()},destroy:function(){Q.$(window).un("scroll",m),Q.$(window).un("resize",m),a=null}}});
define("units/externalLogin",["../components/units/pageJob","../kit/external","../kit/userInfo","../action/qipaLogin","../config/siteDomain"],function(e){function t(e,t){this.name=e,this.list=[],Q.object.extend(this,t),this._exec=this._exec.bind(this)}function n(e){var t={};return e.split(";").forEach(function(e){e=e.split("=");var n=e[0].replace(/\s+/,"");/Domain|Express|Path/.test(n)&&(n=n.toLowerCase()),t[n]=e[1]}),t}var a=e("../components/units/pageJob"),i=e("../kit/external"),r=e("../kit/userInfo"),o=e("../action/qipaLogin"),s=Q.event.customEvent,l=e("../config/siteDomain"),d="externalLogin",m=new Q.ic.InfoCenter({moduleName:d}),h=function(e,t,n){e&&setTimeout(function(){e.apply(t,n)},1)};Q.object.extend(t.prototype,{bind:function(e){return this.list.indexOf(e)>=0||!!this.list.push(e)},unbind:function(e){var t=this.list.indexOf(e);return 0>t||!!this.list.splice(t,1)},enable:function(){s.on(this.name,this._exec)},disable:function(){s.un(this.name,this._exec)},_exec:function(){h(this.exec,this,arguments)},exec:function(){for(var e=this.list,t=0,n=e.length;n>t;t++)try{e[t].apply(this,arguments)}catch(a){m.error(a)}}});var c;a.create(d,{check:function(){return!0},init:function(){var e=l.getDomain();c={login:new t("login"),logout:new t("logout")},i.add({on:function(e,t){return!!(e=c[e])&&e.bind(t)},un:function(e,t){return!!(e=c[e])&&e.unbind(t)},isLogin:function(){return r.isLogin()},openLoginBox:function(e,t){o.openLoginWindow(e,t&&function(){h(t,this,arguments)})},setLogin:function(e){e=JSON.parse(e);var t=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(t.push(i),a.push(n(e[i])));t.forEach(function(e,t){var n=decodeURIComponent(a[t][e]);delete a[t][e],Q.cookie.set(e,n,a[t])}),Q.event.customEvent.fire({type:"login",data:"client"})},setLogout:function(){var t=["P00001","P00002","P00003","P00010","P000email","P01010"];t.forEach(function(t){Q.cookie.remove(t,{domain:e,path:"/"})}),Q.event.customEvent.fire({type:"logout",data:"client"})}})},exec:function(){c.login.enable(),c.logout.enable()}}),a.add(d)});
define("action/pcLoginBox",["../components/action/adapter","../config/siteDomain"],function(e,t,n){var a=e("../components/action/adapter"),i=e("../config/siteDomain"),r=Q.event.customEvent;n.exports=Q.Class("PcLoginBox",{ns:Q.action,extend:a,construct:function(e){this.callsuper(e),this.init(),this.bindEvent()},properties:{timer:null},methods:{init:function(){this._loginSuccessBinded=this._loginSuccess.bind(this),this._loginFailedBinded=this._loginFailed.bind(this),this._logoutBinded=this._logout.bind(this)},bindEvent:function(){r.on("login",this._loginSuccessBinded),r.on("login-failed",this._loginFailedBinded),r.on("logout",this._logoutBinded)},_loginSuccess:function(){this._view.resetInput(!0),this._view.resetTips(),this._view.hideCode(),Q.cookie.remove("QC017",{path:"/",domain:i.SITE_DOMAIN})},_loginFailed:function(e){var t=!1;(1==e.data.needCode&&"P00141"!=e.data.code||"P00107"==e.data.code||"P00117"==e.data.code&&"1"==e.data.needCode)&&(Q.cookie.set("QC017","1",{path:"/",expires:1e5,domain:i.SITE_DOMAIN}),this._view.addPiccode(),this._view._setPiccodeVisible(),t=!0),"P00908"==e.data.code&&this._view.qrCodeLogin();var n=e.data.msg;n&&this._view.showErrorMsg(n),n.indexOf("验证码")>=0?this._view.doEdit("piccode"):n.indexOf("密码")>=0?this._view.doEdit("passwd"):(n.indexOf("帐号")>=0||n.indexOf("邮箱")>=0||n.indexOf("手机")>=0)&&this._view.doEdit("email"),!t&&this._view.piccodeVisible&&this._view.refreshPiccode()},_logout:function(){this._view.initLastAccount()},show:function(e){var t=this;t.timer&&clearTimeout(t.timer),e?t.timer=setTimeout(function(){t._view.show()},e):t._view.show()},hide:function(e){var t=this;t.timer&&clearTimeout(t.timer),e?t.timer=setTimeout(function(){t._view.hide()},e):t._view.hide()},initCode:function(){var e=this,t=e._view.piccodeVisible;t?e._view.refreshPiccode():1==Q.cookie.get("QC017")&&e._view.initCode()},cancelHide:function(){var e=this;e.timer&&e.visible()&&clearTimeout(e.timer)},toggle:function(e){var t=this;t.timer&&clearTimeout(t.timer),e?t.timer=setTimeout(function(){t._view.toggle()},e):t._view.toggle()},visible:function(){return this._view.visible},unBindEvent:function(){r.un("login",this._loginSuccessBinded),r.un("login-failed",this._loginFailedBinded),r.un("logout",this._logoutBinded)}}})});
define("kit/thirdPartyBtn",["../config/siteDomain"],function(e,t,n){var a=e("../config/siteDomain"),i=a.getDomain(),r='<a title="${title}" href="${href}" class="${class}" data-sourceId="${source}" j-delegate="${auth}" rseat="${rseat}"> </a>',o=new Q.plugins.Template(r),s=function(e,t){return o.evaluate({title:"微信","class":t||"weixin",source:"29",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=29&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})},l=function(e,t){return o.evaluate({title:"微博","class":t||"sinaweibo",source:"2",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=2&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})},d=function(e,t){return o.evaluate({title:"QQ","class":t||"qq",source:"4",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=4&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})},m=function(e,t){return o.evaluate({title:"百度","class":t||"baidu",source:"1",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=1&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})},h=function(e,t){return o.evaluate({title:"小米","class":t||"xiaomi",source:"30",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=30&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn",rseat:"1503171_mi"})},c=function(e,t){return o.evaluate({title:"京东","class":t||"jd",source:"31",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=31&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn",rseat:"508031_1"})},u=function(e,t){return o.evaluate({title:"人人","class":t||"renren",source:"3",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=3&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})},f=function(e,t){return o.evaluate({title:"开心","class":t||"kaixin",source:"6",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=6&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})},U=function(e,t){return o.evaluate({title:"支付宝","class":t||"zhifubao",source:"5",href:"http://passport."+i+"/apis/thirdparty/nlogin.action?type=5&isiframe=1&_pos=1&agenttype=1"+(e?"&requestType=1":""),auth:"authLoginBtn"})};n.exports={weixin:s,weibo:l,qq:d,baidu:m,xiaomi:h,jingdong:c,renren:u,kaixin:f,zhifubao:U}});
define("kit/pcVCodeKit",["../config/siteDomain"],function(e,t,n){var a=e("../config/siteDomain");n.exports={getVcode:function(){var e=window.location.protocol+"//passport."+a.getDomain()+"/register/vcode.php?r="+Math.random();return Q.event.customEvent.fire({type:"vcodechange",data:{url:e}}),e}}});
define("kit/placeholder",[],function(e,t,n){var a,i;n.exports={unBind:function(e){a&&e.un("focus",a),i&&e.un("blur",i)},simulate:function(e,t){if(e=Q.$(e),t=t||{},Q.browser.IE6||Q.browser.IE7||Q.browser.IE8||Q.browser.IE9){var n=e.attr("placeholder")||t.placeholder,r=e.attr("type"),o=t.tipColor||"#999",s=t.valColor||"#333",l=e.attr("tabindex");if(n)switch(n+="   ",r){case"password":var d=Q.$(document.createElement("input"));d[0].className=e[0].className,d.attr("type","text"),d.value(n),d.css("color",o),d.hide(),d.attr("tabindex","-1"),e.parent().insertBefore(d,e),d.on("focus",function(){d.hide(),e.css("display",""),e[0].focus(),e.attr("tabindex",l),d.attr("tabindex",-1)}),e.on("blur",function(){e.__value()||(e.hide(),d.css("display",""),e.attr("tabindex",-1),d.attr("tabindex",l))}),e.__value=e.value,e.value=function(t){if(arguments.length<1)return this.__value();var n=this.__value(t);return this.__value()?(d.hide(),e.css("display",""),e.attr("tabindex",l),d.attr("tabindex",-1)):(e.hide(),d.css("display",""),e.attr("tabindex",-1),d.attr("tabindex",l)),n};var m=e[0];m.__focus=m.focus,m.focus=function(){d.hide(),e.css("display",""),m.__focus();var t=m.value.length;if(m.createTextRange){var n=m.createTextRange();n.move("character",t),n.collapse(),n.select()}else m.setSelectionRange(0,t),m.__focus()},e.__value()||(e.hide(),d.css("display",""),e.attr("tabindex","-1"),d.attr("tabindex",l));break;default:e.__value=e.value,e.value=function(t){if("undefined"==typeof t)return t=this.__value(),t===n?"":t;var a=this.__value(t);return this.__value()?e.css("color",s):(e.__value(n),e.css("color",o)),a},a=function(){var n=e.attr("placeholder")||t.placeholder;n+="   ",e.__value()===n&&(e.__value(""),e.css("color",s))},e.on("focus",a),i=function(){if(!e.__value()){var n=e.attr("placeholder")||t.placeholder;n+="   ",e.__value(n),e.css("color",o)}},e.on("blur",i),e.__value()||(e.__value(n),e.css("color",o))}}return e}}});
define("view/pcBoxViewTpl",["../kit/thirdPartyBtn","../config/siteDomain"],function(e,t,n){var a=e("../kit/thirdPartyBtn"),i=e("../config/siteDomain"),r={getLoginTpl:function(e){var t='<i class="nav_arrow"></i>',n="爱奇艺",r="http://passport.iqiyi.com/pages/secure/password/find_pwd_index.action";i.isPPS()&&(n="PPS");var o="登录爱奇艺，悦享品质生活";e.isVlib&&(o="爱奇艺影视大全，覆盖全网更新最快");var s=['<div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box" data-loginbox-elem="main">'+t,'<div class="userLogin-title">',"<h2>"+o+"</h2>","</div>",'<div data-loginbox-elem="table" class="usrTxGeneral-box_v3" style="display: block;">','<div class="mailType-box-login" style="display:none ;" data-loginbox-elem="loginMailSuggest">','<ul class="mailType-list">','<li data-mailsuggest-elem="item" data-index="0">请选择或继续输入...</li>','<li data-mailsuggest-elem="item" data-index="1" class="selected">qiyiria@gmail.com</li>',"</ul>","</div>",'<div class="logReg-form">','<div data-loginbox-elem="errDom" class="errorArea"><span class="mobile-tips"></span></div>','<table class="tabs-regRorm notest-tabs" data-loginbox-elem="loginTable">',"<tbody>",'<tr data-loginbox-elem="emailTr">',"<th>帐&nbsp;&nbsp;&nbsp;号：</th>","<td>",'<div data-loginbox-elem="emailWrap" class="acountBorder">','<input type="text" placeholder="请输入手机/邮箱" class="in-txt" data-loginbox-elem="emailInput" tabindex="1">','<a title="爱奇艺手机APP扫二维码登录" data-loginbox-elem="switchToQrCodeLogin" class="iqyCode-mini" href="javascript:;" rseat="140711_tdenter_navlgin"></a>',"</div>","</td>","</tr>",'<tr data-loginbox-elem="passwdTr">',"<th>密&nbsp;&nbsp;&nbsp;码：</th>","<td>",'<div data-loginbox-elem="passwdWrap" class="acountBorder">','<input type="password" placeholder="请输入密码" data-loginbox-elem="passwdInput" class="in-txt" tabindex="2">',"</div>","</td>","</tr>",'<tr style="display:none;" data-loginbox-elem="piccodeTr">',"<th></th>","<td>",'<div class="acountCode acountBorder acountYzm" data-loginbox-elem="piccodeWrap">','<input placeholder="请输入验证码" class="in-txt" data-loginbox-elem="piccodeInput" tabindex="3" type="text">','<span class="in-xline"></span><span class="yzimg" data-loginbox-elem="piccode">',"</span>","</div>",'<a class="refreshContent" href="javascript" data-loginbox-elem="refreshPiccodeWrapper">','<i class="loginIcon refreshIcon" data-loginbox-elem="refreshPiccode"></i>',"</a> ","</td>","</tr>","<tr>","<th></th>",'<td class="pb16"><div data-loginbox-elem="autoLoginWrap" class="itemregLast">','<div class="logAuto"><span data-loginbox-elem="autoLogin" class="selected">记住我</span></div>','<div class="logAutoRightCon">','<a href="'+r+'">找回密码</a>','<i class="RegNowLine"></i>','<a class="" href="javascript:void(0)" j-delegate="registerscroll" rseat="1412242_rgn">立即注册</a>',"</div>","</div></td>","</tr>","<tr>","<th></th>",'<td class="pb0"><div class="login_submitV3"><a data-loginbox-elem="loginBtn" class="submitV3Btn" rseat="1412242_lgn" href="#">登录</a></div></td>',"</tr>",'<tr class="cooperation-account">',"<th></th>",'<td class="pb0">','<div class="divide-line-ico">','<a class="J_pop-third-downbtn" href="javascript:void(0)">',"使用其他方式登录",'<div class="divide-line-con">','<i class="loginIcon arrowDown"></i>',"</div>","</a> ",'<div class="arrowUpCon dn J_pop-third-box">','<div class="otherBind-big clearfix">',a.weibo(null,"loginIcon weibo"),a.qq(null,"loginIcon qq"),a.weixin(null,"loginIcon weixin"),a.baidu(null,"loginIcon baidu"),a.zhifubao(null,"loginIcon zhifubao"),a.renren(null,"loginIcon renren"),a.xiaomi(null,"loginIcon xiaomi"),a.jingdong(null,"loginIcon jd"),"</div>",'<div class="divide-line-con">','<a href="javascript:void(0)" class="J_pop-third-upbtn">','<i class="loginIcon arrowUp"></i>',"</a>","</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</div>","</div>",'<div class="iqyNav-code" data-widget-qrcodelogin="qrCodeLogin" style="display:none;">','<div class="iqyCode-wrap">','<div class="iqyCode-bd clearfix">','<div class="iqyCode-lt">','<p class="p-txt1">扫描二维码登录</p>','<p class="p-txt2">使用爱奇艺手机APP"扫一扫"</p>','<p class="p-txt2">用手机帐号同步在电脑登录</p>','<p class="p-tipPic">','<img width="119" height="108" src="http://www.qiyipic.com/common/fix/site/code-pic-small.png">',"</p>","</div>",'<div class="iqyCode-rt">','<p class="return-web"><a class="green" href="javascript:;" data-qrcodelogin-elem="returnBtn">返回&gt;</a></p>','<div style="display:;" class="iqyCode-container"  data-qrcodelogin-elem="loadedWrapper">','<p class="iqyCode-pic" data-qrcodelogin-elem="qrcodeImgCon">','<img width="135" height="135" src="http://www.qiyipic.com/common/fix/site/iqyCode-small.jpg" data-qrcodelogin-elem="qrcodeImg">',"</p>",'<p class="updateCode">','<em class="green" data-qrcodelogin-elem="refreshTimerNum">60</em>秒后为您更新二维码',"</p>","</div>",'<div style="display:none" class="codeBorder suc-login-tip" data-qrcodelogin-elem="loginSuccessWrapper">','<span class="suc-txt green">您已成功登录！</span>',"</div>",'<div class="getcodePic-con" style="display:none;" data-qrcodelogin-elem="loadingWrapper">','<div class="codeBorder getcodePic">','<div class="getCode-bd">','<p><img src="http://www.qiyipic.com/common/images/load.gif"></p>','<span class="getIngTxt">正在获取...</span>',"</div>","</div>",'<p class="updateCode">','<em class="green">60</em>秒后为您更新二维码',"</p>","</div>",'<div class="codeBorder getCode-error" style="display:none" data-qrcodelogin-elem="loadFailWrapper">',"<i></i>",'<div class="againGet">',"<p>获取二维码失败</p>",'<p>请<a href="javascript:;" data-qrcodelogin-elem="reloadBtn">点击此处重试</a></p>',"</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join("");return s},getRegistTpl:function(){var e='<i class="nav_arrow"></i>',t="爱奇艺",n="http://passport.iqiyi.com/register/protocol.php",r="《用户服务协议》";i.isPPS()&&(t="PPS",n="http://passport.iqiyi.com/pages/register/ppsprotocol.action",r="《用户服务协议》");var o=['<div class="usrTxGeneral-box usrTx-box_popup usrTx-login-box" data-registbox-elem="main">'+e,'<div class="userLogin-title">',"<h2>登录爱奇艺，悦享品质生活</h2>","</div>",'<div data-registbox-elem="registpanel" class="usrTxGeneral-box_v3 box_v3AddCode" style="display: block;">','<div class="mailType-box-login" style="display: none;" data-registbox-elem="loginMailSuggest">','<ul class="mailType-list">','<li data-mailsuggest-elem="item" data-index="0">请选择或继续输入...</li>','<li data-mailsuggest-elem="item" data-index="1" class="selected">qiyiria@gmail.com</li>',"</ul>","</div>",'<div class="logReg-form">','<div data-registbox-elem="errDom" class="errorArea">',"<span></span>",'<span class="dn">帐号或密码错误</span>','<span class="dn">密码已错误X次，再输错X次帐号将被锁定24小时</span>','<span class="dn">密码错误已达10次，请24小时后再试或<a href="#">找回密码</a></span>',"</div>",'<table class="tabs-regRorm notest-tabs" data-registbox-elem="loginTable">',"<tbody>",'<tr data-registbox-elem="emailTr" class="J_account-tr" data-type="phone">','<th class="J_account-title">手&nbsp;&nbsp;&nbsp;机：</th>',"<td>",'<div data-registbox-elem="emailWrap" class="acountBorder fl">','<input type="text" placeholder="请输入手机号码" class="in-txt J_account-inp" data-registbox-elem="emailInput" tabindex="1">','<span class="emailReg">','<a href="javascript:void(0)" class="J_account-btn">邮箱注册</a>',"</span>","</div>","</td>","</tr>",'<tr data-registbox-elem="passwdTr">',"<th>密&nbsp;&nbsp;&nbsp;码：</th>","<td>",'<div data-registbox-elem="passwdWrap" class="acountBorder fl">','<input type="password" placeholder="8~20位字母、数字或字符，至少包含两种" data-registbox-elem="passwdInput" class="in-txt" tabindex="2">',"</div>",'<div class="mod-passwordStrength dn passwordStrength_level1"  data-registbox-elem="pwdstrong">','<div class="passwordStrength_results">','<span class="strengthResult_1">弱</span>','<span class="strengthResult_2">中</span>','<span class="strengthResult_3">强</span>',"</div>",'<div class="passwordStrength">','<div class="passwordStrength_blocks">','<span class="strengthBlock_1"></span>','<span class="strengthBlock_2"></span>','<span class="strengthBlock_3"></span>',"</div>","</div>","</div>","</td>","</tr>",'<tr style="display:;" data-registbox-elem="piccodeTr">',"<th></th>","<td>",'<div class="acountCode acountBorder fl J_pic-code-box" data-registbox-elem="piccodeWrap">','<input placeholder="请输入验证码" class="in-txt" data-registbox-elem="piccodeInput" tabindex="3" type="text">','<span class="in-xline dn J_line-icon"></span>','<span class="yzimg J_pic-code dn" data-registbox-elem="piccode">',"</span>",'<span class="free-yzm-get" data-registbox-elem="sms">','<a href="" data-registbox-elem="getSms">免费获取短信</a>','<span class="getSms_already" data-registbox-elem="timer" style="display:none;">','<span data-registbox-elem="timerNum"></span>秒后重新获得',"</span>","</span>","</div>",'<a class="refreshContent dn J_pic-code-btn" href="javascript:void(0)" data-registbox-elem="refreshPiccodeWrapper">','<i class="loginIcon refreshIcon" data-registbox-elem="refreshPiccode"></i>',"</a>","</td>","</tr>","<tr>","<th></th>","<td>",'<div data-registbox-elem="autoLoginWrap" class="itemregLast">','<div class="logAuto">','<span data-registbox-elem="protocol" class="selected">我同意<a href="'+n+'">'+r+"</a>","</span>","</div>",'<div class="logAutoRightCon">','<a href="#" j-delegate="loginscroll" rseat="1411201_lgn">立即登录</a>',"</div>","</div>","</td>","</tr>","<tr>","<th></th>",'<td class="pb0">','<div class="login_submitV3">','<a data-registbox-elem="registBtn" class="submitV3Btn w200" rseat="1411201_rgt" href="javascript:void(0)">注册</a>',"</div>","</td>","</tr>",'<tr class="cooperation-account">',"<th></th>",'<td class="pb0">','<div class="divide-line-ico">','<a class="J_pop-third-downbtn" href="javascript:void(0)">',"使用其他方式登录",'<div class="divide-line-con">','<i class="loginIcon arrowDown"></i>',"</div>","</a>",'<div class="arrowUpCon dn J_pop-third-box">','<div class="otherBind-big clearfix">',a.weibo(null,"loginIcon weibo"),a.qq(null,"loginIcon qq"),a.weixin(null,"loginIcon weixin"),a.baidu(null,"loginIcon baidu"),a.zhifubao(null,"loginIcon zhifubao"),a.renren(null,"loginIcon renren"),a.xiaomi(null,"loginIcon xiaomi"),a.jingdong(null,"loginIcon jd"),"</div>",'<div class="divide-line-con">','<a href="javascript:void(0)" class="J_pop-third-upbtn">','<i class="loginIcon arrowUp"></i>',"</a>","</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</div>","</div>",'<div data-registbox-elem="vertifymail" style="display:none;" class="usrTxGeneral-box_v3 box_active">','<div class="logReg-form">','<div class="emailActivation">','<h3 class="eA_title"><i class="site-icons icon-submitSuccessful"></i><span>还差一步即可完成注册</span></h3>','<div class="eA_content">','<p>我们已经向您的邮箱  <span data-emailname="email"></span>发送了一封激活邮件，请点击邮件中的链接完成注册！</p>','<p class="eA_operation"><a href="javascript:void()" class="eA_links" rseat="1411201_alt" j-delegate="modifyemail">更改注册邮箱</a></p>',"</div>",'<div class="login_submitV3"><a class="submitV3Btn" href="javascript:void()" rseat="1411201_eml" data-entermail="enter">立即进入邮箱</a></div>','<div class="eA_desc">如果无法自动跳转，请手动打开邮箱</div>',"</div>","</div>",'<div class="bindOther-box">','<div class="emailActivation_q">','<h4 class="eA_title">没有收到激活邮件？</h4>','<div class="eA_content">','<p><i class="site-icons square-icon"></i><span>看看是否在邮件的回收站中、垃圾邮件中</span></p>','<p><i class="site-icons square-icon"></i><span>重新发送，</span>','<a href="javascript:void()" rseat="1411201_rem" class="eA_links" j-delegate="resendemail">重发一封</a></p>',"</div>","</div>","</div>","</div>","</div>"].join("");return o}};n.exports=r});
define("action/pcRegistBox",["../components/action/adapter","../kit/blockPingback"],function(e,t,n){var a=e("../components/action/adapter"),i=Q.event.customEvent,r=e("../kit/blockPingback");n.exports=Q.Class("PcRegistBox",{ns:Q.action,extend:a,construct:function(e){this.callsuper(e),this.init(),this.bindEvent()},properties:{timer:null},methods:{init:function(){var e=this;this._loginSuccessBinded=this.loginSuccess.bind(this),this._logoutBinded=this.logout.bind(this),this._registFailBinded=this._registFail.bind(this),this._registedBinded=function(t){e._registSuccess(t)}},bindEvent:function(){i.on("login",this._loginSuccessBinded),i.on("logout",this._logoutBinded),i.on("registFail",this._registFailBinded),i.on("registed",this._registedBinded)},initCode:function(){var e=this;e._view.initCode()},loginSuccess:function(){this.resetInput(!0),this.resetTips()},logout:function(){this.refreshPiccode()},_registSuccess:function(e){r.send("pcwregok"),window.lib.__callbacks__.login_success(e||{})},_registFail:function(e){if("P00148"==e.data.code)this._view.showErrorMsg("密码安全等级非常低，请更换密码");else{var t=e.data.msg||"";t.indexOf("验证码")>=0?"P00405"==e.data.code?(this._view.doEdit("smscode"),this._view.showErrorMsg("手机验证码错误")):(this._view.doEdit("piccode"),this._view.showErrorMsg("图文验证码错误")):t.indexOf("密码")>=0?(this._view.showErrorMsg("密码须为4-20位字母或数字"),this._view.doEdit("passwd")):this._view.showErrorMsg(t),this.refreshPiccode()}},resetTips:function(){this._view.resetTips()},resetInput:function(e){this._view.resetInput(e)},refreshPiccode:function(){this._view.refreshPiccode()},show:function(e){var t=this;t.timer&&clearTimeout(t.timer),e?t.timer=setTimeout(function(){t._view.show()},e):t._view.show()},hide:function(e){var t=this;t.timer&&clearTimeout(t.timer),e?t.timer=setTimeout(function(){t._view.hide()},e):t._view.hide()},cancelHide:function(){var e=this;e.timer&&e.visible()&&clearTimeout(e.timer)},toggle:function(e){var t=this;t.timer&&clearTimeout(t.timer),e?t.timer=setTimeout(function(){t._view.toggle()},e):t._view.toggle()},visible:function(){return this._view.visible},unBindEvent:function(){i.un("login",this._loginSuccessBinded),i.un("logout",this._logoutBinded),i.un("registFail",this._registFailBinded),i.un("registed",this._registedBinded)}}})});
define("view/pcRegistBoxView",["../components/view/view","../kit/blockPingback","../kit/pcLogin","../kit/validate","../kit/thirdPartLogin","../kit/thirdPartyBtn","../kit/pcVCodeKit","../kit/placeholder","../kit/pcUserRegistKit","../config/siteDomain","../view/pcBoxViewTpl"],function(e,t,n){var a=e("../components/view/view"),i=e("../kit/blockPingback");e("../kit/pcLogin");var r=e("../kit/validate");e("../kit/thirdPartLogin"),e("../kit/thirdPartyBtn");var o=e("../kit/pcVCodeKit"),s=e("../kit/placeholder").simulate,l=e("../kit/pcUserRegistKit");e("../config/siteDomain");var d=e("../view/pcBoxViewTpl"),m=Q.event.customEvent,h=0,c=!0,u="点击太频繁啦，客官您歇会儿……",f=!1,p=!1,U=function(e,t,n){e&&e.on&&e.on(t,n)};n.exports=Q.Class("PcRegistBoxView",{ns:Q.view,extend:a,construct:function(e,t){this._doms=e||{},this._opt=Q.object.extend({inputFocusClass:"acountIn",protocolSelectedClass:"selected",smsClass:"acount-getSms",smsWait:90,submitBtnDisabledClass:"submit-gray",defaultTxt:"",accountType:"mobile",alreadyRendered:!1,initStatus:"hide"},t),this.visible=!0,this.domReady=!1,this.defaultAccoutnType=this._opt.accountType,this.accountType=this._opt.accountType},methods:{init:function(){"hide"===this._opt.initStatus?this.hide():this._opt.alreadyRendered&&(this.initRegistPanel(),this.resetTips("all"))},show:function(){i.send("pcwregdlg"),this.visible||(this.domReady||this.initRegistPanel(),this.resetInput(!1),this.resetTips("all"),m.fire({type:"beforePcRegistBoxShow",data:{wrapper:this._doms.wrapper}}),this._doms.wrapper.show(),this.visible=!0,this._doms.bg&&this._doms.main&&this._doms.bg.css("height",this._doms.main.height()-2+"px"),m.fire({type:"pcRegistBoxShow",data:{wrapper:this._doms.wrapper}}))},hide:function(){this.visible&&(this.domReady&&(this.resetInput(!1),this.resetTips("all")),this.visible=!1,this._doms.wrapper&&"popup"==this._doms.wrapper.attr("data-from")&&this.showVertifyPanel(this._doms.wrapper),m.fire({type:"beforePcRegistBoxHide",data:{wrapper:this._doms.wrapper}}),this._doms.wrapper.hide(),m.fire({type:"pcRegistBoxHide",data:{wrapper:this._doms.wrapper}}))},toggle:function(){this.visible?this.hide():this.show()},initRegistPanel:function(){this._rendererPanel(),this._bindEvent(),this.domReady=!0},_rendererPanel:function(){var e=d.getRegistTpl(),t=this._doms,n=t.wrapper;if(n){this._opt.alreadyRendered||n.html(e),(n.down("[data-registbox-elem]")||[]).forEach(function(e){e=Q.$(e),t[e.attr("data-registbox-elem")]=e}),t.inputs={},t.wraps={};var a=1;["email","passwd","piccode","smscode"].forEach(function(e){t[e+"Input"].attr("tabindex",a),a++,t.inputs[e]=s(t[e+"Input"],{tipColor:"#333"}),t.wraps[e]=t[e+"Wrap"]}),this.domReady=!0,m.fire({type:"pcUserRegDomReady",data:{wrapper:t.registMailSuggest,html:e,input:this._doms.inputs.email}})}},_bindEvent:function(){var e=this,t=this._doms;e._inpsEvent(t),e._inpsFireEvent(t);var n=Q.$('[data-registbox-elem="pwdstrong"]'),a="passwordStrength_level1",i="passwordStrength_level2",o="passwordStrength_level3",s=function(e){e=r.getScore(e),n.removeClass("dn"),n.removeClass(a),n.removeClass(i),n.removeClass(o),e>=70?n.addClass(o):e>=40&&70>=e?n.addClass(i):40>=e&&(n.addClass(a),0===e&&n.addClass("dn"))};U(t.passwdInput,"blur",function(){var n=t.passwdInput.value().trim();""!==n&&e.validate("passwd",null)}),U(t.passwdInput,"keydown",function(e){var n=Q.event.get(e).keyCode;if(13!=n){var a=t.passwdInput.value().trim();s(a)}}),U(t.passwdInput,"keyup",function(e){var n=Q.event.get(e).keyCode;if(9!=n&&13!=n){var a=t.passwdInput.value().trim();s(a)}});var d=t.delemailinput;U(d,"click",function(e){Q.event.get(e).preventDefault(),t.emailInput.value("")});var h=t.protocol;U(h,"click",function(n){var a=Q.$(n.target||n.srcElement);"A"!=a.attr("tagName").toUpperCase()&&(h.hasClass(e._opt.protocolSelectedClass)?(h.removeClass(e._opt.protocolSelectedClass),t.registBtn.addClass(e._opt.submitBtnDisabledClass)):(h.addClass(e._opt.protocolSelectedClass),t.registBtn.removeClass(e._opt.submitBtnDisabledClass)))}),U(t.refreshPiccode,"click",function(t){Q.event.get(t).preventDefault(),e.refreshPiccode()}),U(t.piccode,"click",function(t){Q.event.get(t).preventDefault(),setTimeout(function(){e.refreshPiccode()},0)}),U(t.registBtn,"click",function(n){Q.event.get(n).preventDefault(),t.registBtn.hasClass(e._opt.submitBtnDisabledClass)||(f=!0,e.doReg(n))});var p=null;if(U(t.getSms,"click",function(n){return Q.event.get(n).preventDefault(),e.validate("email",null)?(c=!0,clearTimeout(p),p=setTimeout(function(){Q(t.getSms).is(":visible")&&c?e.showErrorMsg(u):clearTimeout(p)},3e3),l.sendCode({requestType:1,agenttype:1,cellphoneNumber:t.inputs.email.value().trim(),vcode:t.inputs.piccode.value().trim(),serviceId:2},function(n){if(c=!1,"A00000"===n.code){t.getSms.hide(),t.timer.css("display","");var a=e._opt.smsWait,i=setInterval(function(){t.timerNum.html(--a),0>=a&&(clearInterval(i),t.getSms.css("display",""),t.timer.hide())},1e3);t.timerNum.html(a)}else"E00000"===n.code?e.showErrorMsg(u):(e.refreshPiccode(),e.showErrorMsg(n.msg))}),void 0):(e.showErrorMsg("手机号格式错误"),void 0)}),t.wrapper.delegate("authLoginBtn",function(e){Q.event.get(e.event).preventDefault();var t=Q.$(e.target);t.attr("data-sourceId")}),t.switchToQrCodeLogin){var V="hideQrCodeLoginFloater";Q.browser.IE6&&(t.switchToQrCodeLogin[0].setAttribute("tabindex",-1),t.switchToQrCodeLogin[0].setAttribute("tabIndex",-1)),t.switchToQrCodeLogin.on("click",function(){var e={},n="",a=0;t.formRegistWrapper?(t.formRegistWrapper.hide(),n="showQrCodeLoginFloater",e.returnEventName=V,m.fire({type:n,data:e})):(n="showFormLoginFloaterFromRegist",e.returnDelegate="registerscroll",a=100,setTimeout(function(){m.fire({type:n,data:e})},a))}),t.formRegistWrapper&&m.on(V,function(){t.formRegistWrapper.show()})}},_inpsEvent:function(e){var t=this;e.inputs.email.on("keydown",function(t){var n=Q.event.get(t).keyCode;13==n&&e.inputs.passwd[0].focus()}),Q.object.forEach(e.inputs,function(n,a){if(n){var i=e.wraps[a];n.on("focus",function(){(i||n).addClass(t._opt.inputFocusClass),m.fire({type:"registInputBegin",data:{input:n}}),"email"===a&&(p=!0)}),n.on("blur",function(e){var r=Q.event.get(e).target;Q.$(r).attr("tabindex"),(i||n).removeClass(t._opt.inputFocusClass),t._doms.wrapper.down("input:focus")||m.fire({type:"registInputEnd",data:{lastInput:n}}),"email"===a&&(p=!1)}),"email"!==a&&n.on("keydown",function(n){13==n.keyCode&&(Q.event.get(n).preventDefault(),t.doReg(n),e.inputs.piccode[0].focus(),"piccode"==a&&(1==h?e.inputs.email[0].focus():2==h?e.inputs.passwd[0].focus():3==h?e.inputs.piccode[0].focus():4==h&&e.inputs.smscode[0].focus()))}),"email"===a&&n.on("blur",function(){setTimeout(function(){t.validate("email",null)&&l.checkAccount({account:e.inputs.email&&e.inputs.email.value(),agenttype:1},function(e){"A00000"!=e.code?t.showErrorMsg(e.msg):t.showErrorMsg("")}),e.inputs.email.value()||f||p||t.showErrorMsg(" "),f=!1},300)})}})},_inpsFireEvent:function(e){var t=this;m.on("mailSuggestHide",function(t){t.data.input[0]===e.inputs.email[0]&&e.inputs.passwd[0].focus()}),m.on("rePcRegistBoxShow",function(){1!=t._opt.hackNoDisplay&&(t.hide(),t.show())}),m.on("showVertifyEmailPanel",function(e){t.showVertifyPanel(e.data.wrap)})},doEdit:function(e){e=this._doms.inputs[e],e&&(e=e[0],setTimeout(function(){e.focus(),e.select()},0))},doReg:function(){var e=this,t=e._doms;if(!this._doms.protocol.hasClass(this._opt.protocolSelectedClass))return this.showErrorMsg("协议未勾选"),void 0;var n=this.getRegisterData();n._pos=1,n.agenttype=1;var a=this.validate(null,n);a&&(n.piccode=t.inputs.smscode.value().trim(),l.regByMobile({authCode:n.piccode,agenttype:1,cellphoneNumber:n.email,password:n.passwd,_pos:1,serviceId:2}))},showVertifyPanel:function(e){if(e=e||this._doms.wrapper){var t=e.down('[data-registbox-elem="registpanel"]'),n=e.down('[data-registbox-elem="table"]'),a=e.down('[data-registbox-elem="vertifymail"]'),i=t||n,r=a;if(!Q.cookie.get("P00011"))return r&&r.hide(),i&&i.show(),0;try{return r.show(),i.hide(),m.fire({type:"showVertifyEmailInfo",data:{wrap:r}}),1}catch(o){r&&r.hide(),i&&i.show()}}},getRegisterData:function(){var e=this._doms,t=window.location.href,n="http://passport.iqiyi.com/pages/secure/reg.action",a="http://passport.iqiyi.com/pages/secure/index.action",i="http://passport.iqiyi.com/pages/register/index.action",r="http://www.iqiyi.com/u/";t.indexOf(n)>=0?t=a:t.indexOf(i)>=0&&(t=r);var o={email:e.inputs.email&&e.inputs.email.value(),passwd:e.inputs.passwd.value().trim(),piccode:e.inputs.piccode.value().trim(),smscode:e.inputs.smscode.value().trim(),source:"3",fromurl:encodeURIComponent(t)};return o},resetInput:function(e){var t=Q.$('[data-registbox-elem="pwdstrong"]'),n=this._doms.inputs;e&&n.email.value(""),n.passwd.value(""),n.piccode.value(""),t&&t.addClass("dn")},resetTips:function(){this.showErrorMsg()},initCode:function(){this.refreshPiccode()},refreshPiccode:function(){this._doms.piccode,this._doms.piccode.html("<img src='"+o.getVcode()+"'/> "),this._doms.inputs.piccode.value("")},validate:function(e,t){h=0;var n=t||this.getRegisterData();if(!(e&&"email"!==e||r.mobile(n.email)||/^09\d{8}$/.test(n.email)))return this.showErrorMsg("手机格式错误"),e||this.doEdit("email"),h=1,!1;if(!e||"passwd"===e){if(!r.specialPwd(n.passwd))return this.showErrorMsg("密码包含无效字符"),e||this.doEdit("passwd"),h=2,!1;if(!r.pwd(n.passwd))return this.showErrorMsg("8~20位字母、数字或字符，至少包含两种"),e||this.doEdit("passwd"),h=2,!1}return e&&"piccode"!==e||r.empty(n.piccode)?e&&"smscode"!==e||r.empty(n.smscode)?(this.showErrorMsg(),!0):(this.showErrorMsg("短信验证码错误"),e||this.doEdit("smscode"),h=4,!1):(this.showErrorMsg("图文验证码错误"),e||this.doEdit("piccode"),h=3,!1)},showErrorMsg:function(e){this._doms.errDom.show(),this._doms.pwdstrongwrap&&this._doms.pwdstrongwrap.hide(),this._doms.errDom.html(e||this._opt.defaultTxt)}}})});
define("units/qrCodeLogin",["../components/units/pageJob","../kit/userInfo","../components/action/checkDoms","../action/qrCodeLoginAction","../view/qrCodeLoginView"],function(e,t,n){var a=e("../components/units/pageJob"),i=Q.event.customEvent;e("../kit/userInfo");var r,o=e("../components/action/checkDoms"),s=e("../action/qrCodeLoginAction"),l=e("../view/qrCodeLoginView"),d="qrCodeLogin";a.create(d,{getDependentDoms:function(){var e=Q.$("[data-widget-qrcodelogin]");return e?r={widget:e,returnBtn:e.down('[data-qrcodelogin-elem="returnBtn"]'),loadingWrapper:e.down("[data-qrcodelogin-elem=loadingWrapper]"),loadedWrapper:e.down('[data-qrcodelogin-elem="loadedWrapper"]'),loadFailWrapper:e.down("[data-qrcodelogin-elem=loadFailWrapper]"),loginSuccessWrapper:e.down("[data-qrcodelogin-elem=loginSuccessWrapper]"),qrcodeImgCon:e.down("[data-qrcodelogin-elem=qrcodeImgCon]"),qrcodeImg:e.down("[data-qrcodelogin-elem=qrcodeImg]"),refreshTimerNum:e.down("[data-qrcodelogin-elem=refreshTimerNum]"),reloadBtn:e.down("[data-qrcodelogin-elem=reloadBtn]")}:!0},check:function(e){try{o(e)}catch(t){}return!0},init:function(){},exec:function(){this.bindEvent()},bindEvent:function(){var e=this;i.on("showQrcodeLoginFloater",function(t){var n=t.data,a=n.qrcodeLoginDoms;a||(a=r),a._qrCodeLoginAction?a._qrCodeLoginAction.show(n):e.initLoginBox(a,function(e){a._qrCodeLoginAction=e,e.show(n)})}),i.on("qrCodeLoginDomReady",function(t){var n=t.data,a=n.qrcodeLoginDoms;a&&e.initLoginBox(a,function(e){a._qrCodeLoginAction=e})})},initLoginBox:function(e,t){var n=new l(e),a=new s({doms:e,view:n});t(a)},doLogin:function(){},doLogout:function(){}}),a.add(d),n.exports=d});
define("action/qrCodeLoginAction",["../components/action/adapter","../config/siteDomain"],function(e,t,n){var a=e("../components/action/adapter");e("../config/siteDomain");var i=Q.event.customEvent;n.exports=Q.Class("QrCodeLoginAction",{ns:Q.action,extend:a,construct:function(e){this._doms=e.doms,this.callsuper(e),this.init(e),this.bindEvent()},properties:{timer:null},methods:{init:function(){},bindEvent:function(){i.on("login",this._loginSuccess.bind(this)),i.on("login-failed",this._loginFailed.bind(this)),i.on("logout",this._logout.bind(this))},show:function(e){var t=this;this._view.show(e),this._returnBtnClick&&this._doms.returnBtn.un("click",this._returnBtnClick),this._returnEventNameHandler&&this._doms.returnBtn.un("click",this._returnEventNameHandler),this._doms.returnBtn.attr("j-delegate",""),e.returnDelegate&&(this._doms.returnBtn.attr("j-delegate",e.returnDelegate),this._returnBtnClick=function(){t._view.hide()},this._doms.returnBtn.on("click",this._returnBtnClick)),e.returnEventName&&(this._returnEventNameHandler=function(){t._view.hide(),i.fire({type:e.returnEventName,data:e})},this._doms.returnBtn.on("click",this._returnEventNameHandler))},_loginSuccess:function(){},_loginFailed:function(){},_logout:function(){}}})});
define("view/qrCodeLoginView",["../components/view/view","../kit/qrCoder","../kit/qrcodeLoginKit","../kit/userInfo","../config/siteDomain","../kit/blockPingback"],function(e,t,n){var a=e("../components/view/view"),i=e("../kit/qrCoder"),r=e("../kit/qrcodeLoginKit");e("../kit/userInfo"),e("../config/siteDomain");var o=e("../kit/blockPingback"),s=Q.event.customEvent,l="http://www.qiyipic.com/common/fix/site/refresh_invalid.png";n.exports=Q.Class("QrCodeLoginView",{ns:Q.view,extend:a,construct:function(e,t){this._opt=t=t||{},this._doms=e||{},this.visible=t.visible||!0,this._pullInterval=t.pullInterval||2e3,this.domReady=t.domReady||!1},methods:{init:function(){var e=this;"hide"===this._opt.initStatus?this.hide():this._opt.alreadyRendered&&(this.initLoginPanel(),this.resetTips()),s.on("pcLoginBoxHide",function(){e.hide()}),this._doms.reloadBtn&&this._doms.reloadBtn.on("click",e.refreshQrcode.bind(e))},show:function(e){this.hiden=!1;var t,n,a,i=e.isDeviceLock,r=e.isI18n;r?(t=i?"您的賬號開啟了設備鎖，請用主設備手機掃碼登入":"掃描二維碼登入",n=i?"打開愛奇藝手機APP，在右上":'使用愛奇藝手機APP"掃壹掃"',a=i?"角“+”號裏找到“掃壹掃”":"用手機賬號同步在電腦登入"):(t=i?"您的账号开启了设备锁，请用主设备手机扫码登录":"扫描二维码登录",n=i?"打开爱奇艺手机APP，在右上":'使用爱奇艺手机APP"扫一扫"',a=i?"角“+”号里找到“扫一扫”":"用手机账号同步在电脑登录");var s=Q(this._doms.widget);s.find("[data-p-title]").text(t),s.find("[data-p-one]").text(n),s.find("[data-p-two]").text(a),s.show(),this.refreshQrcode(),o.send("pcwqrdlg")},hide:function(){clearTimeout(this._pollTokenLoginTimer),this._doms.widget.hide(),this.hiden=!0},refreshQrcode:function(){if(!this.hiden){this._doms.loadingWrapper.show(),this._doms.loadedWrapper.hide(),this._doms.loadFailWrapper.hide(),this._doms.loginSuccessWrapper.hide();var e=this;e._agenttype=1,e._device_name="网页端";var t={agenttype:e._agenttype,Code_type:0,device_name:e._device_name};r.genLoginToken(t,function(t){var n="http://passport.iqiyi.com/apis/qrcode/token_login.action?";if("A00000"===t.code){e._loginToken=t.data.token,e._loginTokenExpire=t.data.expire;var a,r=["token="+encodeURIComponent(t.data.token),"Code_type=0","agenttype="+encodeURIComponent(e._agenttype)],o={data:n+r.join("&"),width:162},s=i.getQrCoder(o)+"&_="+Math.random(),l=e._doms.qrcodeImg[0];l.onload=function(){l.onload=l.onerror=function(){},clearTimeout(a),e.qrcodeImgSrcChanged()},l.onerror=function(){l.onload=l.onerror=function(){},clearTimeout(a),e._doms.loadingWrapper.hide(),e._doms.loadedWrapper.hide(),e._doms.loadFailWrapper.show()},a=setTimeout(function(){l.onerror()},1e4),e._doms.qrcodeImg.attr("src",s)}else e._doms.loadingWrapper.hide(),e._doms.loadedWrapper.hide(),e._doms.loadFailWrapper.show()})}},qrcodeImgSrcChanged:function(){function e(){r.checkTokenLogin({agenttype:t._agenttype,token:t._loginToken},function(i){if("A00000"===i.code){s.fire({type:"qrcodeLoginSuccess",data:i.data}),o.send("pcwqrlgnok"),t._doms.loadedWrapper.hide(),t._doms.loginSuccessWrapper.show();try{setTimeout(function(){window.lib.__callbacks__.login_success(i.data)},3e3)}catch(r){}}else if(clearTimeout(t._pollTokenLoginTimer),!a&&!t.hiden)if(t._doms.widget.attr("data-floater-qrcodelogin")&&n>0){if(t._pollTokenLoginTimer=setTimeout(e,1e3),n--,0===n){clearTimeout(t._pollTokenLoginTimer),clearInterval(t._refreshTipInterval);var d=Q.$("[data-loginbox-elem=qrCodeLogin1]"),m=Q.$("[data-loginbox-elem=qrCodeLogin2]");d&&m&&(m.removeClass("dn"),d.addClass("dn"),t._doms.qrcodeImg.attr("src",l))}}else t._pollTokenLoginTimer=setTimeout(e,t._pullInterval)})}var t=this,n=60;t._doms.loadingWrapper.hide(),t._doms.loadFailWrapper.hide(),t._doms.loadedWrapper.show();var a=!1;t._pollTokenLoginTimer=setTimeout(e,t._pullInterval),setTimeout(function(){a=!0,clearTimeout(t._pollTokenLoginTimer),t._pollTokenLoginTimer=null},1e3*t._loginTokenExpire);var i=60;t._doms.refreshTimerNum.html(i),clearInterval(t._refreshTipInterval),t._refreshTipInterval=setInterval(function(){return i--,t._doms.refreshTimerNum.html(i),t.hiden?(clearInterval(t._refreshTipInterval),void 0):(0>=i&&(clearInterval(t._refreshTipInterval),t._refreshTipInterval=null,t.hiden||t.refreshQrcode()),void 0)},1e3)},_bindEvent:function(){}}})});
define("kit/qrCoder",[],function(e,t,n){new Q.ic.InfoCenter({moduleName:"kit/qrCoder"});var a="http://qrcode.qiyipic.com/qrcoder/?";n.exports={getQrCoder:function(e){var t=e.data,n=encodeURIComponent(t),i=e.md5||"35f4223bb8f6c8638dc91d94e9b16f5";e.property=e.property||0;for(var r=[{key:"!",value:"%21"}],o=0,s=r.length;s>o;o++){var l=new RegExp(r[o].key,"g");n=n.replace(l,r[o].value)}var d=i+n,m=Q.crypto.md5(d),h=[];h.push("data="+n),h.push("&salt="+m);for(var c in e)"data"!=c&&h.push(c+"="+e[c]);var u=a+h.join("&");return u}}});
define("kit/qrcodeLoginKit",["../interfaces/qrcodeLoginInterface","./qrCoder","../config/loginMsg"],function(e,t,n){var a=e("../interfaces/qrcodeLoginInterface");e("./qrCoder"),Q.event.customEvent,e("../config/loginMsg"),new Q.ic.InfoCenter({moduleName:"qrcodeLoginKit"}),n.exports={genLoginToken:function(e,t){var n=new a({ifname:"genLoginTokenIf"});n.request(e,function(e){t(e)})},genLoginAuthToken:function(e,t){var n=new a({ifname:"genLoginAuthTokenIf"});n.request(e,function(e){t(e)})},checkTokenLogin:function(e,t){var n=new a({ifname:"checkTokenLoginIf"});n.request(e,function(e){t(e)})},checkAuthTokenRequested:function(e,t){var n=new a({ifname:"checkAuthTokenRequestIf"});n.request(e,function(e){t(e)})},confirmAuthTokenLogin:function(e,t){var n=new a({ifname:"confirmLoginIf"});n.request(e,function(e){t(e)})}}});
define("interfaces/qrcodeLoginInterface",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("QrCodeLoginInterface",{construct:function(e){e=e||{},this._ifname=e.ifname,this._remoteInterface=new a({genLoginTokenIf:{url:"http://passport.iqiyi.com/apis/qrcode/gen_login_token.action",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}},checkTokenLoginIf:{url:"http://passport.iqiyi.com/apis/qrcode/is_token_login.action",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}},genLoginAuthTokenIf:{url:"http://passport.iqiyi.com/apis/qrcode/opt/gen_login_token.action",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}},checkAuthTokenRequestIf:{url:"http://passport.iqiyi.com/apis/qrcode/opt/is_login_requested.action",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}},confirmLoginIf:{url:"http://passport.iqiyi.com/apis/qrcode/opt/login_confirm.action",struct:{code:{type:"string",empty:!1},data:{type:"object",empty:!1,struct:{}}}}})},methods:{request:function(e,t){e=e||{};var n=e.ifname||this._ifname||"videoUserProfileIf",a=e.timeout||5e3;delete e.ifname,delete e.timeout,this._remoteInterface.send({ifname:n,param:e,dataType:"jsonp",timeout:a},function(n){t&&t(n,e)})}}})});
define("kit/vipAutoPay",["../interfaces/vipAutoPay","../kit/userInfo"],function(e,t,n){var a=e("../interfaces/vipAutoPay"),i=e("../kit/userInfo"),r=new a,o="",s="",l=Q.Class("VipAutoPay",{methods:{getAutoPayFromInterface:function(e){if(o||s)e&&e({bindUrl:o,bindType:s});else{var t={P00001:Q.cookie.get("P00001"),lang:"zh_CN",platform:"b6c13e26323c537d",rseat:"601205_8",username:i.getName()},n={P00001:Q.cookie.get("P00001"),platform:"b6c13e26323c537d",username:i.getName(),lang:"zh_CN",rseat:"601205_8",sign:Q.crypto.md5(decodeURIComponent(Q.url.jsonToQuery(t))+"f1a34dc464325d35f6dc90c1f3")};r.directAutoRenew(n,function(t){"A00000"==t.code&&("A00001"==t.data.code?o=t.data.data.returnUrl:"A00002"==t.data.code&&(s=t.data.data.type),e({bindUrl:o,bindType:s}))})}}}}),d=new l;n.exports={getAutoPayInfo:function(e){return d.getAutoPayFromInterface(e)}}});
define("interfaces/vipAutoPay",["../kit/remoteInterface"],function(e,t,n){var a=e("../kit/remoteInterface");n.exports=Q.Class("vipAutoPay",{construct:function(){this._remoteInterface=new a({directAutoRenew:{url:"http://serv.vip.iqiyi.com/services/directAutoRenew.action"},openAutoPayBind:{url:"http://serv.vip.iqiyi.com/services/autoRenew.action"},queryAutoPayBind:{url:"http://serv.vip.iqiyi.com/services/autoRenewStatus.action"}})},methods:{directAutoRenew:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"directAutoRenew",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})},openAutoPayBind:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"openAutoPayBind",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})},queryAutoPayBind:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"queryAutoPayBind",param:e,cors:!0,method:"GET",withCredentials:!0},function(n){t&&t(n,e)})}}})});
define("units/vip/vipOpenAutoPay",["../../components/units/pageJob","../../components/action/checkDoms","../../kit/userInfo","../../kit/vipAutoPay","../../interfaces/vipAutoPay"],function(e,t,n){var a=e("../../components/units/pageJob");e("../../components/action/checkDoms");var i=e("../../kit/userInfo"),r=e("../../kit/vipAutoPay"),o=e("../../interfaces/vipAutoPay"),s="vipOpenAutoPay",l=new o;a.create(s,{getDependentDoms:function(){},check:function(){return!0},init:function(){var e=this;Q(document).delegate("[data-widget-ele=openAutoPay]","click",function(t){Q.event.get(t).preventDefault(),e.openAction(Q(this))}),Q.event.customEvent.on("pcUserBoxDomReady",function(){var e=Q("#nav-login-info").find("[data-widget-ele=openAutoPay]");e&&e.length>0&&r.getAutoPayInfo(function(t){t.bindUrl?(e.attr("href",t.bindUrl),e.attr("data-autoPay-open","true")):t.bindType&&e.attr("data-autoPay-type",t.bindType)})}),Q.event.customEvent.on("getAutoPayResult",function(){e.queryAutoPayBind()})},openAction:function(e){var t=this;e.attr("data-autoPay-open")?(window.open(e.attr("href"),"newWindow"),Q("[data-vip-bind=mobile]").addClass("dn"),t.queryAutoPayBind()):t.openAutoPayBind(e.attr("data-widget-rseat"))},queryAutoPayBind:function(){var e=this,t={uid:i.getUid()},n=5,a=6e4,r=0,o=function(){r++,n>=r&&l.queryAutoPayBind(t,function(t){"A00000"==t.code&&"A00000"==t.data.code&&1==t.data.data.status?e.setTips():n>r&&setTimeout(o,a)})};setTimeout(o,a)},openAutoPayBind:function(e){var t=this,n={cid:"afbe8fd3d73448c9",op:"1",rseat:e,type:Q("[data-widget-autoPay=openVip]").attr("data-autoPay-type")||Q("[data-widget-ele=openAutoPay]").attr("data-autoPay-type"),P00001:Q.cookie.get("P00001")};l.openAutoPayBind(n,function(e){"A00000"==e.code&&"A00000"==e.data.code&&t.setTips()})},setTips:function(){Q("[data-vip-bind=bindText]").html("已开通自动续费"),Q("[data-widget-ele=openAutoPay]").html("已开通自动续费"),Q("[data-vippay-widget=openAutoIng]").addClass("dn"),Q("[data-vipPay-widget=openAutoPay]").addClass("dn"),Q("[data-vipPay-widget=readyOpen]").removeClass("dn"),Q("[data-vippay-widget=packetName]").addClass("dn"),Q("[data-vippay-floater=openAutoBtn]").addClass("dn"),window.setTimeout(function(){Q("[data-vip-bind=mobile]").html(" ")},5e3)}}),n.exports=s,a.add(s)});
define("units/vip/vipUnFreeze",["../../components/units/pageJob","../../components/action/checkDoms","../../components/action/floater","../../components/view/floaterView","../../interfaces/vipUnFreeze"],function(e,t,n){var a=e("../../components/units/pageJob");e("../../components/action/checkDoms");var i=e("../../components/action/floater"),r=e("../../components/view/floaterView"),o=e("../../interfaces/vipUnFreeze"),s="vipUnFreeze",l=new o,d=null;a.create(s,{check:function(){return!0},init:function(){var e=this;e.bindEvent()},bindEvent:function(){var e=this;Q(document).delegate("[data-vipuser-ele=freeTips]","click",function(){e.getFreeHtml()}),Q(document).delegate("[data-delegate=d-btn-close]","click",function(){d.destroy(),d=null})},createfloater:function(e){d||(d=new i({view:new r({isResize:!0,zIndex:4850})}),d.show({html:e}))},getFreeHtml:function(){var e=this,t={authcookie:Q.cookie.get("P00001"),version:1};l.getVipUnFreeze(t,function(t){if("A00000"==t.code){var n=t.data.html.replace("J_pop-vip","J_pop-vip play-hy-pop-unfixed").replace("close dn","close");e.createfloater(n)}})}}),a.add(s),n.exports=s});
define("interfaces/vipUnFreeze",["../kit/remoteInterface","../config/siteDomain"],function(e,t,n){var a=e("../kit/remoteInterface");e("../config/siteDomain"),n.exports=Q.Class("vipUnFreeze",{construct:function(){this._remoteInterface=new a({vipUnFreeze:{url:"http://cmonitor.iqiyi.com/pages/fragment/vip_unfreeze.action"}})},methods:{getVipUnFreeze:function(e,t){e=e||{},this._remoteInterface.send({dataType:"jsonp",ifname:"vipUnFreeze",param:e},function(e){t&&t(e)})}}})});
define("kit/vipPay/floatPointMath",[],function(e,t,n){new Q.ic.InfoCenter({moduleName:"floatPointMath"}),n.exports={accSub:function(e,t){var n,a,i,r;try{n=e.toString().split(".")[1].length}catch(o){n=0}try{a=t.toString().split(".")[1].length}catch(o){a=0}return i=Math.pow(10,Math.max(n,a)),r=n>=a?n:a,((e*i-t*i)/i).toFixed(r)},accMul:function(e,t){var n=0,a=e.toString(),i=t.toString();try{n+=a.split(".")[1].length}catch(r){}try{n+=i.split(".")[1].length}catch(r){}return Number(a.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},accDiv:function(e,t){var n,a,i=0,r=0;try{i=e.toString().split(".")[1].length}catch(o){}try{r=t.toString().split(".")[1].length}catch(o){}return Math?(n=Number(e.toString().replace(".","")),a=Number(t.toString().replace(".","")),n/a*Math.pow(10,r-i)):void 0}}});
define("kit/thirdPartUserName",["./userInfo"],function(e,t,n){var a=e("./userInfo"),i=Q.Class("UserFromName",{properties:{userFrom:""},construct:function(){},methods:{init:function(){},getUserFromName:function(e){var t=this;a.getThirdPartyFrom(function(n){e&&(t.userFrom=t.matchName(n),e(t.userFrom))})},getUserFromData:function(e){return this.getUserFromName(e,"userFrom"),this.userFrom},getLanguage:function(){if(!window.Q||!Q.PageInfo)return!1;var e=Q.PageInfo.qy_platform;return e&&"a31343b3762c80e7"==e?!0:void 0},matchName:function(e){var t,n,a=this;switch(n=a.getLanguage(),e){case 29:t="微信";break;case 2:t="新浪";break;case 4:t="QQ";break;case 1:t="百度";break;case 30:t="小米";break;case 31:t=n===!0?"京東":"京东";break;case 5:t=n===!0?"支付寶":"支付宝";break;case 3:t="人人";break;case 6:t="开心网";break;case 7:t="联想";break;case 8:t="飞信";break;case 9:t="微信";break;case 12:t="奇声";break;case 13:t="PPS";break;case 14:t="PPS_BIND";break;default:t=n===!0?"愛奇藝":"爱奇艺"}return t}}}),r=new i;r.init(),n.exports={getUserFromName:function(e){return r.getUserFromData(e)}}});
define("kit/vipPay/vipPayAutoRenew",[],function(e,t,n){n.exports={getpayAutoRenew:function(){var e,t=Q("[data-vippay-widget=payPackages]").find("li.selected").attr("data-vippay-autopay"),n=Q("[data-vippay-widget=payType]").find("li.selected").attr("data-vippay-paytype");return e="true"==t?"2":Q("[data-vippay-widget=autoPayBtn]").find("p").hasClass("selected")&&"qidouPay"!=n?"1":"0"}}});
define("action/vipPay/openVip_floater",["../../components/action/adapter","../../model/vipPay/openVipModel_public","../../view/vipPay/openVipView_floater"],function(e,t,n){var a=e("../../components/action/adapter"),i=e("../../model/vipPay/openVipModel_public"),r=e("../../view/vipPay/openVipView_floater");n.exports=Q.Class("openVip",{extend:a,construct:function(e){e=e||{},e.ctrl=this,e.model=e.model||new i(e),e.view=e.view||new r(e),this.callsuper(e)},methods:{vipOpen:function(e){var t=this;this._model.openVip(e,function(e){"A00000"==e.code&&t._view.serverPayResult(e.data)})},check:function(e){var t=this;this._model.check(e,function(n){n.param=e,t._view.popsucc2(n)})},autocheck:function(e){var t=this;this._model.check(e,function(n){n.param=e,t._view.checkStatusResult(n)})}}})});
define("model/vipPay/openVipModel_public",["../../components/model/model","../../interfaces/vipPay/vipPayInterface_public"],function(e,t,n){var a=e("../../components/model/model"),i=e("../../interfaces/vipPay/vipPayInterface_public");n.exports=Q.Class("openVipModel_public",{extend:a,construct:function(e){this.callsuper(e),this.config=e.config,this.ctrl=e.ctrl},methods:{openVip:function(e,t){e=e||{},(new i).requestDoPay(e,function(e){t(e)})},check:function(e,t){e=e||{},(new i).check(e,function(e){t(e)})}}})});
define("interfaces/vipPay/vipPayInterface_public",["../../kit/remoteInterface"],function(e,t,n){var a=e("../../kit/remoteInterface");n.exports=Q.Class("vipPayInterface_public",{construct:function(){this._remoteInterface=new a({queryVipStat:{url:"http://serv.vip.iqiyi.com/pay/return/queryVipStat.action"},getMobileVcode:{url:"http://i.vip.iqiyi.com/pay/mobile-pay-vd.action"},check:{url:"http://i.vip.iqiyi.com/order/queryOrderStat.action"},requestDoPay:{url:"http://i.vip.iqiyi.com/pay/dopay.action"}})},methods:{queryVipStat:function(e,t){this.request(e,t,"queryVipStat")},getMobileVcode:function(e,t){this.request(e,t,"getMobileVcode")},check:function(e,t){this.request(e,t,"check")},requestDoPay:function(e,t){this.request(e,t,"requestDoPay")},request:function(e,t,n){e=e||{},e.t=(new Date).getTime(),this._remoteInterface.send({dataType:"jsonp",param:e,ifname:n},function(e){t&&t(e)})}}})});
define("interfaces/vipPay/vipPayInterface_floater",["../../kit/remoteInterface"],function(e,t,n){var a=e("../../kit/remoteInterface");n.exports=Q.Class("vipPayInterface",{construct:function(){this._remoteInterface=new a({getPayInfo:{url:"http://i.vip.iqiyi.com/pay/pc/checkSuitInfo.action"},checkRealFee:{url:"http://i.vip.iqiyi.com/order/checkRealFee.action"},getAllCoupon:{url:"http://i.vip.iqiyi.com/client/store/coupon/searchUserCoupons.action"},activeCoupon:{url:"http://i.vip.iqiyi.com/pay/readCoupon.action"},getUserStat:{url:"http://i.vip.iqiyi.com/pc/payconfirm/confirmOrderStat.action"}})},methods:{getPayInfo:function(e,t){this._remoteInterface.send({dataType:"jsonp",param:e,qoe:!0,ifname:"getPayInfo"},function(e){t&&t(e)})},checkRealFee:function(e,t){this.request(e,t,"checkRealFee")},getAllCoupon:function(e,t){this.request(e,t,"getAllCoupon")},activeCoupon:function(e,t){this.request(e,t,"activeCoupon")},getUserStat:function(e,t){this.request(e,t,"getUserStat")},request:function(e,t,n){e=e||{},this._remoteInterface.send({dataType:"jsonp",param:e,ifname:n},function(e){t&&t(e)})}}})});
//# buildBy serverV2-UglifyJS2-FullCache at Thu Jan 19 2017 18:03:00 GMT+0800 (CST) take time: 6706 ms_-:
      X,X,=gXX   B    :http://static.iqiyi.com/js/qiyiV2/20170119180153/common/common.js request-method GET response-head HTTP/1.1 200 OK
Content-Type: text/javascript
Accept-Ranges: bytes
Etag: "4047258305"
Last-Modified: Thu, 19 Jan 2017 10:06:25 GMT
Content-Length: 292917
Server: Apache 1.3.29
Cache-Control: max-age=300
Expires: Sun, 05 Feb 2017 09:16:24 GMT
Date: Sun, 05 Feb 2017 09:11:24 GMT
 uncompressed-len 0  x5