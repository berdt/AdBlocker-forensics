var MN_COOKIE_IEEE_USER_INFO = "ieeeUserInfoCookie";
var MN_COOKIE_IEEE_STAFF_INFO = "ieeeStaffInfoCookie";
var MN_COOKIE_OBSSO = "ObSSOCookie";

var MN_POLLING_MAX = 25;
var MN_POLLING_INTERVAL = 500;

var mn_polling_id;
var mn_polling_count = 0; 
var mn_slidedown_flag = false;
var currentWindow = "";

var USER_FAILED_ATTEMPT = 0;

//pppct
var MN_COOKIE_BACKTO_PPCT_APP = "_ppct_back_to";
var ppctBackToEnabled = false;

function getPPCTBackToUrl() {
	var ppctBackToUrl = null;
	try {
		var backToPPCTAppCookie = $.cookie(MN_COOKIE_BACKTO_PPCT_APP);
		if(typeof backToPPCTAppCookie != "undefined" &&  backToPPCTAppCookie != null && backToPPCTAppCookie != "") {
			var ppctAppCookieInfo = $.parseJSON(backToPPCTAppCookie);
			if (typeof ppctAppCookieInfo != "undefined" &&  ppctAppCookieInfo != null &&  ppctAppCookieInfo.url != null && ppctAppCookieInfo.url != "") {
				ppctBackToUrl = decodeURIComponent(ppctAppCookieInfo.url);
			}
		}
	} catch (e) {}
	return ppctBackToUrl;
}

function mn_displayBackToPPCTAppSection() {
	if (typeof IEEE_MN_BACK_TO_PPCT_ENABLED != "undefined" && IEEE_MN_BACK_TO_PPCT_ENABLED != null && IEEE_MN_BACK_TO_PPCT_ENABLED == "Y"){
		var ppctBackToUrl = getPPCTBackToUrl();
		if (ppctBackToUrl != null && ppctBackToUrl != "") {
			$("body").prepend(
					'<div class="ppctbacktosec">' +
						'<div class="float-left">' +
							'<div class="float-left"><img src="/ieee-mashup/images/ppct_logo.png" class="ppctlogo"></img></div>' +
							'<div class="float-left ppctBackToTxt">Please note: You have left IEEE Collabratec&trade;.</div>' + 
						 '</div>' +
						'<div style="float:right">'+
							'<div class="float-left margin-t10 pad-r5 pad-t3" ><img src="/ieee-mashup/images/returnicon.gif"></img></div>' +
							'<div class="float-left margin-t10 pad-r5"><a href="'+ppctBackToUrl+'">Return to IEEE Collabratec&trade; </a></div>' +
							'<div class="ppctclrboth"></div>' + 
						'</div>' +
					'</div>'	
				);
		}
	}
}

//end ppct new methods

$(function() {
	//mn_initMetaNav();
	var ieeeUserInfoCookie = $.cookie(MN_COOKIE_IEEE_USER_INFO);
	
	if(typeof ieeeUserInfoCookie != "undefined" &&  ieeeUserInfoCookie != null && ieeeUserInfoCookie != "") {
		var ieeeUserInfo = $.evalJSON(ieeeUserInfoCookie);
		if (ieeeUserInfo.userInfoId != null) {
			pm.unbind("user_authenticated");
		}
	}
		
	a_initAuth();//Moving this method to here because xplore is using ieee-auth-include.js.
});

function mn_initMetaNav(mn_callback) {
	mn_importJsFiles();
	mn_displayBackToPPCTAppSection();
	mn_displayBaseMetaNav();
	mn_processMetaNavUpdate(mn_callback);
}

function mn_refreshMetaNav() {
	mn_processMetaNavUpdate();
}

function mn_slideDownLogin() {
	if(!mn_slidedown_flag){
		$("#meta-nav #signin_menu").toggle(100);
		$("#myusername").focus();
		mn_slidedown_flag = true;
	}
	else{
		$("#meta-nav #signin_menu").hide();
		mn_slidedown_flag = false;
	}
}

function mn_signOutMetaNav() {
	 mn_clearIEEEUserInfo();
	 mn_clearObSSOCookie();
	 if(typeof MN_LOGOUT_REDIRECT_URL != "undefined" && MN_LOGOUT_REDIRECT_URL != null){
		 MN_LOGOUT_REDIRECT_URL_DEF = MN_LOGOUT_REDIRECT_URL;
	 }
	 $(location).attr('href',MN_LOGOUT_REDIRECT_URL_DEF);
}

function mn_clearIEEEUserInfo() {
	$.cookie('ieeeUserInfoCookie', null, { path: '/', domain: MN_DOMAIN_NAME });
}

function mn_clearObSSOCookie() {
	$.cookie('ObSSOcookie', null, { path: '/', domain: MN_DOMAIN_NAME });
}

function mn_login(username, password) {
	$("#meta-nav #signin_menu").slideUp();
	
	mn_authenticateUser(username, password);
}

function mn_login() {
	
	var uname = $("#userName").val();
	uname = uname.replace(/</g, "&lt;").replace(/>/g, "&gt;");
	
	var pwd = $("#mn_password").val();	
	pwd = pwd.replace(/<\/(.|\n)*?>/, "").replace(/<(.|\n)*?>/, ""); 
	
	
	
	if(uname != "" && pwd != ""){
		var isEmail = validateEmail(uname);
		if(isEmail){
			uname = uname.toLowerCase();
		}
		$('.error-panel').remove();
		ibpMashupUtils.showIbpProgressImg("singleSignOnOverlay");		
		mn_authenticateUser(uname, pwd);
		
		if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
			mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN',IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN_SUBMIT');
			mn_trackEvent('SIGNIN','SIGNIN_SUBMIT');
		}
	
	}
	else{
		ibpMashupUtils.clearIbpProgressImg();
		mn_displayErrorMessage("Please enter a valid e-mail address and password.");
	}
}




function mn_displayBaseMetaNav() {
	
	if(typeof refSite != 'undefined' && typeof refSiteName != 'undefined'){
		MN_CART_URL += "?refSite="+refSite + "&refSiteName="+refSiteName; 
	}
	
	if(typeof MN_LOGOUT_REDIRECT_URL != 'undefined'){
		MN_LOGOUT_URL_DEF += "?nextUrl="+ MN_LOGOUT_REDIRECT_URL; 
	}
	
	
	$("#ieee-meta-nav-include").after(
				'<div id="displaybox" style="display: none;"></div>'+
				'<div class="navbar navbar-inverse navbar-static-top"><div id="meta-nav"> <a class="skip-nav" href="#mn-header"><img alt="Skip Navigation" src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/ieee-mashup/images/blank.gif" height="1px" width="1px" /></a>'+
				   '<div id="util-left" > '+
				   '<a href="'+MN_IEEE_URL+'" class="ieee-home">IEEE.org</a>|'+
				   '<a href="'+MN_XPLORE_URL +'" onclick="trackCampaignEvent(\'mn_xpl\')" class="top-divider-space">IEEE <em>Xplore</em> Digital Library</a>|'+
				   '<a href="'+MN_STD_ASSOC_URL+'" onclick="trackCampaignEvent(\'mn_std\')" class="top-divider-space">IEEE Standards</a>|'+
				   '<a href="'+MN_SPECTRUM_URL+'" onclick="trackCampaignEvent(\'mn_spec\')" class="top-divider-space">IEEE Spectrum</a>|'+
				   '<a href="'+MN_MORE_URL +'" accesskey="2" class="top-divider-space">More Sites</a>'+ 
				   '</div>'+
				  
				  '<div id="util-right" style="float:right">'+
				  '<div id="mn-ieee-staff" style="float:left;display:none"><img src="' + IEEE_MASHUP_ENGINE_SERVER_URL + '/ieee-mashup/images/staff-pic.jpg" title="IEEE Employee Account" class="mn-ieee-staff-pic"/></div>'+
				  '<div id="mn-username-link" style="float:left;position:relative;display:none">'+ 
				  '<a href="#" id="mn-ieee-username" class="ieee-user-name"></a>'+
	              ' <div id="userNameFlyout" style="right: 5px;top:-7px; display:none;">'+
				  ' <div id="userNameFlyoutContent" class="userNameFlyoutContentClass">'+
				  '	<div id="userNameDropDown">'+
				  '   <div class="clearit">&nbsp;</div>'+
				  '   <div class="mn-menu-item" id="mn-profile-link">'+
				  '          <a href="'+ MN_MY_PROFILE_URL +'" class="mn-menu-link">My&nbsp;Account</a>'+
				  '  </div>'+
				  '   <div class="mn-menu-item">'+
				  '          <a href="'+ MN_PRIVACY_URL +'" class="mn-menu-link">Privacy/Security</a>'+
				  '    </div>'+
				  '     <div class="mn-menu-item-last">'+
				  '     <a href="#" class="mn-menu-link" id="mn-signout-link">Sign Out</a>'+
				  '   </div>'+
				  '   </div>'+
				  '  </div>'+
				  ' </div>'+
				 
				 '|</div>'+
				 '<a href="'+ MN_CART_URL +'" class="top-divider-space">Cart (<span id="mn-cart-item-qty">0</span>)</a>'+
				 '<span id="mn-register-link">|<a href="#" id="mn-register-alink" class="top-divider-space">Create Account</a></span>'+
				 '<span id="mn-signin-link" style="position:relative;z-index:8000">|<a href="#" id="singleSignOnLink" class="mnieee-sign-in"><strong>Sign in</strong></a>'+
				
				 '<div id="singleSignOnFlyout" style="left: -418px;top:0px; position:absolute; display:none;">'+
				    '<div id="mnsingleSignOnTab" style="margin-left: 424px;"><a id="mnsingleSignOnLink2" class="mnsignInFlyoutLink">Sign in</a></div>'+
				    
				    '<div id="mnsingleSignOnFlyoutTop"></div>'+
					
				    '<div id="singleSignOnFlyoutContent" style="top:20px; right: 0px; position:absolute;">'+
				    '<div id="singleSignOnOverlay">'+
				    '<div id="singleSignOnClose" style="position:absolute; right:15px;"><img src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/ieee-mashup/images/btnCloseModalWindow.gif" alt="Close Sign in window" title="Close Window"></div> <br class="clearBoth">'+
				    
				    '<div id="loadingImg" style="display:none" align="center">'+
				    '<img src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/ieee-mashup/images/ajax-rotation.gif" />'+
				    '</div>'+
				       ' <fieldset> <legend class="metanav-legend">Login</legend>'+
				        '  <input name="singleSignOnFlyoutContentInputUsernameLabel" class="singleSignOnFlyoutUsernameInput" id="userName" title="E-mail address">'+
				        '  <input class="singleSignOnFlyoutPasswordInput" id="mn_password" name="singleSignOnFlyoutContentInputPasswordLabel" title="Password" type="password">'+
				        '</fieldset>'+
				        '<input name="sign-in" id="sign-in" class="button-large button-width" type="button" value="Sign in" onClick="mn_login();"/> '+
				        '<a class="help-tooltip margin-lt5 alternate" href="#" title="Help"> <img src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/ieee-mashup/images/helpicon.gif" alt="Help icon" /></a>'+
				        '<div class="display-none ibp-tt-cache">'+
				          MN_SIGNIN_TOOLTIP +
						'</div>'+
				      '<div class="clearit">&nbsp;</div>'+
				      '<div>'+
				       ' <a href="#" id="mn-forgot-pwd-link" class="button-link">Forgot password</a>'+
				      '</div>'+
				      '</div>'+
				    '</div>'+
				  '</div>'+
				  '</span>'+
				'</div>'+
				'<div style="clear:both;height:0;">&nbsp;</div>'+
				 '<div id="mn-header"></div></div>'
		);
	
	loadSingleSignon();
	mn_bindMetaNavEvents();
}

function mn_displayErrorMessage(errorMsg){
	$(".error-panel").remove();
	
	$("#singleSignOnClose").after('<div class="error-panel">'+
    '     <div class="corner-img"></div>'+
    '       <p class="error-message">'+ errorMsg +'</p>'+
    '       <p class="error-message"></p>'+
    ' </div>'
	);
	
	$("#mn_password").val('');
	$("#mn_password").focus();
}


function mn_processMetaNavUpdate(mn_callback) {
	var ieeeUserInfoCookie = $.cookie(MN_COOKIE_IEEE_USER_INFO);
	var ieeeStaffInfoCookie = $.cookie(MN_COOKIE_IEEE_STAFF_INFO);
	
	if ((typeof ieeeUserInfoCookie != "undefined" && ieeeUserInfoCookie != null && ieeeUserInfoCookie != "") || 
			(typeof ieeeStaffInfoCookie != "undefined" && ieeeStaffInfoCookie != null && ieeeStaffInfoCookie != "")	
	) {
		
		mn_updateMetaNavUserInfo(ieeeUserInfoCookie,mn_callback);
	}
	else{
		if(typeof mn_callback == 'function') {
			mn_callback();
		 }
	}
}


function mn_authenticateUser(username, password) {
	a_authenticateUser(username, password);
};

function mn_stopUserInfoPolling() {
	clearInterval(mn_polling_id);
	mn_polling_id = null;
	mn_polling_count = 0;
}

function mn_updateMetaNavUserInfo(mn_ieeeUserInfoCookie, mn_callback) {

	
	if (typeof mn_ieeeUserInfoCookie != "undefined" && mn_ieeeUserInfoCookie != null && mn_ieeeUserInfoCookie != "") {
			
		var mn_ieeeUserInfo = $.evalJSON(mn_ieeeUserInfoCookie);
			
			if(mn_ieeeUserInfo.env != null && mn_ieeeUserInfo.env == MN_COOKIE_ENV ){
				
				
				if (mn_ieeeUserInfo.name != null && mn_ieeeUserInfo.name != "") {
					var userName = mn_ieeeUserInfo.name;
					
					userName = userName.replace(' ', '&nbsp;');
					
					userName = userName.replace(/</g, "&lt;").replace(/>/g, "&gt;");
					
					// remove register link
					$("#mn-register-link").remove();
					$("#mn-signin-link").remove();
					// update user's name
					$("#meta-nav #util-right #mn-ieee-username").html('<strong>' + userName + '</strong>');
					//$("#mn-item-username-link").html('<strong>' + userName + '</strong>');
					//$("#meta-nav #util-right #mn-ieee-username").attr('class', 'username-space');
					//$("#meta-nav #util-left #mn-signout-link").show();
					$("#meta-nav #util-right #mn-username-link").show();
					
					
				
				}
				else {
					var ieeeStaffInfoCookie = $.cookie(MN_COOKIE_IEEE_STAFF_INFO);
					
					if (typeof ieeeStaffInfoCookie != "undefined" && ieeeStaffInfoCookie != null && ieeeStaffInfoCookie != "") {
						var mn_ieeeStaffInfo = $.evalJSON(ieeeStaffInfoCookie);
						var userName = mn_ieeeStaffInfo.name;
						userName = userName.replace(' ', '&nbsp;');
						userName = userName.replace(/</g, "&lt;").replace(/>/g, "&gt;");
						$("#mn-register-link").remove();
						$("#mn-signin-link").remove();
						$("#meta-nav #util-right #mn-ieee-username").html('<strong>' + userName + '</strong>');
						$("#meta-nav #util-right #mn-username-link").show();
						$("#mn-ieee-staff").show();
						$("#mn-profile-link").hide();
					}
				}
				
				if ((mn_ieeeUserInfo.userInfoId !=null && mn_ieeeUserInfo.userInfoId != "" ) && (mn_ieeeUserInfo.cartItemQty == null || mn_ieeeUserInfo.cartItemQty == "null" || mn_ieeeUserInfo.cartItemQty == "")) {
					$("#mn-cart-item-qty").html("loading...");
				}
				else{
					$("#mn-cart-item-qty").html(mn_ieeeUserInfo.cartItemQty);
				}
			
			if(typeof mn_callback == 'function') {
				mn_callback();
			 }
			
			loadUserNameFlyout();
		}
		
	}
	else {
		var ieeeStaffInfoCookie = $.cookie(MN_COOKIE_IEEE_STAFF_INFO);
		
		if (typeof ieeeStaffInfoCookie != "undefined" && ieeeStaffInfoCookie != null && ieeeStaffInfoCookie != "") {
			var mn_ieeeStaffInfo = $.evalJSON(ieeeStaffInfoCookie);
			var userName = mn_ieeeStaffInfo.name;
			userName = userName.replace(' ', '&nbsp;');
			userName = userName.replace(/</g, "&lt;").replace(/>/g, "&gt;");
			$("#mn-register-link").remove();
			$("#mn-signin-link").remove();
			$("#meta-nav #util-right #mn-ieee-username").html('<strong>' + userName + '</strong>');
			$("#meta-nav #util-right #mn-username-link").show();
			$("#mn-ieee-staff").show();
			$("#mn-profile-link").hide();
		}
		if(typeof mn_callback == 'function') {
			mn_callback();
		 }
		
		loadUserNameFlyout();
	}
}

function mn_updateCartItemQty(){
	var ieeeUserInfoCookie = $.cookie(MN_COOKIE_IEEE_USER_INFO);
	if (typeof ieeeUserInfoCookie != "undefined" && ieeeUserInfoCookie != null && ieeeUserInfoCookie != "") {
		var mn_ieeeUserInfo = $.evalJSON(ieeeUserInfoCookie);
		$("#mn-cart-item-qty").html(mn_ieeeUserInfo.cartItemQty);
	}
}


function mn_updateCartItemQtyIfNull(){
	var cartQ = $("#mn-cart-item-qty").html();
	if (cartQ == null || cartQ == "null" || cartQ == "" || cartQ == "loading...") {
		$("#mn-cart-item-qty").html("0");
	}
}

function mn_importJsFiles(){
	$("head").append($('<script type="text/javascript" src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/ieee-mashup/js/auth/ieee-auth-include.js"></script>'));
	
	if(isCrossDomain()){
		$("head").append($('<script type="text/javascript" src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/js/ibpUICommonUtil.js"></script>'));
		$("head").append($('<link ref="stylesheet" type="text/css" href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/style.css"/>'));
		$("head").append(ieStyles);
	}
}

var ieStyles = '<!--[if IE 8]>'+
			   '<link href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/ie8.css" type="text/css" rel="stylesheet" />'+
			   '<link href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/ie_style.css" type="text/css" rel="stylesheet" />'+
				'<![endif]-->'+
				'<!--[if IE 7]>'+
				'<link href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/ie7.css" type="text/css" rel="stylesheet" />'+
				'<link href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/ie_style.css" type="text/css" rel="stylesheet" />'+
				'<![endif]-->'+
				'<!--[if IE 6]>'+
				'<link href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/ie6.css" type="text/css" rel="stylesheet" />'+
				'<link href="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/css/ie_style.css" type="text/css" rel="stylesheet" />'+
				'<![endif]-->';

function mn_bindMetaNavEvents(){
	var analyticsAppName = mc_getAnalyticsAppName();
	
	$('#mn-register-alink').click(function(evt){
		if(isCrossDomain()){
			var parentUrl = window.location+"";
			$.colorbox({href:MN_REGISTER_URL+"?includeJquery=true&parentUrl="+parentUrl,iframe:true,overlayClose:false,innerHeight:323, innerWidth:626,opacity:0.6,close:"",title:"Create an IEEE Account"});
		}
		else{
			$.colorbox({href:MN_REGISTER_URL,title:'Create an IEEE Account',scrolling:false,overlayClose:false,opacity:0.6,close:"",onComplete:function(data){
				if($("#cboxError").length>0){
					$.colorbox({title:"Register for an IEEE Account", close:"", html:"<div style='width: 400px; height: 100px; margin-top: 75px;text-align:left;padding:20px;'>Service is not available. Please contact <a href='http://www.ieee.org/about/contact_center/index.html?WT.mc_id=hc_contact'>IEEE</a> for further assistance.</div>"});
				}
				$.colorbox.resize();
			}});
		}
		
		if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
			mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_REGISTRATION',IEEE_MASHUP_APPLICATION_NAME+'_REGISTRATION_VIEW');//Webtrends tracking
			mn_trackEvent('REGISTRATION','REGISTRATION_VIEW');//Webtrends tracking
		}
		
	});
	
	var helpTxt = 'Forgot Password <a class="help-tooltip margin-lt5" href="#" tooltip-info="key.PM_TT08.help">'+
				  '<img border="0" title="help" alt="" src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/images/helpicon.gif">'+
				  '</a>' +
				  '<div class="display-none ibp-tt-cache"> In order to retrieve your password online, you must enter your first name, last name and e-mail address in the same format provided when your account was created.'+
				  'If you require assistance, <a href="'+ MN_CONTACT_URL +'" target="_blank">contact IEEE.</a></div>';
				
	
	$('#mn-forgot-pwd-link').click(function(evt){

		$('#singleSignOnFlyout').hide();
		 
		if(isCrossDomain()){
			var parentUrl = window.location.href;
			$.colorbox({href:MN_FORGOT_PASSWORD_URL+"?includeJquery=true&parentUrl="+parentUrl,iframe:true,innerHeight:240,innerWidth:626,overlayClose:false,title:helpTxt,scrolling:false,opacity:0.6,close:""});
		}
		else{
			$.colorbox({href:MN_FORGOT_PASSWORD_URL,title:helpTxt,scrolling:false,overlayClose:false,innerHeight:240,innerWidth:626,opacity:0.6,close:"",
			onComplete:function(){
				$.colorbox.resize();
			}});
		}
		 
		 if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
			 mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_PWD',IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_USERID_PWD_VIEW');
			 mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_USERID',IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_USERID_PWD_VIEW');
			 mn_trackEvent('FORGOT_PWD','FORGOT_USERID_PWD_VIEW');
			 mn_trackEvent('FORGOT_USERID','FORGOT_USERID_PWD_VIEW');
		 }
	});
	
	
	
	pm.bind("click_register", function(data) {
		var parentUrl = window.location.href;
		$.colorbox({href:MN_REGISTER_2_URL+"?includeJquery=true&parentUrl="+parentUrl,iframe:true,innerHeight:787, innerWidth:852,close:"", overlayClose:false,title:"Register for an IEEE Account"});
		return parentUrl;
	},IEEE_MASHUP_ENGINE_SERVER_URL);

	pm.bind("open_step1", function(data){
		var parentUrl = window.location.href;
		$.colorbox({href:MN_REGISTER_URL+"?includeJquery=true&parentUrl="+parentUrl,iframe:true,overlayClose:false,innerHeight:323, innerWidth:626,opacity:0.6,close:"",title:"Register for an IEEE Account"});
		return parentUrl;
	},IEEE_MASHUP_ENGINE_SERVER_URL);

	pm.bind("click_continue", function(data) {
		$.colorbox.remove();
		
		var currentUrl = window.location.href;
		
		if(currentUrl.indexOf("#") != -1){
			currentUrl = currentUrl.substring(0,currentUrl.indexOf("#"));
		}
		location.href = currentUrl;		
		
	},IEEE_MASHUP_ENGINE_SERVER_URL);

	pm.bind("show_confirmation", function(data) {
		$.colorbox({html:data,title:'Registration Confirmation',overlayClose:false,scrolling:false});
	},IEEE_MASHUP_ENGINE_SERVER_URL); 
	
	pm.bind("resize_signin", function(data) {
		$.colorbox.resize({innerWidth:626, innerHeight:400});
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("resize_register", function(data) {
		data = data + 15;
		$.colorbox.resize({innerWidth:852, innerHeight:data});
		//window.scrollTo(0,0);
		return window.location.href;
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("resize_forgotusername", function(data) {
		$.colorbox.resize({innerWidth:626, innerHeight:data});
		//window.scrollTo(0,0);
		return window.location.href;
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("resize_transition", function(data) {
		$.colorbox.resize({innerWidth:822, innerHeight:data});
		return window.location.href;
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("close_modal", function(data) {
		$.colorbox.remove();
		
		var currentUrl = window.location.href;
		
		if(currentUrl.indexOf("#") != -1){
			currentUrl = currentUrl.substring(0,currentUrl.indexOf("#"));
		}
		location.href = currentUrl;
		
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("close_colorbox", function(data) {
		$.colorbox.close();
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("change_title", function(data) {
		$("#cboxTitle").html(data);
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("open_forgotusername", function(data) {
		var parentUrl = window.location+"";
		$.colorbox({href:MN_FORGOT_PASSWORD_URL+"?includeJquery=true&parentUrl="+parentUrl,iframe:true,innerHeight:240, innerWidth:626,overlayClose:false, title:helpTxt,scrolling:false,opacity:0.6,close:""});
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	pm.bind("user_authenticated", function(data) {
		
		var ieeeUserInfoCookie = $.cookie(MN_COOKIE_IEEE_USER_INFO);
		
		if(typeof ieeeUserInfoCookie != "undefined" &&  ieeeUserInfoCookie != null && ieeeUserInfoCookie != "") {
			
			var ieeeUserInfo = $.evalJSON(ieeeUserInfoCookie);
			
			if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
				mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN',IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN_SUCCESS');
				mn_trackEvent('SIGNIN','SIGNIN_SUCCESS');
			}
			
			if (ieeeUserInfo.name != null) {
				
				var currentUrl = window.location.href;
				
				if(currentUrl.indexOf("#") != -1){
					currentUrl = currentUrl.substring(0,currentUrl.indexOf("#"));
				}
				
				setTimeout(function() {
					location.href = currentUrl;
		    	}, 100);
				
			}
			
		}
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("legacy_user_authenticated", function(data) {
		var parentUrl = window.location.href;
		
		$('#singleSignOnFlyout').hide();
		
		
		if(typeof MN_LOGOUT_REDIRECT_URL != 'undefined'){
			MN_LOGOUT_URL_DEF += "?nextUrl="+ MN_LOGOUT_REDIRECT_URL;
			//MN_TRANS_WEB_ACCOUNT_URL +=  "?logoutUrl="+ MN_LOGOUT_URL_DEF;
		}
		
		 if(isCrossDomain()){
			MN_TRANS_WEB_ACCOUNT_URL += "?includeJquery=true&parentUrl="+parentUrl + "&nextURL="+document.location.href;
			var parentUrl = window.location+"";
			$.colorbox({href:MN_TRANS_WEB_ACCOUNT_URL,iframe:true,innerHeight:554, innerWidth:822,title:'Please Update Your IEEE Account',overlayClose:false,scrolling:false,opacity:0.6,close:"",
				onClosed:function(){ 
					window.location.href =MN_LOGOUT_URL_DEF;
				 }	
			});
		 }
		 else {
			 	MN_TRANS_WEB_ACCOUNT_URL += "?nextURL="+document.location.href;
				$.colorbox({href:MN_TRANS_WEB_ACCOUNT_URL,title:'Please Update Your IEEE Account',scrolling:false,overlayClose:false,opacity:0.6,close:"",
					onClosed:function(){ 
						window.location.href =MN_LOGOUT_URL_DEF;
					 }	
				});
		 }
		 
		 
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("user_not_authenticated", function(data) {
		ibpMashupUtils.clearIbpProgressImg();
		if(USER_FAILED_ATTEMPT == 0){
			mn_displayErrorMessage(MN_AUTH_FAILED_1);
		}
		else {
			mn_displayErrorMessage(MN_AUTH_FAILED_2);
		}
		
		if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
			mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN',IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN_FAILED');
			mn_trackEvent('SIGNIN','SIGNIN_FAILED');
		}
		
		++USER_FAILED_ATTEMPT;
	},IEEE_MASHUP_ENGINE_SERVER_URL);

	pm.bind("user_not_authorized", function(data) {
		ibpMashupUtils.clearIbpProgressImg();
		mn_displayErrorMessage(MN_USER_INACTIVE);
		
		if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
			mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN',IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN_FAILED');
			mn_trackEvent('SIGNIN','SIGNIN_FAILED');
		}
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	pm.bind("authentication_system_error", function(data) {
		ibpMashupUtils.clearIbpProgressImg();
		mn_displayErrorMessage(MN_SYS_ERROR);
		
		if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
			mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN',IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN_FAILED');
			mn_trackEvent('SIGNIN','SIGNIN_FAILED');
		}
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	
	pm.bind("step1_signin", function(data) {
		if(data != null && data != ""){
			var index = data.indexOf("|");
			var userId = data.substring(0, index);
			var pwd = data.substring(index+1);
			
			jQuery.colorbox.close();
			
			if(jQuery('#singleSignOnFlyout') != "" && jQuery('#singleSignOnFlyout') != undefined){
				jQuery('#singleSignOnFlyout').show();
	    		
				jQuery("#userName").val(userId) ;
				jQuery("#mn_password").val(pwd);
	    		
	    		mn_login();
	    	}
			
		}
		
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	
	pm.bind("logout", function(data) {
		window.location.href=data;
	},IEEE_MASHUP_ENGINE_SERVER_URL);
	
	jQuery("body").click(function(e)  {
		if(e.target.className != "mn-menu-link" && e.target.className != "ieee-user-name"){
			$('#userNameFlyout').hide();
		}
	});
	
	jQuery('#mn-signout-link').click(function(evt){
		callXploreLogout();
		//window.location.href = MN_LOGOUT_URL_DEF;
	});
	
	jQuery("#mn_password").focus(function(){
		jQuery("#mn_password").removeClass('singleSignOnFlyoutPasswordInput');
		jQuery("#mn_password").addClass('singleSignOnFlyoutContentInput');
		//alert("focus");
	});
	
	jQuery("#mn_password").blur(function(){
		if(jQuery("#mn_password").val() == ''){
			jQuery("#mn_password").addClass('singleSignOnFlyoutPasswordInput');
		}
	});
	
	jQuery("#userName").focus(function(){
		jQuery("#userName").removeClass('singleSignOnFlyoutUsernameInput');
		jQuery("#userName").addClass('singleSignOnFlyoutContentInput');
		//alert("focus");
	});
	
	jQuery("#userName").blur(function(){
		if(jQuery("#userName").val() == ''){
			jQuery("#userName").addClass('singleSignOnFlyoutUsernameInput');
		}
	});
	
	
	
	if(isCrossDomain()){
		if(typeof jQuery.ibpUIToolTip == "function"){
			jQuery.ibpUIToolTip({"serviceUrl" : "#", "timeout":20000, "appName":"mashup"});
		}
	}
	 
	//initPlaceholder();
	
	$('body').keypress(function(e){
      if ($('#singleSignOnFlyout:visible').length > 0){
		  if(e.which == 13){
	       $('#sign-in').click();
	      }
      }
	});
	
	 $('#mn-ieee-username').click( function (evt) {
		 $('#userNameFlyout').fadeIn('fast');
	 });
	 
	 
	
}

function openForgotUserName(){
	
	var helpTxt = 'Forgot Password <a class="help-tooltip margin-lt5" href="#" tooltip-info="key.PM_TT08.help">'+
	  '<img border="0" title="help" alt="" src="'+ IEEE_MASHUP_ENGINE_SERVER_URL +'/profile/assets/images/helpicon.gif">'+
	  '</a>'+
	  '<div class="display-none ibp-tt-cache"> In order to retrieve your password online, you must enter your first name, last name and e-mail address in the same format provided when your account was created.'+
	  'If you require assistance, <a href="'+ MN_CONTACT_URL +'" target="_blank">contact IEEE.</a></div>';

	
	$('#singleSignOnFlyout').hide();
	 
	if(isCrossDomain()){
		var parentUrl = window.location.href;
		$.colorbox({href:MN_FORGOT_PASSWORD_URL+"?includeJquery=true&parentUrl="+parentUrl,iframe:true,innerHeight:240, innerWidth:626,overlayClose:false,title:helpTxt,scrolling:false,opacity:0.6,close:""});
	}
	else{
		$.colorbox({href:MN_FORGOT_PASSWORD_URL,title:helpTxt,scrolling:false,innerHeight:240, innerWidth:626,overlayClose:false,opacity:0.6,close:""});
	}
	 
	 if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
		 mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_PWD',IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_USERID_PWD_VIEW');
		 mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_USERID',IEEE_MASHUP_APPLICATION_NAME+'_FORGOT_USERID_PWD_VIEW');
		 mn_trackEvent('FORGOT_PWD','FORGOT_USERID_PWD_VIEW');
		 mn_trackEvent('FORGOT_USERID','FORGOT_USERID_PWD_VIEW');
	 }
}



function getDomainName(url) {
	var url_parts = url.split('/');
	var domain_name_parts = url_parts[2].split(':');
	var domain_name = domain_name_parts[0];
	return url_parts[0]+domain_name;
}

function isCrossDomain(){
	var crossDomain = false;
	
	if(typeof IEEE_MASHUP_CROSSDOMAIN_MODE != "undefined" ){
		if(IEEE_MASHUP_CROSSDOMAIN_MODE == null || IEEE_MASHUP_CROSSDOMAIN_MODE == "Y"){
			crossDomain = true;
		}
	}
	else{
		crossDomain = true;
	}
	
	return crossDomain;
}


function loadUserNameFlyout(){
	 $('#mn-username-link').hover(
		 function () {
			 if($("#mn-ieee-username").text().length > 15){
				 $("#userNameFlyoutContent").width($("#mn-ieee-username").text().length*8.4) ;
			 }
			 $('#userNameFlyout').fadeIn('fast');
			  }, 
			  function (e) {
				//console.log(e);
				  $('#userNameFlyout').hide();
			  }
	 );
	 
	
}



/* signle signon handlers */		
function loadSingleSignon(){
    // begin single-sign-on flyout
     // --Single Sign in ---
   $('body').delegate('#singleSignOnLink','click', function(event){
     $('#singleSignOnFlyout').fadeIn('fast');
     event.preventDefault;
     
     if(typeof mn_trackEvent == "function" && typeof IEEE_MASHUP_APPLICATION_NAME != "undefined"){
    	 mn_trackEvent(IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN',IEEE_MASHUP_APPLICATION_NAME+'_SIGNIN_VIEW');
    	 mn_trackEvent('SIGNIN','SIGNIN_VIEW');
     }
     return false;
   });
   $('#singleSignOnFlyout').delegate('#singleSignOnClose','click',function(event) {
     
     $('.tooltip-overlay').remove();			   
     $('.error-panel').remove();			   
     $('#singleSignOnFlyout').hide();
   });
    // end single-sign-on flyout
}



/*
 * IBP UI common javascript utility functions Author: Nagarajan Ramalingam
 * <n.ramalingam@ieee.org> Date: 15th Sep 20011
 */
var ibpMashupUtils = {
		defIbpLoadingTxt:"Loading...",
		isOldIEBrowser : function() {
			var oldBrowser = false;
			if (navigator.appVersion.indexOf("MSIE") != -1) {
				var appVersion = navigator.appVersion.split("MSIE");
				var version = parseFloat(appVersion[1]);
				if (version <= 6) {
					oldBrowser = true;
				}
			}
			return oldBrowser;
		},
		getProgTxtWidth: function(modalWidth, inProgressText){
			
			var lTxtMinWidth = 40;
			var lTxtMaxWidth = modalWidth-100;
			var lTxtWidth = lTxtMinWidth;
			if (typeof inProgressText != "undefined") {			
				if($("#ibpTLoadTxt").length==0){
					var progTxtTDiv = "<div id='ibpTLoadTxt' style='float:left;visibility:hidden;display:block;font-size:12px;font-weight:bold;'>&nbsp;</div>";
					$("body").append(progTxtTDiv);
				}
				
				$ibpTLoadTxt = $("#ibpTLoadTxt");
				$ibpTLoadTxt.html(inProgressText);
				lTxtCalcWidth = $ibpTLoadTxt.width()+40;
				if(lTxtCalcWidth>lTxtMaxWidth){
					lTxtWidth = lTxtMaxWidth;
				}else if(lTxtCalcWidth<lTxtMinWidth){
					lTxtWidth = lTxtMinWidth;
				}else{
					lTxtWidth = lTxtCalcWidth;
				}					
			}
			return lTxtWidth;
			
		},
		showIbpProgressImg : function(respId, inProgressText, delayTextInfo) {
			try {
				var $ibpAjaxLoading  = null;
				var $respId = null;
				var loadingText = "&nbsp;";
				if(respId=="body"){
					respId = "page-container";
				}
				if(typeof respId == "string"){
					$respId = $("#" + respId);
				}else{
					$respId = respId;
				}	
				if (($respId == null) || ($respId.length == 0)
						|| ($respId.prev("div.ibpAjaxLoading").length > 0)) {
					return;
				}
				
				var modalWidth = $respId.width()
								+ ibpCommonUtils.getIbpPadding($respId.css("padding-left"))
								+ ibpCommonUtils.getIbpPadding($respId.css("padding-right"));
				
				var lTxtWidth = ibpCommonUtils.getProgTxtWidth(modalWidth, inProgressText);
				var lTxtLeft = (modalWidth - lTxtWidth)/2;
				var lStyleWidth = lTxtWidth;
				var lTxtWidth = lTxtWidth-38;
				
				//default with no text
				if(lTxtWidth<=40){
					lStyleWidth = 30;
					lTxtWidth = 1;
				}			
				if ((typeof inProgressText != "undefined") &&
					($.trim(inProgressText).length>0)) {
					loadingText = inProgressText;
				}
				var $modalDiv ="";
				var $ibpAjaxLoading="";
				if (respId == "page-container") {												
					
					lTxtLeft +=	$("#page-container").offset().left;
					$modalDiv = $("<div class='ibpAjaxLoadingMask' style='top:0;width:100%;height:100%;position:fixed;'>&nbsp;</div>");
					
					$ibpAjaxLoading = $("<div class='ibpAjaxLoading' style='width:100%;position:fixed;height:100%;left:0;top:0'>"+
													"<div style='top:48%;left:"+(lTxtLeft)+"px;"+ "width:"+lStyleWidth+"px; position: fixed;font-weight:bold;' class='ibpAjaxLoadingSec'>"+
													"<div class='ibpAjaxLoadingText' style='width:"+lTxtWidth+"px;'>"+loadingText+"</div>"+
												"</div>"+
											"</div>");
								
					$respId.before($modalDiv);
					$respId.before($ibpAjaxLoading);
					
				}else{								
					
					var modalHeight = $respId.height()
										+ ibpCommonUtils.getIbpPadding($respId.css("padding-top"))
										+ ibpCommonUtils.getIbpPadding($respId.css("padding-bottom"));
					if(modalHeight<=30){
						modalHeight = 30;
					}				
					
					var lTxtTop = (modalHeight / 2) - 10;
					
					var secStyle = "height:" + modalHeight + "px;width:" + modalWidth
									+ "px;position:absolute;padding:0;margin-left:"+ibpCommonUtils.getIbpPadding($respId.css("left"))+"px;";						
					
					var loadingStyle = "position:absolute;top:" + lTxtTop
										+ "px;left:" + lTxtLeft + "px;width:"+(lStyleWidth)+"px;";
					var loadingTxtStyle = "width:"+(lTxtWidth)+"px;";
					
					$ibpAjaxLoading = $("<div class='ibpAjaxLoading' style='" + secStyle
									+ "'><div class='ibpAjaxLoadingSec' style='" + loadingStyle + "'><div class='ibpAjaxLoadingText' style='"+loadingTxtStyle+"' >" + loadingText
									+ "</div></div></div>");
									
					$modalDiv = "<div class='ibpAjaxLoadingMask' style='" + secStyle+"'>&nbsp;</div>";
					
					$respId.before($modalDiv);
					$respId.before($ibpAjaxLoading);
				}
				
				showIbpProgText = function(delayTimeout, delayMsg){
					
					var showIbpProgresText = function() {
						var $ajaxLoadingText = $ibpAjaxLoading.find('div.ibpAjaxLoadingText');
						if(typeof delayMsg != "undefined"){							
							var ldTxtWidth = ibpCommonUtils.getProgTxtWidth(modalWidth, delayMsg);
							var ldTxtLeft = (modalWidth - ldTxtWidth)/2;
							$ibpAjaxLoading.find('.ibpAjaxLoadingSec').css({'width' : ldTxtWidth+'px', 'left' : ldTxtLeft+'px'});
							$ibpAjaxLoading.find('.ibpAjaxLoadingText').css({'width' : ldTxtWidth-10+'px'});
							$ajaxLoadingText.html(delayMsg);
						}
						$ajaxLoadingText.css('display', 'block');
					};
					setTimeout(showIbpProgresText, delayTimeout);
					
				};
				
				$ibpAjaxLoading.find('div.ibpAjaxLoadingText').css('display', 'block');
				if (typeof inProgressText == "undefined") {				
					showIbpProgText(2000, ibpCommonUtils.defIbpLoadingTxt);
				}
				
				if(typeof delayTextInfo != "undefined"){
					
					if($.isArray(delayTextInfo)){
						$.each(delayTextInfo, function(index, dtextInfo) { 
							showIbpProgText(dtextInfo.delayTextInMillis, dtextInfo.delayTextMsg);  
						});
					}else{
						showIbpProgText(delayTextInfo.delayTextInMillis, delayTextInfo.delayTextMsg);	
					}
					
				}
			} catch (e) {
				// dont do anything let it go
			}
		},
		clearIbpProgressImg : function(respId) {
			try {
				if (typeof respId != "undefined" && respId=="body") {				
					var $body = $("body");
					$body.find(">div.ibpAjaxLoading, >div.ibpAjaxLoadingMask").remove();
				}else if (typeof respId != "undefined") {
					var $respId = $("#" + respId);
					if ($respId == null || $respId.length == 0) {
						return;
					}			
					$respId.prev("div.ibpAjaxLoading").remove();
					$respId.prev("div.ibpAjaxLoadingMask").remove();
				} else {
					$("div.ibpAjaxLoading, div.ibpAjaxLoadingMask").remove();				
				}
			} catch (e) {
				// dont do anything let it go
			}
		},
		getIbpPadding : function(paddingStr) {
			var intVal = 0;		
			try {
				if(paddingStr=="auto"){
					intVal = 0;
				}else{
					intVal = parseInt(paddingStr.replace("px", ""));	
				}			
			} catch (e) {
				intVal = 0;
			}
			return intVal;
		}
};

	
function validateEmail($email) {
	var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
	if( !emailReg.test( $email ) ) {
		return false;
	} else {
		return true;
	}
}


function initPlaceholder() {
	jQuery.support.placeholder = false;
	test = document.createElement('input');
	
	if('placeholder' in test) jQuery.support.placeholder = true;
	
	if(!jQuery.support.placeholder) {
		var active = document.activeElement;
		jQuery(':text').focus(function () {
			if (jQuery(this).attr('placeholder') != '' && jQuery(this).val() == jQuery(this).attr('placeholder')) {
				jQuery(this).val('').removeClass('hasPlaceholder');
				jQuery(this).val('').css('background',"#fff");
			}
		}).blur(function () {
			if (jQuery(this).attr('placeholder') != '' && (jQuery(this).val() == '' || jQuery(this).val() == jQuery(this).attr('placeholder'))) {
				jQuery(this).val(jQuery(this).attr('placeholder')).addClass('hasPlaceholder');
				
			}
		});
		jQuery(':text').blur();
		jQuery(active).focus();
		
		
		jQuery('form:eq(0)').submit( function () {
			jQuery(':text.hasPlaceholder').val('');
		});
		
	
	}
	
	
	
	
};



function callXploreLogout(){
	jQuery.ajax({
	      url: MN_XPLORE_LOGOUT_URL,
	      type: "GET",
	      dataType: "jsonp",
	      success: function(data){
	      }
	}
	);
	
	var millisecondsToWait = 1000;
	setTimeout(function() {
		window.location.href = MN_LOGOUT_URL_DEF;
	}, millisecondsToWait);

	
}


function mn_getCartQuantity(){
	var carQty = 0;
	var ieeeUserInfoCookie = $.cookie(MN_COOKIE_IEEE_USER_INFO);
	
	if(typeof ieeeUserInfoCookie != "undefined" &&  ieeeUserInfoCookie != null && ieeeUserInfoCookie != "") {
		var ieeeUserInfo = $.evalJSON(ieeeUserInfoCookie);
		if (ieeeUserInfo.cartItemQty != null) {
			carQty = ieeeUserInfo.cartItemQty;
		}
	}
	return carQty;
}

/*function trackEvent(si_n, si_p){
	if(typeof dcsMultiTrack == "function"){
		
		if(si_p.indexOf('ORDERCONFIRMATION') != -1){
			dcsMultiTrack('WT.si_n',si_n,'WT.si_p',si_p,'WT.si_cs','1');//for conversion pages.
		}
		else {
			dcsMultiTrack('WT.si_n',si_n,'WT.si_p',si_p);//WT_si_n
		}
		
		setTimeout('donothing()', 250);
 	}
}

function donothing(){
}
*/

function clicker(){
	var thediv=document.getElementById('displaybox');
	if(thediv.style.display == "none"){
		thediv.style.display = "";
		thediv.innerHTML = "<table width='100%' height='100%'><tr><td width='100%' height='100%' align='center' valign='middle'><iframe width='100%' height='100%' src='http://www.ieeelocal.org:7001/ieee-mashup/jsp/transPage.jsp'></iframe><a href='#' onclick='return clicker();'>CLOSE WINDOW</a></td></tr></table>";
	}else{
		thediv.style.display = "none";
		thediv.innerHTML = '';
	}
	return false;
}


function mn_iFrameResize(){
    var i_width= document.getElementById("adIframe").contentWindow.document.body.scrollWidth;
    var i_height= document.getElementById('adIframe').contentWindow.document.body.scrollHeight;
	document.getElementById("adIframe").width= i_width;
	document.getElementById("adIframe").height= i_height;
}






Æ#:4(­      X–ádX–ád=gÍQX™Úƒ   F    :https://www.ieee.org/ieee-mashup/js/meta-nav/ieee-meta-nav-include.js security-info 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 request-method GET response-head HTTP/1.1 200 OK
Last-Modified: Fri, 13 Jan 2017 20:10:30 GMT
Etag: "9e49-545ff6cecf980"
Accept-Ranges: bytes
Content-Length: 40521
Content-Type: text/javascript
content-security-policy: frame-ancestors http://*.ieee.org https://*.ieee.org
Strict-Transport-Security: max-age=31536000 includeSubDomains
Date: Sun, 05 Feb 2017 09:25:08 GMT
 uncompressed-len 0   žI